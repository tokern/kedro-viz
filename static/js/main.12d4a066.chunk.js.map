{"version":3,"sources":["components/easter-egg/brodyquest.mp3","components/easter-egg/easter-egg.png","webpack:///./src/utils/graph/index.js?3237","actions/index.js","reducers/flags.js","utils/worker.js","actions/graph.js","reducers/graph.js","reducers/layers.js","config.js","utils/index.js","store/load-data.js","store/helpers.js","store/normalize-data.js","utils/flags.js","store/initial-state.js","actions/pipelines.js","actions/nodes.js","reducers/loading.js","reducers/nodes.js","reducers/node-type.js","actions/node-type.js","reducers/pipeline.js","reducers/tags.js","actions/tags.js","reducers/visible.js","reducers/index.js","selectors/pipeline.js","selectors/tags.js","selectors/disabled.js","selectors/edges.js","selectors/ranks.js","selectors/nodes.js","selectors/metadata.js","selectors/layout.js","store/index.js","selectors/layers.js","selectors/linked-nodes.js","utils/modifiers.js","components/icons/node-icon.js","components/flowchart/draw.js","components/tooltip/index.js","components/flowchart/index.js","components/pipeline-list/index.js","components/node-list/node-list-search.js","components/icons/visible.js","components/icons/invisible.js","components/node-list/node-list-row.js","components/lazy-list/index.js","components/node-list/node-list-row-list.js","components/node-list/node-list-group.js","components/node-list/node-list-groups.js","components/node-list/node-list.js","components/icons/indicator.js","components/icons/indicator-off.js","components/icons/indicator-partial.js","components/node-list/node-list-items.js","selectors/node-types.js","components/node-list/index.js","components/icon-button/index.js","components/icons/menu.js","components/icons/theme.js","components/icons/label.js","components/icons/export.js","components/icons/layers.js","components/primary-toolbar/index.js","components/icons/map.js","components/icons/plus.js","components/icons/minus.js","components/icons/reset.js","components/minimap-toolbar/index.js","components/minimap/draw.js","components/minimap/index.js","components/sidebar/index.js","components/icons/copy.js","components/icons/close.js","components/metadata/metadata-value.js","components/metadata/metadata-list.js","components/metadata/metadata-row.js","components/metadata/index.js","components/export-modal/export-graph.js","components/export-modal/index.js","components/icons/loading.js","selectors/loading.js","components/wrapper/index.js","components/app/index.js","components/easter-egg/index.js","utils/random-utils.js","utils/random-data.js","utils/data-source.js","index.js","utils/graph/common.js","utils/graph/solver.js","utils/graph/layout.js","utils/graph/graph.js","utils/graph/routing.js","utils/graph/index.js"],"names":["module","exports","addMethods","methods","w","Worker","URL","createObjectURL","Blob","name","resetData","data","type","toggleExportModal","visible","toggleGraph","updateZoom","zoom","flagsReducer","flagsState","action","Object","assign","value","isTest","jest","graphWorker","require","graph","worker","mockWorker","terminate","keys","forEach","payload","Promise","resolve","toggleLoading","loading","updateGraph","layoutWorker","getJob","instance","running","then","response","preventWorkerQueues","state","oldgraph","graphDagre","graphNew","nodeReducer","graphState","newState","layerReducer","layerState","pathRoot","metaSidebarWidth","breakpoint","open","closed","sidebarWidth","flags","description","default","private","icon","lazy","sidebar","Categories","Tags","Elements","Nodes","Datasets","Parameters","arrayToObject","array","callback","newObject","key","getUrl","id","join","Error","unique","d","i","arr","indexOf","loadJsonData","path","fallback","json","catch","fullPath","substr","noWindow","window","loadState","serializedState","localStorage","getItem","JSON","parse","err","console","error","saveState","hasOwnProperty","nodeTypeDisabled","stringify","setItem","pruneFalseyKeys","obj","newObj","normalizeData","pipeline","ids","node","fullName","tags","layer","disabled","pipelines","clicked","hovered","fetched","code","docstring","parameters","filepath","datasetType","nodeType","task","edge","sources","targets","tag","active","enabled","asyncDataSource","Array","isArray","edges","nodes","validateInput","push","full_name","addNode","source","target","createEdgeID","includes","addEdge","addPipeline","length","main","selected_pipeline","addTag","layers","addLayer","Flags","isDefined","names","flagsConfig","defaults","reduce","result","flag","getFlagsFromUrl","url","urlParams","document","location","href","searchParams","e","warn","mergeLocalStorage","localStorageState","deepmerge","preparePipelineState","applyFixes","prepareNonPipelineState","props","chartSize","textLabels","theme","labelBtn","layerBtn","exportBtn","exportModal","themeBtn","miniMapBtn","miniMap","getInitialState","updateActivePipeline","getPipelineUrl","toggleNodeClicked","nodeClicked","toggleNodeHovered","nodeHovered","toggleNodeDataLoading","loadNodeData","nodeID","dispatch","getState","a","nodeData","loadingReducer","loadingState","nodeState","updateState","nodeIDs","isDisabled","nodeTypeReducer","nodeTypeState","typeID","pipelineReducer","pipelineState","tagReducer","tagState","batchChanges","tagIDs","tagID","visibleReducer","visibleState","createReducer","initialState","combinedReducer","combineReducers","fontLoaded","rootReducer","resetDataReducer","getNodeIDs","getNodeDisabledPipeline","createSelector","nodePipelines","activePipeline","getPipelineNodeIDs","nodeDisabledPipeline","filter","getPipelineTagIDs","nodeTags","visibleTags","getTagEnabled","getTagData","tagName","tagActive","tagEnabled","sort","map","Boolean","getTagCount","total","getNodeDisabledTag","tagCount","some","getNodeDisabled","nodeDisabledNode","nodeDisabledTag","typeDisabled","getVisibleNodeIDs","nodeDisabled","getVisibleLayerIDs","nodeLayer","layerIDs","layersVisible","visibleLayerIDs","layerID","getEdgeDisabled","edgeIDs","edgeSources","edgeTargets","edgeID","getEdgeIDs","getEdgeSources","getEdgeTargets","getTransitiveEdges","transitiveEdges","walkGraphEdges","concat","addNewEdge","getVisibleEdges","edgeDisabled","getLayerNodes","layerNodes","getNodeRank","nodeDeps","sourceID","targetID","toposortedNodes","batchingToposort","nodeRanks","rank","getNodeName","getNodeType","getFontLoaded","getGraphNodes","getNodeActive","hoveredNode","activeViaTag","getNodeSelected","clickedNode","getNodeData","nodeName","b","disabled_node","disabled_tag","disabled_type","getGroupedNodes","item","getNodeTextWidth","nodeTextWidth","svg","select","body","append","attr","selectAll","enter","text","each","width","this","getBBox","remove","getNodeSize","iconSize","padding","showLabels","isTask","x","y","textWidth","innerWidth","showText","height","textOffset","iconOffset","getVisibleNodes","nodeFullName","nodeSize","nodeRank","label","getClickedNode","sortAlpha","localeCompare","getVisibleMetaSidebar","runCommandTemplates","getRunCommand","template","getClickedNodeMetaData","nodeId","tagNames","nodeFilepaths","nodeCodes","nodeDocstrings","nodeParameters","nodeDatasetTypes","entries","metadata","tagId","runCommand","inputs","outputs","getGraphInput","getSidebarWidth","getChartSize","visibleSidebar","visibleMetaSidebar","left","top","sidebarWidthActual","metaSidebarWidthActual","outerWidth","outerHeight","getChartZoom","updateGraphOnChange","store","watchGraph","watch","subscribe","graphInput","configureStore","createStore","reducer","applyMiddleware","thunk","getLayers","size","layerName","bounds","nearestLayer","bound","Infinity","currentBound","prevBound","nextBound","start","end","rectWidth","Math","max","getCentralNode","getVisibleEdgesByNode","sourceEdges","targetEdges","findLinkedNodes","edgesByNode","visited","getLinkedNodes","linkedNodes","modifiers","others","classes","modifier","replace","paths","className","viewBox","lineShape","line","curve","curveBasis","matchFloats","toSinglePoint","parseFloat","toFixed","drawLayers","el","layerGroup","enterLayers","exit","merge","drawLayerNames","layerNameGroup","transition","duration","DURATION","style","layerNames","enterLayerNames","updateNodeRects","nodeRects","drawNodes","changed","centralNode","nodeActive","nodeSelected","nodeGroup","updateNodes","enterNodes","exitNodes","allNodes","classed","on","handleNodeClick","handleNodeMouseOver","handleNodeMouseOut","handleNodeKeyDown","nodeIcons","order","call","drawEdges","edgeGroup","updateEdges","enterEdges","exitEdges","allEdges","attrTween","current","points","previous","interpolatePath","zeroWidthSpace","String","fromCharCode","Tooltip","targetRect","isRight","isTop","xOffset","yOffset","classnames","transform","insertZeroWidthSpace","defaultProps","FlowChart","Component","constructor","super","handleWindowResize","updateChartSize","handleBeforePrint","gs","graphSize","marginx","marginy","handleAfterPrint","onLoadNodeData","event","stopPropagation","handleChartClick","onToggleNodeHovered","showTooltip","hideTooltip","keyCode","tooltip","containerRef","React","createRef","svgRef","wrapperRef","edgesRef","nodesRef","layersRef","layerNamesRef","componentDidMount","selectD3Elements","initZoomBehaviour","addGlobalEventListeners","update","componentWillUnmount","removeGlobalEventListeners","componentDidUpdate","prevProps","chartZoom","zoomToFit","objectA","objectB","prop","wrapper","onUpdateChartSize","getBoundingClientRect","ResizeObserver","resizeObserver","observe","addEventListener","unobserve","removeEventListener","zoomBehaviour","interpolate","scale","k","scaleExtent","minScale","maxScale","translateExtent","ty","onUpdateZoom","applied","reset","currentTransform","zoomTransform","targetScale","targetX","targetY","zoomIdentity","translateTo","scaleTo","targetTransform","translateX","translateY","min","translate","options","setState","render","visibleGraph","ref","onClick","refX","refY","markerUnits","markerWidth","markerHeight","orient","emptyEdges","emptyNodes","emptyGraphSize","connect","ownProps","onUpdateActivePipeline","pipelineID","onToggleOpen","onOpened","onClosed","onChanged","defaultText","primaryText","onUpdateSearchValue","searchValue","container","useRef","handleWindowKeyDown","isKeyF","isKeyCtrlOrCmd","ctrlKey","metaKey","input","querySelector","activeElement","focus","preventDefault","blur","useEffect","onKeyDown","onChange","placeholder","NodeListRow","memo","Container","checked","unset","children","faded","kind","onMouseEnter","onMouseLeave","selected","visibleIcon","VisibleIcon","invisibleIcon","InvisibleIcon","VisibilityIcon","title","onFocus","onBlur","dangerouslySetInnerHTML","__html","htmlFor","aria-label","nextProps","dispose","buffer","element","offsetParent","supported","IntersectionObserver","useState","range","setRange","rangeRef","listRef","upperRef","lowerRef","itemHeight","useMemo","totalHeight","upperHeight","lowerHeight","requestUpdate","useRequestFrameOnce","useCallback","visibleRange","visibleRangeOf","effectiveRange","rangeUnion","rangeEqual","observerOptions","threshold","thresholds","useIntersection","useLayoutEffect","childProps","listStyle","position","undefined","paddingTop","upperStyle","display","lowerStyle","bottom","rangeA","rangeB","childTotal","childHeight","clip","list","bufferCount","ceil","viewport","innerHeight","documentElement","clientHeight","floor","request","cancelAnimationFrame","requestAnimationFrame","from","_","observer","disconnect","NodeRowList","items","group","collapsed","onItemClick","onItemChange","onItemMouseEnter","onItemMouseLeave","highlightedLabel","NodeRowLazyList","fade","slice","NodeListGroup","childCount","allUnset","onToggleChecked","onToggleCollapsed","toLowerCase","storedState","NodeListGroups","sections","groups","onToggleGroupChecked","groupsCollapsed","setCollapsed","onToggleGroupCollapsed","section","types","typeId","count","NodeList","getGroupState","autoHide","hideTracksWhenNotNeeded","xmlns","rx","strokeWidth","escapeRegExp","utils","getHighlightedText","highlightMatch","addHighlightedLabel","newNodes","filterNodes","filterNodesByType","valueRegex","RegExp","match","nodeMatchesSearch","getFilteredNodes","filteredNodes","getFilteredTags","getFilteredTagItems","tagsEnabled","filteredTags","IndicatorIcon","IndicatorOffIcon","compareEnabledThenAlpha","itemA","itemB","byEnabledTag","Number","byAlpha","getFilteredNodeItems","getSections","values","getGroups","nodeTypes","itemType","itemsOfType","every","allChecked","IndicatorPartialIcon","getFilteredItems","filteredNodeItems","filteredTagItems","getNodeTypeIDs","getTypeNodeCount","typeNodeIDs","visibleTypeNodeIDs","getNodeTypes","typeName","typeNodeCount","nodeCount","isTagType","onToggleTagActive","toggleTagActive","onToggleTagFilter","toggleTagFilter","onToggleTypeDisabled","toggleTypeDisabled","onToggleNodeSelected","onToggleNodeActive","onToggleNodesDisabled","toggleNodesDisabled","updateSearchValue","onTagItemChange","tagItem","wasChecked","oneTagChecked","handleKeyDown","handleKeyEvent","escape","tagItems","allTagsValue","IconButton","ariaLabel","ariaLive","labelText","Icon","aria-live","disableLayerBtn","visibleLayers","onToggleExportModal","onToggleLayers","onToggleSidebar","toggleSidebar","onToggleTextLabels","onToggleTheme","MenuIcon","ThemeIcon","LabelIcon","ExportIcon","LayersIcon","scaleZoom","factor","onToggleMiniMap","onUpdateChartZoom","MapIcon","PlusIcon","MinusIcon","ResetIcon","round","drawViewport","mapSize","getViewport","minX","minY","maxX","maxY","sizeOffset","MiniMap","onPointerEnter","isPointerInside","onPointerLeave","onPointerUpGlobal","isPointerDown","onPointerDown","onPointerMove","onPointerWheel","deltaY","ZOOM_RATE","onPointerWheelGlobal","contains","useTransition","time","Date","lastTransitionTime","TRANSITION_WAIT","graphWidth","graphHeight","containerRect","clientX","clientY","viewportRef","bind","passive","pointerEventName","mapScale","transformStyle","inputEvents","onWheel","PointerEvent","getMapSize","scaledWidth","pipelineIsOpen","togglePipeline","MetaDataValue","empty","MetaDataList","property","inline","commas","limit","expanded","setExpanded","showValues","remainder","index","aria-expanded","MetaDataRow","showList","data-label","showCopied","setShowCopied","isTaskNode","isParametersNode","isDataNode","Fragment","CloseIcon","navigator","clipboard","CopyIcon","writeText","setTimeout","exportGraph","format","mockFn","downloadFormats","png","downloadPng","downloadSvg","download","clone","parentNode","appendChild","cloneNode","classList","add","setAttribute","removeAttribute","maxWidth","createElement","innerHTML","prepend","css","removeChild","onToggle","onClose","isLoading","graphLoading","pipelineLoading","fontLoading","nodeLoading","App","loadWebFonts","announceFlags","updatePipelineData","message","flagsEnabled","allNames","info","isEnabled","status","statusIcon","getFlagsMessage","setFontLoaded","LoadWebFont","inactive","EasterEgg","play","audio","Audio","mp3","loop","KonamiCode","listen","toggleState","toggleAudio","toggleCSS","pause","src","img","alt","getSeedFromURL","seed","get","characters","charAt","random","generateHash","set","toString","getNumberArray","n","LOREM_IPSUM","split","randomUtils","seedrandom","randomIndex","randomNumber","getRandom","randomNumberBetween","getRandomName","getRandomSelection","len","taken","LAYERS","Pipeline","generatePipelines","rankCount","getRankCount","rankLayers","getRankLayers","generateTags","generateNodes","generateEdges","finalise","pipelineCount","layerSize","rankNodeCount","getRankNodeCount","createNode","getType","_sources","initialRank","getNodePipelines","getRandomTags","_targets","getNodesByRank","nodesByRank","edgeCount","ranks","getRandomNodeAtRank","rankIndex","rankValue","rankNodes","sourceRankIndex","remainingRankCount","biasedRandom","_sourceNode","_targetNode","activeNodes","degree","activeTags","activeEdges","visibleNodes","sortedNodes","find","all","generateRandomPipeline","getPipelineData","animals","demo","getRandomPipeline","getDataValue","qs","search","REACT_APP_DATA_SOURCE","process","isDemo","host","encodeURIComponent","getSourceID","KedroViz","ReactDOM","getElementById","halfPI","PI","snap","unit","distance1d","abs","angle","atan2","nodeLeft","nodeRight","nodeTop","nodeBottom","groupByRow","rows","rowNumbers","row","sortedRows","compare","delta","nearestOnLine","ax","ay","bx","by","dx","dy","positionClamped","subtract","equalTo","greaterOrEqual","solve","constraints","iterations","strict","solveStrict","solveLoose","co","distance","operator","strength","weightA","weightB","solver","kiwi","variables","expression","minus","constraint","Eq","Ge","required","strong","addConstraint","updateVariables","expandDenseRows","spaceY","densities","rowDensity","currentOffsetY","density","edgeAngle","targetNode","sourceNode","sourceRow","targetRow","defaultOptions","layout","spaceX","layerSpaceY","basisX","routing","minPassageGap","stemUnit","stemMinSource","stemMinTarget","stemMax","stemSpaceSource","stemSpaceTarget","addEdgeLinks","addNearestLayers","layerConstraints","crossingConstraints","parallelConstraints","parallelSingleConstraints","parallelDoubleConstraints","separationConstraints","snapConstraints","rowConstraints","layerSpace","nextLayer","nextLayerNodes","layerNode","crossingConstraint","edgeA","edgeB","j","parallelConstraint","sourceHasOneTarget","targetHasOneSource","halfIterations","l","rowNodes","separation","minSeparation","targetSeparation","sourceSeparation","sourceOffsetX","currentPoint","firstNode","nearestPoint","nearestDistance","rowExtended","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","nextNode","nodeGap","offsetX","candidatePoint","offsetY","sourceEdgeDistance","targetEdgeDistance","targetOffsetX","sourceOffsetY","targetOffsetY","sourceStem","targetStem","pointYMax","point","offset","offsetNode","offsetEdge","nodeById","layersMap","res","hasValidLayer","findNodeBy","targetThenSourceNodes","nodeDistance","targetNodes","sourceNodes","nodeA","nodeB","successors","metric","accept","nearest","hasLayers","dagre","graphlib","Graph","setGraph","ranker","ranksep","setNode","setEdge"],"mappings":"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","file":"static/js/main.12d4a066.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/brodyquest.6259cc84.mp3\";","module.exports = __webpack_public_path__ + \"static/media/easter-egg.e702bd5f.png\";","\n\t\t\t\tvar addMethods = require(\"../../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"graphNew\",\"graphDagre\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(URL.createObjectURL(new Blob([\"/*! For license information please see a67b65779e12e20ba57c.worker.js.LICENSE.txt */\\n!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\\\"undefined\\\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\\\"Module\\\"}),Object.defineProperty(t,\\\"__esModule\\\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\\\"object\\\"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\\\"default\\\",{enumerable:!0,value:t}),2&e&&\\\"string\\\"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\\\"a\\\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\\\"./\\\",n(n.s=290)}([function(t,e,n){var r;try{r={cloneDeep:n(230),constant:n(53),defaults:n(231),each:n(80),filter:n(83),find:n(232),flatten:n(110),forEach:n(81),forIn:n(237),has:n(94),isUndefined:n(95),last:n(238),map:n(96),mapValues:n(239),max:n(240),merge:n(242),min:n(248),minBy:n(249),now:n(250),pick:n(251),range:n(256),reduce:n(98),sortBy:n(259),uniqueId:n(264),values:n(103),zipObject:n(265)}}catch(o){}r||(r=window._),t.exports=r},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){\\\"use strict\\\";var r=n(0),o=n(5).Graph;function i(t,e,n,o){var i;do{i=r.uniqueId(o)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function a(t){return r.max(r.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n})))}t.exports={addDummyNode:i,simplify:function(t){var e=(new o).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},o=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})})),e},asNonCompoundGraph:function(t){var e=new o({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,o=t.x,i=t.y,a=e.x-o,u=e.y-i,s=t.width/2,c=t.height/2;if(!a&&!u)throw new Error(\\\"Not possible to find intersection inside of the rectangle\\\");Math.abs(u)*s>Math.abs(a)*c?(u<0&&(c=-c),n=c*a/u,r=c):(a<0&&(s=-s),n=s,r=s*u/a);return{x:o+n,y:i+r}},buildLayerMatrix:function(t){var e=r.map(r.range(a(t)+1),(function(){return[]}));return r.forEach(t.nodes(),(function(n){var o=t.node(n),i=o.rank;r.isUndefined(i)||(e[i][o.order]=n)})),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank})));r.forEach(t.nodes(),(function(n){var o=t.node(n);r.has(o,\\\"rank\\\")&&(o.rank-=e)}))},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];r.forEach(t.nodes(),(function(r){var o=t.node(r).rank-e;n[o]||(n[o]=[]),n[o].push(r)}));var o=0,i=t.graph().nodeRankFactor;r.forEach(n,(function(e,n){r.isUndefined(e)&&n%i!==0?--o:o&&r.forEach(e,(function(e){t.node(e).rank+=o}))}))},addBorderNode:function(t,e,n,r){var o={width:0,height:0};arguments.length>=4&&(o.rank=n,o.order=r);return i(t,\\\"border\\\",o,e)},maxRank:a,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+\\\" time: \\\"+(r.now()-n)+\\\"ms\\\")}},notime:function(t,e){return e()}}},function(t,e,n){var r;try{r={clone:n(117),constant:n(53),each:n(80),filter:n(83),has:n(94),isArray:n(1),isEmpty:n(194),isFunction:n(20),isUndefined:n(95),keys:n(10),map:n(96),reduce:n(98),size:n(197),transform:n(203),union:n(204),values:n(103)}}catch(o){}r||(r=window._),t.exports=r},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&(\\\"object\\\"==e||\\\"function\\\"==e)}},function(t,e,n){var r;try{r=n(115)}catch(o){}r||(r=window.graphlib),t.exports=r},function(t,e,n){var r=n(63),o=\\\"object\\\"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function(\\\"return this\\\")();t.exports=i},function(t,e){t.exports=function(t){return null!=t&&\\\"object\\\"==typeof t}},function(t,e,n){var r=n(20),o=n(47);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e,n){var r=n(174),o=n(184),i=n(13),a=n(1),u=n(191);t.exports=function(t){return\\\"function\\\"==typeof t?t:null==t?i:\\\"object\\\"==typeof t?a(t)?o(t[0],t[1]):r(t):u(t)}},function(t,e,n){var r=n(66),o=n(49),i=n(8);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e,n){var r=n(128),o=n(134);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(15),o=n(130),i=n(131),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?\\\"[object Undefined]\\\":\\\"[object Null]\\\":a&&a in Object(t)?o(t):i(t)}},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e,n){var r=n(6).Symbol;t.exports=r},function(t,e,n){(function(t){var r=n(6),o=n(150),i=e&&!e.nodeType&&e,a=i&&\\\"object\\\"==typeof t&&t&&!t.nodeType&&t,u=a&&a.exports===i?r.Buffer:void 0,s=(u?u.isBuffer:void 0)||o;t.exports=s}).call(this,n(46)(t))},function(t,e,n){var r=n(66),o=n(154),i=n(8);t.exports=function(t){return i(t)?r(t,!0):o(t)}},function(t,e,n){var r=n(159),o=n(43),i=n(160),a=n(75),u=n(161),s=n(12),c=n(64),f=c(r),d=c(o),h=c(i),p=c(a),l=c(u),v=s;(r&&\\\"[object DataView]\\\"!=v(new r(new ArrayBuffer(1)))||o&&\\\"[object Map]\\\"!=v(new o)||i&&\\\"[object Promise]\\\"!=v(i.resolve())||a&&\\\"[object Set]\\\"!=v(new a)||u&&\\\"[object WeakMap]\\\"!=v(new u))&&(v=function(t){var e=s(t),n=\\\"[object Object]\\\"==e?t.constructor:void 0,r=n?c(n):\\\"\\\";if(r)switch(r){case f:return\\\"[object DataView]\\\";case d:return\\\"[object Map]\\\";case h:return\\\"[object Promise]\\\";case p:return\\\"[object Set]\\\";case l:return\\\"[object WeakMap]\\\"}return e}),t.exports=v},function(t,e,n){var r=n(12),o=n(7);t.exports=function(t){return\\\"symbol\\\"==typeof t||o(t)&&\\\"[object Symbol]\\\"==r(t)}},function(t,e,n){var r=n(12),o=n(4);t.exports=function(t){if(!o(t))return!1;var e=r(t);return\\\"[object Function]\\\"==e||\\\"[object GeneratorFunction]\\\"==e||\\\"[object AsyncFunction]\\\"==e||\\\"[object Proxy]\\\"==e}},function(t,e,n){var r=n(30),o=n(31);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var u=-1,s=e.length;++u<s;){var c=e[u],f=i?i(n[c],t[c],c,n,t):void 0;void 0===f&&(f=t[c]),a?o(n,c,f):r(n,c,f)}return n}},function(t,e,n){var r=n(149),o=n(7),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,\\\"callee\\\")&&!u.call(t,\\\"callee\\\")};t.exports=s},function(t,e,n){var r=n(151),o=n(33),i=n(48),a=i&&i.isTypedArray,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(19);t.exports=function(t){if(\\\"string\\\"==typeof t||r(t))return t;var e=t+\\\"\\\";return\\\"0\\\"==e&&1/t==-1/0?\\\"-0\\\":e}},function(t,e,n){var r=n(26),o=n(123),i=n(124),a=n(125),u=n(126),s=n(127);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=u,c.prototype.set=s,t.exports=c},function(t,e,n){var r=n(118),o=n(119),i=n(120),a=n(121),u=n(122);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(14);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(11)(Object,\\\"create\\\");t.exports=r},function(t,e,n){var r=n(143);t.exports=function(t,e){var n=t.__data__;return r(e)?n[\\\"string\\\"==typeof e?\\\"string\\\":\\\"hash\\\"]:n.map}},function(t,e,n){var r=n(31),o=n(14),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(65);t.exports=function(t,e,n){\\\"__proto__\\\"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){var n=/^(?:0|[1-9]\\\\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&(\\\"number\\\"==r||\\\"symbol\\\"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===(\\\"function\\\"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(67)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(54),o=n(172)(r);t.exports=o},function(t,e,n){var r=n(1),o=n(58),i=n(186),a=n(90);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(a(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){var r=n(13),o=n(99),i=n(100);t.exports=function(t,e){return i(o(t,e,r),t+\\\"\\\")}},function(t,e,n){var r=n(14),o=n(8),i=n(32),a=n(4);t.exports=function(t,e,n){if(!a(n))return!1;var u=typeof e;return!!(\\\"number\\\"==u?o(n)&&i(e,n.length):\\\"string\\\"==u&&e in n)&&r(n[e],t)}},function(t,e,n){\\\"use strict\\\";var r=n(0);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),(function n(o){var i=t.node(o);if(r.has(e,o))return i.rank;e[o]=!0;var a=r.min(r.map(t.outEdges(o),(function(e){return n(e.w)-t.edge(e).minlen})));return a!==Number.POSITIVE_INFINITY&&void 0!==a&&null!==a||(a=0),i.rank=a}))},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},function(t,e,n){\\\"use strict\\\";var r=n(3);t.exports=o;function o(t){this._isDirected=!r.has(t,\\\"directed\\\")||t.directed,this._isMultigraph=!!r.has(t,\\\"multigraph\\\")&&t.multigraph,this._isCompound=!!r.has(t,\\\"compound\\\")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[\\\"\\\\0\\\"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(t,e){t[e]?t[e]++:t[e]=1}function a(t,e){--t[e]||delete t[e]}function u(t,e,n,o){var i=\\\"\\\"+e,a=\\\"\\\"+n;if(!t&&i>a){var u=i;i=a,a=u}return i+\\\"\\\\x01\\\"+a+\\\"\\\\x01\\\"+(r.isUndefined(o)?\\\"\\\\0\\\":o)}function s(t,e,n,r){var o=\\\"\\\"+e,i=\\\"\\\"+n;if(!t&&o>i){var a=o;o=i,i=a}var u={v:o,w:i};return r&&(u.name=r),u}function c(t,e){return u(t,e.v,e.w,e.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(t){return this._label=t,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return r.keys(this._nodes)},o.prototype.sources=function(){var t=this;return r.filter(this.nodes(),(function(e){return r.isEmpty(t._in[e])}))},o.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),(function(e){return r.isEmpty(t._out[e])}))},o.prototype.setNodes=function(t,e){var n=arguments,o=this;return r.each(t,(function(t){n.length>1?o.setNode(t,e):o.setNode(t)})),this},o.prototype.setNode=function(t,e){return r.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=\\\"\\\\0\\\",this._children[t]={},this._children[\\\"\\\\0\\\"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},o.prototype.node=function(t){return this._nodes[t]},o.prototype.hasNode=function(t){return r.has(this._nodes,t)},o.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},o.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error(\\\"Cannot set parent in a non-compound graph\\\");if(r.isUndefined(e))e=\\\"\\\\0\\\";else{for(var n=e+=\\\"\\\";!r.isUndefined(n);n=this.parent(n))if(n===t)throw new Error(\\\"Setting \\\"+e+\\\" as parent of \\\"+t+\\\" would create a cycle\\\");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},o.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},o.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(\\\"\\\\0\\\"!==e)return e}},o.prototype.children=function(t){if(r.isUndefined(t)&&(t=\\\"\\\\0\\\"),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else{if(\\\"\\\\0\\\"===t)return this.nodes();if(this.hasNode(t))return[]}},o.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},o.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},o.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},o.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},o.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),r.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var o={};return this._isCompound&&r.each(e.nodes(),(function(t){e.setParent(t,function t(r){var i=n.parent(r);return void 0===i||e.hasNode(i)?(o[r]=i,i):i in o?o[i]:t(i)}(t))})),e},o.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return r.values(this._edgeObjs)},o.prototype.setPath=function(t,e){var n=this,o=arguments;return r.reduce(t,(function(t,r){return o.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r})),this},o.prototype.setEdge=function(){var t,e,n,o,a=!1,c=arguments[0];\\\"object\\\"===typeof c&&null!==c&&\\\"v\\\"in c?(t=c.v,e=c.w,n=c.name,2===arguments.length&&(o=arguments[1],a=!0)):(t=c,e=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],a=!0)),t=\\\"\\\"+t,e=\\\"\\\"+e,r.isUndefined(n)||(n=\\\"\\\"+n);var f=u(this._isDirected,t,e,n);if(r.has(this._edgeLabels,f))return a&&(this._edgeLabels[f]=o),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error(\\\"Cannot set a named edge when isMultigraph = false\\\");this.setNode(t),this.setNode(e),this._edgeLabels[f]=a?o:this._defaultEdgeLabelFn(t,e,n);var d=s(this._isDirected,t,e,n);return t=d.v,e=d.w,Object.freeze(d),this._edgeObjs[f]=d,i(this._preds[e],t),i(this._sucs[t],e),this._in[e][f]=d,this._out[t][f]=d,this._edgeCount++,this},o.prototype.edge=function(t,e,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(t,e,n){var o=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return r.has(this._edgeLabels,o)},o.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n),o=this._edgeObjs[r];return o&&(t=o.v,e=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],a(this._preds[e],t),a(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},o.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var o=r.values(n);return e?r.filter(o,(function(t){return t.v===e})):o}},o.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var o=r.values(n);return e?r.filter(o,(function(t){return t.w===e})):o}},o.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},function(t,e,n){var r=n(11)(n(6),\\\"Map\\\");t.exports=r},function(t,e,n){var r=n(135),o=n(142),i=n(144),a=n(145),u=n(146);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,\\\"loaded\\\",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,\\\"id\\\",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(t){return\\\"number\\\"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){(function(t){var r=n(63),o=e&&!e.nodeType&&e,i=o&&\\\"object\\\"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o&&r.process,u=function(){try{var t=i&&i.require&&i.require(\\\"util\\\").types;return t||a&&a.binding&&a.binding(\\\"util\\\")}catch(e){}}();t.exports=u}).call(this,n(46)(t))},function(t,e,n){var r=n(34),o=n(152),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&\\\"constructor\\\"!=n&&e.push(n);return e}},function(t,e,n){var r=n(70),o=n(71),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return i.call(t,e)})))}:o;t.exports=u},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(76);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var r=n(55),o=n(10);t.exports=function(t,e){return t&&r(t,e,o)}},function(t,e,n){var r=n(171)();t.exports=r},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var r=n(37),o=n(24);t.exports=function(t,e){for(var n=0,i=(e=r(e,t)).length;null!=t&&n<i;)t=t[o(e[n++])];return n&&n==i?t:void 0}},function(t,e,n){var r=n(1),o=n(19),i=/\\\\.|\\\\[(?:[^[\\\\]]*|([\\\"'])(?:(?!\\\\1)[^\\\\\\\\]|\\\\\\\\.)*?\\\\1)\\\\]/,a=/^\\\\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!(\\\"number\\\"!=n&&\\\"symbol\\\"!=n&&\\\"boolean\\\"!=n&&null!=t&&!o(t))||(a.test(t)||!i.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(51),o=n(205);t.exports=function t(e,n,i,a,u){var s=-1,c=e.length;for(i||(i=o),u||(u=[]);++s<c;){var f=e[s];n>0&&i(f)?n>1?t(f,n-1,i,a,u):r(u,f):a||(u[u.length]=f)}return u}},function(t,e,n){var r=n(19);t.exports=function(t,e,n){for(var o=-1,i=t.length;++o<i;){var a=t[o],u=e(a);if(null!=u&&(void 0===s?u===u&&!r(u):n(u,s)))var s=u,c=a}return c}},function(t,e,n){t.exports={graphlib:n(5),layout:n(229),debug:n(288),util:{time:n(2).time,notime:n(2).notime},version:n(289)}},function(t,e,n){var r=n(25),o=n(45),i=n(30),a=n(147),u=n(153),s=n(68),c=n(69),f=n(156),d=n(157),h=n(73),p=n(158),l=n(18),v=n(162),y=n(163),g=n(78),b=n(1),m=n(16),x=n(167),_=n(4),w=n(169),E=n(10),j={};j[\\\"[object Arguments]\\\"]=j[\\\"[object Array]\\\"]=j[\\\"[object ArrayBuffer]\\\"]=j[\\\"[object DataView]\\\"]=j[\\\"[object Boolean]\\\"]=j[\\\"[object Date]\\\"]=j[\\\"[object Float32Array]\\\"]=j[\\\"[object Float64Array]\\\"]=j[\\\"[object Int8Array]\\\"]=j[\\\"[object Int16Array]\\\"]=j[\\\"[object Int32Array]\\\"]=j[\\\"[object Map]\\\"]=j[\\\"[object Number]\\\"]=j[\\\"[object Object]\\\"]=j[\\\"[object RegExp]\\\"]=j[\\\"[object Set]\\\"]=j[\\\"[object String]\\\"]=j[\\\"[object Symbol]\\\"]=j[\\\"[object Uint8Array]\\\"]=j[\\\"[object Uint8ClampedArray]\\\"]=j[\\\"[object Uint16Array]\\\"]=j[\\\"[object Uint32Array]\\\"]=!0,j[\\\"[object Error]\\\"]=j[\\\"[object Function]\\\"]=j[\\\"[object WeakMap]\\\"]=!1,t.exports=function t(e,n,k,N,M,S){var O,A=1&n,I=2&n,C=4&n;if(k&&(O=M?k(e,N,M,S):k(e)),void 0!==O)return O;if(!_(e))return e;var P=b(e);if(P){if(O=v(e),!A)return c(e,O)}else{var z=l(e),L=\\\"[object Function]\\\"==z||\\\"[object GeneratorFunction]\\\"==z;if(m(e))return s(e,A);if(\\\"[object Object]\\\"==z||\\\"[object Arguments]\\\"==z||L&&!M){if(O=I||L?{}:g(e),!A)return I?d(e,u(O,e)):f(e,a(O,e))}else{if(!j[z])return M?e:{};O=y(e,z,A)}}S||(S=new r);var F=S.get(e);if(F)return F;S.set(e,O),w(e)?e.forEach((function(r){O.add(t(r,n,k,r,e,S))})):x(e)&&e.forEach((function(r,o){O.set(o,t(r,n,k,o,e,S))}));var R=C?I?p:h:I?keysIn:E,D=P?void 0:R(e);return o(D||e,(function(r,o){D&&(r=e[o=r]),i(O,o,t(r,n,k,o,e,S))})),O}},function(t,e,n){(function(e){var n=\\\"object\\\"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(129))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+\\\"\\\"}catch(e){}}return\\\"\\\"}},function(t,e,n){var r=n(11),o=function(){try{var t=r(Object,\\\"defineProperty\\\");return t({},\\\"\\\",{}),t}catch(e){}}();t.exports=o},function(t,e,n){var r=n(148),o=n(22),i=n(1),a=n(16),u=n(32),s=n(23),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),f=!n&&o(t),d=!n&&!f&&a(t),h=!n&&!f&&!d&&s(t),p=n||f||d||h,l=p?r(t.length,String):[],v=l.length;for(var y in t)!e&&!c.call(t,y)||p&&(\\\"length\\\"==y||d&&(\\\"offset\\\"==y||\\\"parent\\\"==y)||h&&(\\\"buffer\\\"==y||\\\"byteLength\\\"==y||\\\"byteOffset\\\"==y)||u(y,v))||l.push(y);return l}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){(function(t){var r=n(6),o=e&&!e.nodeType&&e,i=o&&\\\"object\\\"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o?r.Buffer:void 0,u=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=u?u(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(46)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(51),o=n(35),i=n(50),a=n(71),u=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:a;t.exports=u},function(t,e,n){var r=n(74),o=n(50),i=n(10);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(51),o=n(1);t.exports=function(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}},function(t,e,n){var r=n(11)(n(6),\\\"Set\\\");t.exports=r},function(t,e,n){var r=n(6).Uint8Array;t.exports=r},function(t,e,n){var r=n(52);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(79),o=n(35),i=n(34);t.exports=function(t){return\\\"function\\\"!=typeof t.constructor||i(t)?{}:r(o(t))}},function(t,e,n){var r=n(4),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){t.exports=n(81)},function(t,e,n){var r=n(45),o=n(36),i=n(82),a=n(1);t.exports=function(t,e){return(a(t)?r:o)(t,i(e))}},function(t,e,n){var r=n(13);t.exports=function(t){return\\\"function\\\"==typeof t?t:r}},function(t,e,n){var r=n(70),o=n(173),i=n(9),a=n(1);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},function(t,e,n){var r=n(176),o=n(7);t.exports=function t(e,n,i,a,u){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!==e&&n!==n:r(e,n,i,a,t,u))}},function(t,e,n){var r=n(86),o=n(179),i=n(87);t.exports=function(t,e,n,a,u,s){var c=1&n,f=t.length,d=e.length;if(f!=d&&!(c&&d>f))return!1;var h=s.get(t);if(h&&s.get(e))return h==e;var p=-1,l=!0,v=2&n?new r:void 0;for(s.set(t,e),s.set(e,t);++p<f;){var y=t[p],g=e[p];if(a)var b=c?a(g,y,p,e,t,s):a(y,g,p,t,e,s);if(void 0!==b){if(b)continue;l=!1;break}if(v){if(!o(e,(function(t,e){if(!i(v,e)&&(y===t||u(y,t,n,a,s)))return v.push(e)}))){l=!1;break}}else if(y!==g&&!u(y,g,n,a,s)){l=!1;break}}return s.delete(t),s.delete(e),l}},function(t,e,n){var r=n(44),o=n(177),i=n(178);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(4);t.exports=function(t){return t===t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(189);t.exports=function(t){return null==t?\\\"\\\":r(t)}},function(t,e,n){var r=n(190),o=n(92);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e,n){var r=n(37),o=n(22),i=n(1),a=n(32),u=n(47),s=n(24);t.exports=function(t,e,n){for(var c=-1,f=(e=r(e,t)).length,d=!1;++c<f;){var h=s(e[c]);if(!(d=null!=t&&n(t,h)))break;t=t[h]}return d||++c!=f?d:!!(f=null==t?0:t.length)&&u(f)&&a(h,f)&&(i(t)||o(t))}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(193),o=n(92);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){var r=n(38),o=n(9),i=n(97),a=n(1);t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},function(t,e,n){var r=n(36),o=n(8);t.exports=function(t,e){var n=-1,i=o(t)?Array(t.length):[];return r(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}},function(t,e,n){var r=n(195),o=n(36),i=n(9),a=n(196),u=n(1);t.exports=function(t,e,n){var s=u(t)?r:a,c=arguments.length<3;return s(t,i(e,4),n,c,o)}},function(t,e,n){var r=n(206),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,u=o(i.length-e,0),s=Array(u);++a<u;)s[a]=i[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=i[a];return c[e]=n(s),r(t,this,c)}}},function(t,e,n){var r=n(207),o=n(208)(r);t.exports=o},function(t,e){t.exports=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},function(t,e,n){var r=n(8),o=n(7);t.exports=function(t){return o(t)&&r(t)}},function(t,e,n){var r=n(217),o=n(10);t.exports=function(t){return null==t?[]:r(t,o(t))}},function(t,e,n){var r=n(3),o=n(105);t.exports=function(t,e,n,r){return function(t,e,n,r){var i,a,u={},s=new o,c=function(t){var e=t.v!==i?t.v:t.w,r=u[e],o=n(t),c=a.distance+o;if(o<0)throw new Error(\\\"dijkstra does not allow negative edge weights. Bad edge: \\\"+t+\\\" Weight: \\\"+o);c<r.distance&&(r.distance=c,r.predecessor=i,s.decrease(e,c))};t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;u[t]={distance:n},s.add(t,n)}));for(;s.size()>0&&(i=s.removeMin(),(a=u[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(c);return u}(t,String(e),n||i,r||function(e){return t.outEdges(e)})};var i=r.constant(1)},function(t,e,n){var r=n(3);function o(){this._arr=[],this._keyIndices={}}t.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},o.prototype.has=function(t){return r.has(this._keyIndices,t)},o.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},o.prototype.min=function(){if(0===this.size())throw new Error(\\\"Queue underflow\\\");return this._arr[0].key},o.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var o=this._arr,i=o.length;return n[t]=i,o.push({key:t,priority:e}),this._decrease(i),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},o.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error(\\\"New priority is greater than current priority. Key: \\\"+t+\\\" Old: \\\"+this._arr[n].priority+\\\" New: \\\"+e);this._arr[n].priority=e,this._decrease(n)},o.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,o=t;n<e.length&&(o=e[n].priority<e[o].priority?n:o,r<e.length&&(o=e[r].priority<e[o].priority?r:o),o!==t&&(this._swap(t,o),this._heapify(o)))},o.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},o.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,o=n[t],i=n[e];n[t]=i,n[e]=o,r[i.key]=t,r[o.key]=e}},function(t,e,n){var r=n(3);t.exports=function(t){var e=0,n=[],o={},i=[];return t.nodes().forEach((function(a){r.has(o,a)||function a(u){var s=o[u]={onStack:!0,lowlink:e,index:e++};if(n.push(u),t.successors(u).forEach((function(t){r.has(o,t)?o[t].onStack&&(s.lowlink=Math.min(s.lowlink,o[t].index)):(a(t),s.lowlink=Math.min(s.lowlink,o[t].lowlink))})),s.lowlink===s.index){var c,f=[];do{c=n.pop(),o[c].onStack=!1,f.push(c)}while(u!==c);i.push(f)}}(a)})),i}},function(t,e,n){var r=n(3);function o(t){var e={},n={},o=[];if(r.each(t.sinks(),(function a(u){if(r.has(n,u))throw new i;r.has(e,u)||(n[u]=!0,e[u]=!0,r.each(t.predecessors(u),a),delete n[u],o.push(u))})),r.size(e)!==t.nodeCount())throw new i;return o}function i(){}t.exports=o,o.CycleException=i,i.prototype=new Error},function(t,e,n){var r=n(3);t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return r.each(e,(function(e){if(!t.hasNode(e))throw new Error(\\\"Graph does not have node: \\\"+e);!function t(e,n,o,i,a,u){r.has(i,n)||(i[n]=!0,o||u.push(n),r.each(a(n),(function(n){t(e,n,o,i,a,u)})),o&&u.push(n))}(t,e,\\\"post\\\"===n,a,o,i)})),i}},function(t,e,n){var r=n(236);t.exports=function(t){return t?(t=r(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t===t?t:0:0===t?t:0}},function(t,e,n){var r=n(59);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},function(t,e,n){var r=n(31),o=n(14);t.exports=function(t,e,n){(void 0!==n&&!o(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},function(t,e){t.exports=function(t,e){if((\\\"constructor\\\"!==e||\\\"function\\\"!==typeof t[e])&&\\\"__proto__\\\"!=e)return t[e]}},function(t,e){t.exports=function(t,e){return t<e}},function(t,e,n){\\\"use strict\\\";var r=n(0),o=n(5).Graph,i=n(41).slack;function a(t,e){return r.forEach(t.nodes(),(function n(o){r.forEach(e.nodeEdges(o),(function(r){var a=r.v,u=o===a?r.w:a;t.hasNode(u)||i(e,r)||(t.setNode(u,{}),t.setEdge(o,u,{}),n(u))}))})),t.nodeCount()}function u(t,e){return r.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return i(e,n)}))}function s(t,e,n){r.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}t.exports=function(t){var e,n,r=new o({directed:!1}),c=t.nodes()[0],f=t.nodeCount();r.setNode(c,{});for(;a(r,t)<f;)e=u(r,t),n=r.hasNode(e.v)?i(t,e):-i(t,e),s(r,t,n);return r}},function(t,e,n){var r=n(116);t.exports={Graph:r.Graph,json:n(219),alg:n(220),version:r.version}},function(t,e,n){t.exports={Graph:n(42),version:n(218)}},function(t,e,n){var r=n(62);t.exports=function(t){return r(t,4)}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(27),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():o.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(27);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(27);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(27);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(26);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(26),o=n(43),i=n(44);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(20),o=n(132),i=n(4),a=n(64),u=/^\\\\[object .+?Constructor\\\\]$/,s=Function.prototype,c=Object.prototype,f=s.toString,d=c.hasOwnProperty,h=RegExp(\\\"^\\\"+f.call(d).replace(/[\\\\\\\\^$.*+?()[\\\\]{}|]/g,\\\"\\\\\\\\$&\\\").replace(/hasOwnProperty|(function).*?(?=\\\\\\\\\\\\()| for .+?(?=\\\\\\\\\\\\])/g,\\\"$1.*?\\\")+\\\"$\\\");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?h:u).test(a(t))}},function(t,e){var n;n=function(){return this}();try{n=n||new Function(\\\"return this\\\")()}catch(r){\\\"object\\\"===typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(15),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(s){}var o=a.call(t);return r&&(e?t[u]=n:delete t[u]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(133),o=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||\\\"\\\");return t?\\\"Symbol(src)_1.\\\"+t:\\\"\\\"}();t.exports=function(t){return!!o&&o in t}},function(t,e,n){var r=n(6)[\\\"__core-js_shared__\\\"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(136),o=n(26),i=n(43);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){var r=n(137),o=n(138),i=n(139),a=n(140),u=n(141);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(28);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(28),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return\\\"__lodash_hash_undefined__\\\"===n?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(28),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(28);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?\\\"__lodash_hash_undefined__\\\":e,this}},function(t,e,n){var r=n(29);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return\\\"string\\\"==e||\\\"number\\\"==e||\\\"symbol\\\"==e||\\\"boolean\\\"==e?\\\"__proto__\\\"!==t:null===t}},function(t,e,n){var r=n(29);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(29);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(29);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){var r=n(21),o=n(10);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(12),o=n(7);t.exports=function(t){return o(t)&&\\\"[object Arguments]\\\"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(12),o=n(47),i=n(7),a={};a[\\\"[object Float32Array]\\\"]=a[\\\"[object Float64Array]\\\"]=a[\\\"[object Int8Array]\\\"]=a[\\\"[object Int16Array]\\\"]=a[\\\"[object Int32Array]\\\"]=a[\\\"[object Uint8Array]\\\"]=a[\\\"[object Uint8ClampedArray]\\\"]=a[\\\"[object Uint16Array]\\\"]=a[\\\"[object Uint32Array]\\\"]=!0,a[\\\"[object Arguments]\\\"]=a[\\\"[object Array]\\\"]=a[\\\"[object ArrayBuffer]\\\"]=a[\\\"[object Boolean]\\\"]=a[\\\"[object DataView]\\\"]=a[\\\"[object Date]\\\"]=a[\\\"[object Error]\\\"]=a[\\\"[object Function]\\\"]=a[\\\"[object Map]\\\"]=a[\\\"[object Number]\\\"]=a[\\\"[object Object]\\\"]=a[\\\"[object RegExp]\\\"]=a[\\\"[object Set]\\\"]=a[\\\"[object String]\\\"]=a[\\\"[object WeakMap]\\\"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(67)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(21),o=n(17);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e,n){var r=n(4),o=n(34),i=n(155),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=o(t),n=[];for(var u in t)(\\\"constructor\\\"!=u||!e&&a.call(t,u))&&n.push(u);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(21),o=n(50);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(21),o=n(72);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(74),o=n(72),i=n(17);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(11)(n(6),\\\"DataView\\\");t.exports=r},function(t,e,n){var r=n(11)(n(6),\\\"Promise\\\");t.exports=r},function(t,e,n){var r=n(11)(n(6),\\\"WeakMap\\\");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&\\\"string\\\"==typeof t[0]&&n.call(t,\\\"index\\\")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(52),o=n(164),i=n(165),a=n(166),u=n(77);t.exports=function(t,e,n){var s=t.constructor;switch(e){case\\\"[object ArrayBuffer]\\\":return r(t);case\\\"[object Boolean]\\\":case\\\"[object Date]\\\":return new s(+t);case\\\"[object DataView]\\\":return o(t,n);case\\\"[object Float32Array]\\\":case\\\"[object Float64Array]\\\":case\\\"[object Int8Array]\\\":case\\\"[object Int16Array]\\\":case\\\"[object Int32Array]\\\":case\\\"[object Uint8Array]\\\":case\\\"[object Uint8ClampedArray]\\\":case\\\"[object Uint16Array]\\\":case\\\"[object Uint32Array]\\\":return u(t,n);case\\\"[object Map]\\\":return new s;case\\\"[object Number]\\\":case\\\"[object String]\\\":return new s(t);case\\\"[object RegExp]\\\":return i(t);case\\\"[object Set]\\\":return new s;case\\\"[object Symbol]\\\":return a(t)}}},function(t,e,n){var r=n(52);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\\\\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(15),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},function(t,e,n){var r=n(168),o=n(33),i=n(48),a=i&&i.isMap,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(18),o=n(7);t.exports=function(t){return o(t)&&\\\"[object Map]\\\"==r(t)}},function(t,e,n){var r=n(170),o=n(33),i=n(48),a=i&&i.isSet,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(18),o=n(7);t.exports=function(t){return o(t)&&\\\"[object Set]\\\"==r(t)}},function(t,e){t.exports=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),u=a.length;u--;){var s=a[t?u:++o];if(!1===n(i[s],s,i))break}return e}}},function(t,e,n){var r=n(8);t.exports=function(t,e){return function(n,o){if(null==n)return n;if(!r(n))return t(n,o);for(var i=n.length,a=e?i:-1,u=Object(n);(e?a--:++a<i)&&!1!==o(u[a],a,u););return n}}},function(t,e,n){var r=n(36);t.exports=function(t,e){var n=[];return r(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}},function(t,e,n){var r=n(175),o=n(183),i=n(89);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(25),o=n(84);t.exports=function(t,e,n,i){var a=n.length,u=a,s=!i;if(null==t)return!u;for(t=Object(t);a--;){var c=n[a];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<u;){var f=(c=n[a])[0],d=t[f],h=c[1];if(s&&c[2]){if(void 0===d&&!(f in t))return!1}else{var p=new r;if(i)var l=i(d,h,f,t,e,p);if(!(void 0===l?o(h,d,3,i,p):l))return!1}}return!0}},function(t,e,n){var r=n(25),o=n(85),i=n(180),a=n(182),u=n(18),s=n(1),c=n(16),f=n(23),d=\\\"[object Object]\\\",h=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,p,l,v){var y=s(t),g=s(e),b=y?\\\"[object Array]\\\":u(t),m=g?\\\"[object Array]\\\":u(e),x=(b=\\\"[object Arguments]\\\"==b?d:b)==d,_=(m=\\\"[object Arguments]\\\"==m?d:m)==d,w=b==m;if(w&&c(t)){if(!c(e))return!1;y=!0,x=!1}if(w&&!x)return v||(v=new r),y||f(t)?o(t,e,n,p,l,v):i(t,e,b,n,p,l,v);if(!(1&n)){var E=x&&h.call(t,\\\"__wrapped__\\\"),j=_&&h.call(e,\\\"__wrapped__\\\");if(E||j){var k=E?t.value():t,N=j?e.value():e;return v||(v=new r),l(k,N,n,p,v)}}return!!w&&(v||(v=new r),a(t,e,n,p,l,v))}},function(t,e){t.exports=function(t){return this.__data__.set(t,\\\"__lodash_hash_undefined__\\\"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var r=n(15),o=n(76),i=n(14),a=n(85),u=n(181),s=n(56),c=r?r.prototype:void 0,f=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,d,h){switch(n){case\\\"[object DataView]\\\":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case\\\"[object ArrayBuffer]\\\":return!(t.byteLength!=e.byteLength||!d(new o(t),new o(e)));case\\\"[object Boolean]\\\":case\\\"[object Date]\\\":case\\\"[object Number]\\\":return i(+t,+e);case\\\"[object Error]\\\":return t.name==e.name&&t.message==e.message;case\\\"[object RegExp]\\\":case\\\"[object String]\\\":return t==e+\\\"\\\";case\\\"[object Map]\\\":var p=u;case\\\"[object Set]\\\":var l=1&r;if(p||(p=s),t.size!=e.size&&!l)return!1;var v=h.get(t);if(v)return v==e;r|=2,h.set(t,e);var y=a(p(t),p(e),r,c,d,h);return h.delete(t),y;case\\\"[object Symbol]\\\":if(f)return f.call(t)==f.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e,n){var r=n(73),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,i,a,u){var s=1&n,c=r(t),f=c.length;if(f!=r(e).length&&!s)return!1;for(var d=f;d--;){var h=c[d];if(!(s?h in e:o.call(e,h)))return!1}var p=u.get(t);if(p&&u.get(e))return p==e;var l=!0;u.set(t,e),u.set(e,t);for(var v=s;++d<f;){var y=t[h=c[d]],g=e[h];if(i)var b=s?i(g,y,h,e,t,u):i(y,g,h,t,e,u);if(!(void 0===b?y===g||a(y,g,n,i,u):b)){l=!1;break}v||(v=\\\"constructor\\\"==h)}if(l&&!v){var m=t.constructor,x=e.constructor;m==x||!(\\\"constructor\\\"in t)||!(\\\"constructor\\\"in e)||\\\"function\\\"==typeof m&&m instanceof m&&\\\"function\\\"==typeof x&&x instanceof x||(l=!1)}return u.delete(t),u.delete(e),l}},function(t,e,n){var r=n(88),o=n(10);t.exports=function(t){for(var e=o(t),n=e.length;n--;){var i=e[n],a=t[i];e[n]=[i,a,r(a)]}return e}},function(t,e,n){var r=n(84),o=n(185),i=n(91),a=n(58),u=n(88),s=n(89),c=n(24);t.exports=function(t,e){return a(t)&&u(e)?s(c(t),e):function(n){var a=o(n,t);return void 0===a&&a===e?i(n,t):r(e,a,3)}}},function(t,e,n){var r=n(57);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},function(t,e,n){var r=n(187),o=/[^.[\\\\]]+|\\\\[(?:(-?\\\\d+(?:\\\\.\\\\d+)?)|([\\\"'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2)\\\\]|(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))/g,i=/\\\\\\\\(\\\\\\\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(\\\"\\\"),t.replace(o,(function(t,n,r,o){e.push(r?o.replace(i,\\\"$1\\\"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(188);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(44);function o(t,e){if(\\\"function\\\"!=typeof t||null!=e&&\\\"function\\\"!=typeof e)throw new TypeError(\\\"Expected a function\\\");var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},function(t,e,n){var r=n(15),o=n(38),i=n(1),a=n(19),u=r?r.prototype:void 0,s=u?u.toString:void 0;t.exports=function t(e){if(\\\"string\\\"==typeof e)return e;if(i(e))return o(e,t)+\\\"\\\";if(a(e))return s?s.call(e):\\\"\\\";var n=e+\\\"\\\";return\\\"0\\\"==n&&1/e==-1/0?\\\"-0\\\":n}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(93),o=n(192),i=n(58),a=n(24);t.exports=function(t){return i(t)?r(a(t)):o(t)}},function(t,e,n){var r=n(57);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&n.call(t,e)}},function(t,e,n){var r=n(49),o=n(18),i=n(22),a=n(1),u=n(8),s=n(16),c=n(34),f=n(23),d=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(u(t)&&(a(t)||\\\"string\\\"==typeof t||\\\"function\\\"==typeof t.splice||s(t)||f(t)||i(t)))return!t.length;var e=o(t);if(\\\"[object Map]\\\"==e||\\\"[object Set]\\\"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(d.call(t,n))return!1;return!0}},function(t,e){t.exports=function(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}},function(t,e){t.exports=function(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n}},function(t,e,n){var r=n(49),o=n(18),i=n(8),a=n(198),u=n(199);t.exports=function(t){if(null==t)return 0;if(i(t))return a(t)?u(t):t.length;var e=o(t);return\\\"[object Map]\\\"==e||\\\"[object Set]\\\"==e?t.size:r(t).length}},function(t,e,n){var r=n(12),o=n(1),i=n(7);t.exports=function(t){return\\\"string\\\"==typeof t||!o(t)&&i(t)&&\\\"[object String]\\\"==r(t)}},function(t,e,n){var r=n(200),o=n(201),i=n(202);t.exports=function(t){return o(t)?i(t):r(t)}},function(t,e,n){var r=n(93)(\\\"length\\\");t.exports=r},function(t,e){var n=RegExp(\\\"[\\\\\\\\u200d\\\\\\\\ud800-\\\\\\\\udfff\\\\\\\\u0300-\\\\\\\\u036f\\\\\\\\ufe20-\\\\\\\\ufe2f\\\\\\\\u20d0-\\\\\\\\u20ff\\\\\\\\ufe0e\\\\\\\\ufe0f]\\\");t.exports=function(t){return n.test(t)}},function(t,e){var n=\\\"[\\\\\\\\ud800-\\\\\\\\udfff]\\\",r=\\\"[\\\\\\\\u0300-\\\\\\\\u036f\\\\\\\\ufe20-\\\\\\\\ufe2f\\\\\\\\u20d0-\\\\\\\\u20ff]\\\",o=\\\"\\\\\\\\ud83c[\\\\\\\\udffb-\\\\\\\\udfff]\\\",i=\\\"[^\\\\\\\\ud800-\\\\\\\\udfff]\\\",a=\\\"(?:\\\\\\\\ud83c[\\\\\\\\udde6-\\\\\\\\uddff]){2}\\\",u=\\\"[\\\\\\\\ud800-\\\\\\\\udbff][\\\\\\\\udc00-\\\\\\\\udfff]\\\",s=\\\"(?:\\\"+r+\\\"|\\\"+o+\\\")\\\"+\\\"?\\\",c=\\\"[\\\\\\\\ufe0e\\\\\\\\ufe0f]?\\\"+s+(\\\"(?:\\\\\\\\u200d(?:\\\"+[i,a,u].join(\\\"|\\\")+\\\")[\\\\\\\\ufe0e\\\\\\\\ufe0f]?\\\"+s+\\\")*\\\"),f=\\\"(?:\\\"+[i+r+\\\"?\\\",r,a,u,n].join(\\\"|\\\")+\\\")\\\",d=RegExp(o+\\\"(?=\\\"+o+\\\")|\\\"+f+c,\\\"g\\\");t.exports=function(t){for(var e=d.lastIndex=0;d.test(t);)++e;return e}},function(t,e,n){var r=n(45),o=n(79),i=n(54),a=n(9),u=n(35),s=n(1),c=n(16),f=n(20),d=n(4),h=n(23);t.exports=function(t,e,n){var p=s(t),l=p||c(t)||h(t);if(e=a(e,4),null==n){var v=t&&t.constructor;n=l?p?new v:[]:d(t)&&f(v)?o(u(t)):{}}return(l?r:i)(t,(function(t,r,o){return e(n,t,r,o)})),n}},function(t,e,n){var r=n(59),o=n(39),i=n(209),a=n(102),u=o((function(t){return i(r(t,1,a,!0))}));t.exports=u},function(t,e,n){var r=n(15),o=n(22),i=n(1),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(a&&t&&t[a])}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(53),o=n(65),i=n(13),a=o?function(t,e){return o(t,\\\"toString\\\",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=a},function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var o=n(),i=16-(o-r);if(r=o,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(86),o=n(210),i=n(214),a=n(87),u=n(215),s=n(56);t.exports=function(t,e,n){var c=-1,f=o,d=t.length,h=!0,p=[],l=p;if(n)h=!1,f=i;else if(d>=200){var v=e?null:u(t);if(v)return s(v);h=!1,f=a,l=new r}else l=e?[]:p;t:for(;++c<d;){var y=t[c],g=e?e(y):y;if(y=n||0!==y?y:0,h&&g===g){for(var b=l.length;b--;)if(l[b]===g)continue t;e&&l.push(g),p.push(y)}else f(l,g,n)||(l!==p&&l.push(g),p.push(y))}return p}},function(t,e,n){var r=n(211);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},function(t,e,n){var r=n(101),o=n(212),i=n(213);t.exports=function(t,e,n){return e===e?i(t,e,n):r(t,o,n)}},function(t,e){t.exports=function(t){return t!==t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){var r=n(75),o=n(216),i=n(56),a=r&&1/i(new r([,-0]))[1]==1/0?function(t){return new r(t)}:o;t.exports=a},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(38);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},function(t,e){t.exports=\\\"2.1.8\\\"},function(t,e,n){var r=n(3),o=n(42);function i(t){return r.map(t.nodes(),(function(e){var n=t.node(e),o=t.parent(e),i={v:e};return r.isUndefined(n)||(i.value=n),r.isUndefined(o)||(i.parent=o),i}))}function a(t){return r.map(t.edges(),(function(e){var n=t.edge(e),o={v:e.v,w:e.w};return r.isUndefined(e.name)||(o.name=e.name),r.isUndefined(n)||(o.value=n),o}))}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:i(t),edges:a(t)};r.isUndefined(t.graph())||(e.value=r.clone(t.graph()));return e},read:function(t){var e=new o(t.options).setGraph(t.value);return r.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),r.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}},function(t,e,n){t.exports={components:n(221),dijkstra:n(104),dijkstraAll:n(222),findCycles:n(223),floydWarshall:n(224),isAcyclic:n(225),postorder:n(226),preorder:n(227),prim:n(228),tarjan:n(106),topsort:n(107)}},function(t,e,n){var r=n(3);t.exports=function(t){var e,n={},o=[];function i(o){r.has(n,o)||(n[o]=!0,e.push(o),r.each(t.successors(o),i),r.each(t.predecessors(o),i))}return r.each(t.nodes(),(function(t){e=[],i(t),e.length&&o.push(e)})),o}},function(t,e,n){var r=n(104),o=n(3);t.exports=function(t,e,n){return o.transform(t.nodes(),(function(o,i){o[i]=r(t,i,e,n)}),{})}},function(t,e,n){var r=n(3),o=n(106);t.exports=function(t){return r.filter(o(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}},function(t,e,n){var r=n(3);t.exports=function(t,e,n){return function(t,e,n){var r={},o=t.nodes();return o.forEach((function(t){r[t]={},r[t][t]={distance:0},o.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var o=n.v===t?n.w:n.v,i=e(n);r[t][o]={distance:i,predecessor:t}}))})),o.forEach((function(t){var e=r[t];o.forEach((function(n){var i=r[n];o.forEach((function(n){var r=i[t],o=e[n],a=i[n],u=r.distance+o.distance;u<a.distance&&(a.distance=u,a.predecessor=o.predecessor)}))}))})),r}(t,e||o,n||function(e){return t.outEdges(e)})};var o=r.constant(1)},function(t,e,n){var r=n(107);t.exports=function(t){try{r(t)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},function(t,e,n){var r=n(108);t.exports=function(t,e){return r(t,e,\\\"post\\\")}},function(t,e,n){var r=n(108);t.exports=function(t,e){return r(t,e,\\\"pre\\\")}},function(t,e,n){var r=n(3),o=n(42),i=n(105);t.exports=function(t,e){var n,a=new o,u={},s=new i;function c(t){var r=t.v===n?t.w:t.v,o=s.priority(r);if(void 0!==o){var i=e(t);i<o&&(u[r]=n,s.decrease(r,i))}}if(0===t.nodeCount())return a;r.each(t.nodes(),(function(t){s.add(t,Number.POSITIVE_INFINITY),a.setNode(t)})),s.decrease(t.nodes()[0],0);var f=!1;for(;s.size()>0;){if(n=s.removeMin(),r.has(u,n))a.setEdge(n,u[n]);else{if(f)throw new Error(\\\"Input graph is not connected: \\\"+t);f=!0}t.nodeEdges(n).forEach(c)}return a}},function(t,e,n){\\\"use strict\\\";var r=n(0),o=n(267),i=n(270),a=n(271),u=n(2).normalizeRanks,s=n(273),c=n(2).removeEmptyRanks,f=n(274),d=n(275),h=n(276),p=n(277),l=n(286),v=n(2),y=n(5).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?v.time:v.notime;n(\\\"layout\\\",(function(){var e=n(\\\"  buildLayoutGraph\\\",(function(){return function(t){var e=new y({multigraph:!0,compound:!0}),n=N(t.graph());return e.setGraph(r.merge({},b,k(n,g),r.pick(n,m))),r.forEach(t.nodes(),(function(n){var o=N(t.node(n));e.setNode(n,r.defaults(k(o,x),_)),e.setParent(n,t.parent(n))})),r.forEach(t.edges(),(function(n){var o=N(t.edge(n));e.setEdge(n,r.merge({},E,k(o,w),r.pick(o,j)))})),e}(t)}));n(\\\"  runLayout\\\",(function(){!function(t,e){e(\\\"    makeSpaceForEdgeLabels\\\",(function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,\\\"c\\\"!==r.labelpos.toLowerCase()&&(\\\"TB\\\"===e.rankdir||\\\"BT\\\"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e(\\\"    removeSelfEdges\\\",(function(){!function(t){r.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e(\\\"    acyclic\\\",(function(){o.run(t)})),e(\\\"    nestingGraph.run\\\",(function(){f.run(t)})),e(\\\"    rank\\\",(function(){a(v.asNonCompoundGraph(t))})),e(\\\"    injectEdgeLabelProxies\\\",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),o={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};v.addDummyNode(t,\\\"edge-proxy\\\",o,\\\"_ep\\\")}}))}(t)})),e(\\\"    removeEmptyRanks\\\",(function(){c(t)})),e(\\\"    nestingGraph.cleanup\\\",(function(){f.cleanup(t)})),e(\\\"    normalizeRanks\\\",(function(){u(t)})),e(\\\"    assignRankMinMax\\\",(function(){!function(t){var e=0;r.forEach(t.nodes(),(function(n){var o=t.node(n);o.borderTop&&(o.minRank=t.node(o.borderTop).rank,o.maxRank=t.node(o.borderBottom).rank,e=r.max(e,o.maxRank))})),t.graph().maxRank=e}(t)})),e(\\\"    removeEdgeLabelProxies\\\",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);\\\"edge-proxy\\\"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e(\\\"    normalize.run\\\",(function(){i.run(t)})),e(\\\"    parentDummyChains\\\",(function(){s(t)})),e(\\\"    addBorderSegments\\\",(function(){d(t)})),e(\\\"    order\\\",(function(){p(t)})),e(\\\"    insertSelfEdges\\\",(function(){!function(t){var e=v.buildLayerMatrix(t);r.forEach(e,(function(e){var n=0;r.forEach(e,(function(e,o){var i=t.node(e);i.order=o+n,r.forEach(i.selfEdges,(function(e){v.addDummyNode(t,\\\"selfedge\\\",{width:e.label.width,height:e.label.height,rank:i.rank,order:o+ ++n,e:e.e,label:e.label},\\\"_se\\\")})),delete i.selfEdges}))}))}(t)})),e(\\\"    adjustCoordinateSystem\\\",(function(){h.adjust(t)})),e(\\\"    position\\\",(function(){l(t)})),e(\\\"    positionSelfEdges\\\",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);if(\\\"selfedge\\\"===n.dummy){var r=t.node(n.e.v),o=r.x+r.width/2,i=r.y,a=n.x-o,u=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:o+2*a/3,y:i-u},{x:o+5*a/6,y:i-u},{x:o+a,y:i},{x:o+5*a/6,y:i+u},{x:o+2*a/3,y:i+u}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e(\\\"    removeBorderNodes\\\",(function(){!function(t){r.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),o=t.node(n.borderTop),i=t.node(n.borderBottom),a=t.node(r.last(n.borderLeft)),u=t.node(r.last(n.borderRight));n.width=Math.abs(u.x-a.x),n.height=Math.abs(i.y-o.y),n.x=a.x+n.width/2,n.y=o.y+n.height/2}})),r.forEach(t.nodes(),(function(e){\\\"border\\\"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e(\\\"    normalize.undo\\\",(function(){i.undo(t)})),e(\\\"    fixupEdgeLabelCoords\\\",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(r.has(n,\\\"x\\\"))switch(\\\"l\\\"!==n.labelpos&&\\\"r\\\"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case\\\"l\\\":n.x-=n.width/2+n.labeloffset;break;case\\\"r\\\":n.x+=n.width/2+n.labeloffset}}))}(t)})),e(\\\"    undoCoordinateSystem\\\",(function(){h.undo(t)})),e(\\\"    translateGraph\\\",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,i=0,a=t.graph(),u=a.marginx||0,s=a.marginy||0;function c(t){var r=t.x,a=t.y,u=t.width,s=t.height;e=Math.min(e,r-u/2),n=Math.max(n,r+u/2),o=Math.min(o,a-s/2),i=Math.max(i,a+s/2)}r.forEach(t.nodes(),(function(e){c(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.has(n,\\\"x\\\")&&c(n)})),e-=u,o-=s,r.forEach(t.nodes(),(function(n){var r=t.node(n);r.x-=e,r.y-=o})),r.forEach(t.edges(),(function(n){var i=t.edge(n);r.forEach(i.points,(function(t){t.x-=e,t.y-=o})),r.has(i,\\\"x\\\")&&(i.x-=e),r.has(i,\\\"y\\\")&&(i.y-=o)})),a.width=n-e+u,a.height=i-o+s}(t)})),e(\\\"    assignNodeIntersects\\\",(function(){!function(t){r.forEach(t.edges(),(function(e){var n,r,o=t.edge(e),i=t.node(e.v),a=t.node(e.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=a,r=i),o.points.unshift(v.intersectRect(i,n)),o.points.push(v.intersectRect(a,r))}))}(t)})),e(\\\"    reversePoints\\\",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e(\\\"    acyclic.undo\\\",(function(){o.undo(t)}))}(e,n)})),n(\\\"  updateInputGraph\\\",(function(){!function(t,e){r.forEach(t.nodes(),(function(n){var r=t.node(n),o=e.node(n);r&&(r.x=o.x,r.y=o.y,e.children(n).length&&(r.width=o.width,r.height=o.height))})),r.forEach(t.edges(),(function(n){var o=t.edge(n),i=e.edge(n);o.points=i.points,r.has(i,\\\"x\\\")&&(o.x=i.x,o.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var g=[\\\"nodesep\\\",\\\"edgesep\\\",\\\"ranksep\\\",\\\"marginx\\\",\\\"marginy\\\"],b={ranksep:50,edgesep:20,nodesep:50,rankdir:\\\"tb\\\"},m=[\\\"acyclicer\\\",\\\"ranker\\\",\\\"rankdir\\\",\\\"align\\\"],x=[\\\"width\\\",\\\"height\\\",\\\"rank\\\"],_={width:0,height:0},w=[\\\"minlen\\\",\\\"weight\\\",\\\"width\\\",\\\"height\\\",\\\"labeloffset\\\"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:\\\"r\\\"},j=[\\\"labelpos\\\"];function k(t,e){return r.mapValues(r.pick(t,e),Number)}function N(t){var e={};return r.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}},function(t,e,n){var r=n(62);t.exports=function(t){return r(t,5)}},function(t,e,n){var r=n(39),o=n(14),i=n(40),a=n(17),u=Object.prototype,s=u.hasOwnProperty,c=r((function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&i(e[0],e[1],c)&&(r=1);++n<r;)for(var f=e[n],d=a(f),h=-1,p=d.length;++h<p;){var l=d[h],v=t[l];(void 0===v||o(v,u[l])&&!s.call(t,l))&&(t[l]=f[l])}return t}));t.exports=c},function(t,e,n){var r=n(233)(n(234));t.exports=r},function(t,e,n){var r=n(9),o=n(8),i=n(10);t.exports=function(t){return function(e,n,a){var u=Object(e);if(!o(e)){var s=r(n,3);e=i(e),n=function(t){return s(u[t],t,u)}}var c=t(e,n,a);return c>-1?u[s?e[c]:c]:void 0}}},function(t,e,n){var r=n(101),o=n(9),i=n(235),a=Math.max;t.exports=function(t,e,n){var u=null==t?0:t.length;if(!u)return-1;var s=null==n?0:i(n);return s<0&&(s=a(u+s,0)),r(t,o(e,3),s)}},function(t,e,n){var r=n(109);t.exports=function(t){var e=r(t),n=e%1;return e===e?n?e-n:e:0}},function(t,e,n){var r=n(4),o=n(19),i=/^\\\\s+|\\\\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if(\\\"number\\\"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e=\\\"function\\\"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+\\\"\\\":e}if(\\\"string\\\"!=typeof t)return 0===t?t:+t;t=t.replace(i,\\\"\\\");var n=u.test(t);return n||s.test(t)?c(t.slice(2),n?2:8):a.test(t)?NaN:+t}},function(t,e,n){var r=n(55),o=n(82),i=n(17);t.exports=function(t,e){return null==t?t:r(t,o(e),i)}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(31),o=n(54),i=n(9);t.exports=function(t,e){var n={};return e=i(e,3),o(t,(function(t,o,i){r(n,o,e(t,o,i))})),n}},function(t,e,n){var r=n(60),o=n(241),i=n(13);t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},function(t,e){t.exports=function(t,e){return t>e}},function(t,e,n){var r=n(243),o=n(247)((function(t,e,n){r(t,e,n)}));t.exports=o},function(t,e,n){var r=n(25),o=n(111),i=n(55),a=n(244),u=n(4),s=n(17),c=n(112);t.exports=function t(e,n,f,d,h){e!==n&&i(n,(function(i,s){if(h||(h=new r),u(i))a(e,n,s,f,t,d,h);else{var p=d?d(c(e,s),i,s+\\\"\\\",e,n,h):void 0;void 0===p&&(p=i),o(e,s,p)}}),s)}},function(t,e,n){var r=n(111),o=n(68),i=n(77),a=n(69),u=n(78),s=n(22),c=n(1),f=n(102),d=n(16),h=n(20),p=n(4),l=n(245),v=n(23),y=n(112),g=n(246);t.exports=function(t,e,n,b,m,x,_){var w=y(t,n),E=y(e,n),j=_.get(E);if(j)r(t,n,j);else{var k=x?x(w,E,n+\\\"\\\",t,e,_):void 0,N=void 0===k;if(N){var M=c(E),S=!M&&d(E),O=!M&&!S&&v(E);k=E,M||S||O?c(w)?k=w:f(w)?k=a(w):S?(N=!1,k=o(E,!0)):O?(N=!1,k=i(E,!0)):k=[]:l(E)||s(E)?(k=w,s(w)?k=g(w):p(w)&&!h(w)||(k=u(E))):N=!1}N&&(_.set(E,k),m(k,E,b,x,_),_.delete(E)),r(t,n,k)}}},function(t,e,n){var r=n(12),o=n(35),i=n(7),a=Function.prototype,u=Object.prototype,s=a.toString,c=u.hasOwnProperty,f=s.call(Object);t.exports=function(t){if(!i(t)||\\\"[object Object]\\\"!=r(t))return!1;var e=o(t);if(null===e)return!0;var n=c.call(e,\\\"constructor\\\")&&e.constructor;return\\\"function\\\"==typeof n&&n instanceof n&&s.call(n)==f}},function(t,e,n){var r=n(21),o=n(17);t.exports=function(t){return r(t,o(t))}},function(t,e,n){var r=n(39),o=n(40);t.exports=function(t){return r((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,u=i>2?n[2]:void 0;for(a=t.length>3&&\\\"function\\\"==typeof a?(i--,a):void 0,u&&o(n[0],n[1],u)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,a)}return e}))}},function(t,e,n){var r=n(60),o=n(113),i=n(13);t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},function(t,e,n){var r=n(60),o=n(9),i=n(113);t.exports=function(t,e){return t&&t.length?r(t,o(e,2),i):void 0}},function(t,e,n){var r=n(6);t.exports=function(){return r.Date.now()}},function(t,e,n){var r=n(252),o=n(255)((function(t,e){return null==t?{}:r(t,e)}));t.exports=o},function(t,e,n){var r=n(253),o=n(91);t.exports=function(t,e){return r(t,e,(function(e,n){return o(t,n)}))}},function(t,e,n){var r=n(57),o=n(254),i=n(37);t.exports=function(t,e,n){for(var a=-1,u=e.length,s={};++a<u;){var c=e[a],f=r(t,c);n(f,c)&&o(s,i(c,t),f)}return s}},function(t,e,n){var r=n(30),o=n(37),i=n(32),a=n(4),u=n(24);t.exports=function(t,e,n,s){if(!a(t))return t;for(var c=-1,f=(e=o(e,t)).length,d=f-1,h=t;null!=h&&++c<f;){var p=u(e[c]),l=n;if(c!=d){var v=h[p];void 0===(l=s?s(v,p,h):void 0)&&(l=a(v)?v:i(e[c+1])?[]:{})}r(h,p,l),h=h[p]}return t}},function(t,e,n){var r=n(110),o=n(99),i=n(100);t.exports=function(t){return i(o(t,void 0,r),t+\\\"\\\")}},function(t,e,n){var r=n(257)();t.exports=r},function(t,e,n){var r=n(258),o=n(40),i=n(109);t.exports=function(t){return function(e,n,a){return a&&\\\"number\\\"!=typeof a&&o(e,n,a)&&(n=a=void 0),e=i(e),void 0===n?(n=e,e=0):n=i(n),a=void 0===a?e<n?1:-1:i(a),r(e,n,a,t)}}},function(t,e){var n=Math.ceil,r=Math.max;t.exports=function(t,e,o,i){for(var a=-1,u=r(n((e-t)/(o||1)),0),s=Array(u);u--;)s[i?u:++a]=t,t+=o;return s}},function(t,e,n){var r=n(59),o=n(260),i=n(39),a=n(40),u=i((function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),o(t,r(e,1),[])}));t.exports=u},function(t,e,n){var r=n(38),o=n(9),i=n(97),a=n(261),u=n(33),s=n(262),c=n(13);t.exports=function(t,e,n){var f=-1;e=r(e.length?e:[c],u(o));var d=i(t,(function(t,n,o){return{criteria:r(e,(function(e){return e(t)})),index:++f,value:t}}));return a(d,(function(t,e){return s(t,e,n)}))}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(263);t.exports=function(t,e,n){for(var o=-1,i=t.criteria,a=e.criteria,u=i.length,s=n.length;++o<u;){var c=r(i[o],a[o]);if(c)return o>=s?c:c*(\\\"desc\\\"==n[o]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(19);t.exports=function(t,e){if(t!==e){var n=void 0!==t,o=null===t,i=t===t,a=r(t),u=void 0!==e,s=null===e,c=e===e,f=r(e);if(!s&&!f&&!a&&t>e||a&&u&&c&&!s&&!f||o&&u&&c||!n&&c||!i)return 1;if(!o&&!a&&!f&&t<e||f&&n&&i&&!o&&!a||s&&n&&i||!u&&i||!c)return-1}return 0}},function(t,e,n){var r=n(90),o=0;t.exports=function(t){var e=++o;return r(t)+e}},function(t,e,n){var r=n(30),o=n(266);t.exports=function(t,e){return o(t||[],e||[],r)}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=t.length,i=e.length,a={};++r<o;){var u=r<i?e[r]:void 0;n(a,t[r],u)}return a}},function(t,e,n){\\\"use strict\\\";var r=n(0),o=n(268);t.exports={run:function(t){var e=\\\"greedy\\\"===t.graph().acyclicer?o(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},o={};function i(a){r.has(o,a)||(o[a]=!0,n[a]=!0,r.forEach(t.outEdges(a),(function(t){r.has(n,t.w)?e.push(t):i(t.w)})),delete n[a])}return r.forEach(t.nodes(),i),e}(t);r.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId(\\\"rev\\\"))}))},undo:function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}}},function(t,e,n){var r=n(0),o=n(5).Graph,i=n(269);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new o,a=0,u=0;r.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),r.forEach(t.edges(),(function(t){var r=n.edge(t.v,t.w)||0,o=e(t),i=r+o;n.setEdge(t.v,t.w,i),u=Math.max(u,n.node(t.v).out+=o),a=Math.max(a,n.node(t.w).in+=o)}));var c=r.range(u+a+3).map((function(){return new i})),f=a+1;return r.forEach(n.nodes(),(function(t){s(c,f,n.node(t))})),{graph:n,buckets:c,zeroIdx:f}}(t,e||a),c=function(t,e,n){var r,o=[],i=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;r=a.dequeue();)u(t,e,n,r);for(;r=i.dequeue();)u(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){o=o.concat(u(t,e,n,r,!0));break}}return o}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,(function(e){return t.outEdges(e.v,e.w)})),!0)};var a=r.constant(1);function u(t,e,n,o,i){var a=i?[]:void 0;return r.forEach(t.inEdges(o.v),(function(r){var o=t.edge(r),u=t.node(r.v);i&&a.push({v:r.v,w:r.w}),u.out-=o,s(e,n,u)})),r.forEach(t.outEdges(o.v),(function(r){var o=t.edge(r),i=r.w,a=t.node(i);a.in-=o,s(e,n,a)})),t.removeNode(o.v),a}function s(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},function(t,e){function n(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function o(t,e){if(\\\"_next\\\"!==t&&\\\"_prev\\\"!==t)return e}t.exports=n,n.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},n.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},n.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,o)),n=n._prev;return\\\"[\\\"+t.join(\\\", \\\")+\\\"]\\\"}},function(t,e,n){\\\"use strict\\\";var r=n(0),o=n(2);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),(function(e){!function(t,e){var n,r,i,a=e.v,u=t.node(a).rank,s=e.w,c=t.node(s).rank,f=e.name,d=t.edge(e),h=d.labelRank;if(c===u+1)return;for(t.removeEdge(e),i=0,++u;u<c;++i,++u)d.points=[],r={width:0,height:0,edgeLabel:d,edgeObj:e,rank:u},n=o.addDummyNode(t,\\\"edge\\\",r,\\\"_d\\\"),u===h&&(r.width=d.width,r.height=d.height,r.dummy=\\\"edge-label\\\",r.labelpos=d.labelpos),t.setEdge(a,n,{weight:d.weight},f),0===i&&t.graph().dummyChains.push(n),a=n;t.setEdge(a,s,{weight:d.weight},f)}(t,e)}))},undo:function(t){r.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),o=r.edgeLabel;for(t.setEdge(r.edgeObj,o);r.dummy;)n=t.successors(e)[0],t.removeNode(e),o.points.push({x:r.x,y:r.y}),\\\"edge-label\\\"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),e=n,r=t.node(e)}))}}},function(t,e,n){\\\"use strict\\\";var r=n(41).longestPath,o=n(114),i=n(272);t.exports=function(t){var e=t.graph().ranker;if(e instanceof Function)return e(t);switch(t.graph().ranker){case\\\"network-simplex\\\":u(t);break;case\\\"tight-tree\\\":!function(t){r(t),o(t)}(t);break;case\\\"longest-path\\\":a(t);break;case\\\"none\\\":break;default:u(t)}};var a=r;function u(t){i(t)}},function(t,e,n){\\\"use strict\\\";var r=n(0),o=n(114),i=n(41).slack,a=n(41).longestPath,u=n(5).alg.preorder,s=n(5).alg.postorder,c=n(2).simplify;function f(t){t=c(t),a(t);var e,n=o(t);for(p(n),d(n,t);e=v(n);)g(n,t,e,y(n,t,e))}function d(t,e){var n=s(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=h(t,e,n)}(t,e,n)}))}function h(t,e,n){var o=t.node(n).parent,i=!0,a=e.edge(n,o),u=0;return a||(i=!1,a=e.edge(o,n)),u=a.weight,r.forEach(e.nodeEdges(n),(function(r){var a,s,c=r.v===n,f=c?r.w:r.v;if(f!==o){var d=c===i,h=e.edge(r).weight;if(u+=d?h:-h,a=n,s=f,t.hasEdge(a,s)){var p=t.edge(n,f).cutvalue;u+=d?-p:p}}})),u}function p(t,e){arguments.length<2&&(e=t.nodes()[0]),l(t,{},1,e)}function l(t,e,n,o,i){var a=n,u=t.node(o);return e[o]=!0,r.forEach(t.neighbors(o),(function(i){r.has(e,i)||(n=l(t,e,n,i,o))})),u.low=a,u.lim=n++,i?u.parent=i:delete u.parent,n}function v(t){return r.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function y(t,e,n){var o=n.v,a=n.w;e.hasEdge(o,a)||(o=n.w,a=n.v);var u=t.node(o),s=t.node(a),c=u,f=!1;u.lim>s.lim&&(c=s,f=!0);var d=r.filter(e.edges(),(function(e){return f===b(t,t.node(e.v),c)&&f!==b(t,t.node(e.w),c)}));return r.minBy(d,(function(t){return i(e,t)}))}function g(t,e,n,o){var i=n.v,a=n.w;t.removeEdge(i,a),t.setEdge(o.v,o.w,{}),p(t),d(t,e),function(t,e){var n=r.find(t.nodes(),(function(t){return!e.node(t).parent})),o=u(t,n);o=o.slice(1),r.forEach(o,(function(n){var r=t.node(n).parent,o=e.edge(n,r),i=!1;o||(o=e.edge(r,n),i=!0),e.node(n).rank=e.node(r).rank+(i?o.minlen:-o.minlen)}))}(t,e)}function b(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=f,f.initLowLimValues=p,f.initCutValues=d,f.calcCutValue=h,f.leaveEdge=v,f.enterEdge=y,f.exchangeEdges=g},function(t,e,n){var r=n(0);t.exports=function(t){var e=function(t){var e={},n=0;function o(i){var a=n;r.forEach(t.children(i),o),e[i]={low:a,lim:n++}}return r.forEach(t.children(),o),e}(t);r.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),o=r.edgeObj,i=function(t,e,n,r){var o,i,a=[],u=[],s=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);o=n;do{o=t.parent(o),a.push(o)}while(o&&(e[o].low>s||c>e[o].lim));i=o,o=r;for(;(o=t.parent(o))!==i;)u.push(o);return{path:a.concat(u.reverse()),lca:i}}(t,e,o.v,o.w),a=i.path,u=i.lca,s=0,c=a[s],f=!0;n!==o.w;){if(r=t.node(n),f){for(;(c=a[s])!==u&&t.node(c).maxRank<r.rank;)s++;c===u&&(f=!1)}if(!f){for(;s<a.length-1&&t.node(c=a[s+1]).minRank<=r.rank;)s++;c=a[s]}t.setParent(n,c),n=t.successors(n)[0]}}))}},function(t,e,n){var r=n(0),o=n(2);t.exports={run:function(t){var e=o.addDummyNode(t,\\\"root\\\",{},\\\"_root\\\"),n=function(t){var e={};return r.forEach(t.children(),(function(n){!function n(o,i){var a=t.children(o);a&&a.length&&r.forEach(a,(function(t){n(t,i+1)}));e[o]=i}(n,1)})),e}(t),i=r.max(r.values(n))-1,a=2*i+1;t.graph().nestingRoot=e,r.forEach(t.edges(),(function(e){t.edge(e).minlen*=a}));var u=function(t){return r.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;r.forEach(t.children(),(function(s){!function t(e,n,i,a,u,s,c){var f=e.children(c);if(!f.length)return void(c!==n&&e.setEdge(n,c,{weight:0,minlen:i}));var d=o.addBorderNode(e,\\\"_bt\\\"),h=o.addBorderNode(e,\\\"_bb\\\"),p=e.node(c);e.setParent(d,c),p.borderTop=d,e.setParent(h,c),p.borderBottom=h,r.forEach(f,(function(r){t(e,n,i,a,u,s,r);var o=e.node(r),f=o.borderTop?o.borderTop:r,p=o.borderBottom?o.borderBottom:r,l=o.borderTop?a:2*a,v=f!==p?1:u-s[c]+1;e.setEdge(d,f,{weight:l,minlen:v,nestingEdge:!0}),e.setEdge(p,h,{weight:l,minlen:v,nestingEdge:!0})})),e.parent(c)||e.setEdge(n,d,{weight:0,minlen:u+s[c]})}(t,e,a,u,i,n,s)})),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}}},function(t,e,n){var r=n(0),o=n(2);function i(t,e,n,r,i,a){var u={width:0,height:0,rank:a,borderType:e},s=i[e][a-1],c=o.addDummyNode(t,\\\"border\\\",u,n);i[e][a]=c,t.setParent(c,r),s&&t.setEdge(s,c,{weight:1})}t.exports=function(t){r.forEach(t.children(),(function e(n){var o=t.children(n),a=t.node(n);if(o.length&&r.forEach(o,e),r.has(a,\\\"minRank\\\")){a.borderLeft=[],a.borderRight=[];for(var u=a.minRank,s=a.maxRank+1;u<s;++u)i(t,\\\"borderLeft\\\",\\\"_bl\\\",n,a,u),i(t,\\\"borderRight\\\",\\\"_br\\\",n,a,u)}}))}},function(t,e,n){\\\"use strict\\\";var r=n(0);function o(t){r.forEach(t.nodes(),(function(e){i(t.node(e))})),r.forEach(t.edges(),(function(e){i(t.edge(e))}))}function i(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function u(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();\\\"lr\\\"!==e&&\\\"rl\\\"!==e||o(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();\\\"bt\\\"!==e&&\\\"rl\\\"!==e||function(t){r.forEach(t.nodes(),(function(e){a(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,\\\"y\\\")&&a(n)}))}(t);\\\"lr\\\"!==e&&\\\"rl\\\"!==e||(!function(t){r.forEach(t.nodes(),(function(e){u(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,u),r.has(n,\\\"x\\\")&&u(n)}))}(t),o(t))}}},function(t,e,n){\\\"use strict\\\";var r=n(0),o=n(278),i=n(279),a=n(280),u=n(284),s=n(285),c=n(5).Graph,f=n(2);function d(t,e,n){return r.map(e,(function(e){return u(t,e,n)}))}function h(t,e){var n=new c;r.forEach(t,(function(t){var o=t.graph().root,i=a(t,o,n,e);r.forEach(i.vs,(function(e,n){t.node(e).order=n})),s(t,n,i.vs)}))}function p(t,e){r.forEach(e,(function(e){r.forEach(e,(function(e,n){t.node(e).order=n}))}))}t.exports=function(t){var e=f.maxRank(t),n=d(t,r.range(1,e+1),\\\"inEdges\\\"),a=d(t,r.range(e-1,-1,-1),\\\"outEdges\\\"),u=o(t);p(t,u);for(var s,c=Number.POSITIVE_INFINITY,l=0,v=0;v<4;++l,++v){h(l%2?n:a,l%4>=2),u=f.buildLayerMatrix(t);var y=i(t,u);y<c&&(v=0,s=r.cloneDeep(u),c=y)}p(t,s)}},function(t,e,n){\\\"use strict\\\";var r=n(0);t.exports=function(t){var e={},n=r.filter(t.nodes(),(function(e){return!t.children(e).length})),o=r.max(r.map(n,(function(e){return t.node(e).rank}))),i=r.map(r.range(o+1),(function(){return[]}));var a=r.sortBy(n,(function(e){return t.node(e).rank}));return r.forEach(a,(function n(o){if(r.has(e,o))return;e[o]=!0;var a=t.node(o);i[a.rank].push(o),r.forEach(t.successors(o),n)})),i}},function(t,e,n){\\\"use strict\\\";var r=n(0);function o(t,e,n){for(var o=r.zipObject(n,r.map(n,(function(t,e){return e}))),i=r.flatten(r.map(e,(function(e){return r.sortBy(r.map(t.outEdges(e),(function(e){return{pos:o[e.w],weight:t.edge(e).weight}})),\\\"pos\\\")})),!0),a=1;a<n.length;)a<<=1;var u=2*a-1;a-=1;var s=r.map(new Array(u),(function(){return 0})),c=0;return r.forEach(i.forEach((function(t){var e=t.pos+a;s[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=s[e+1]),s[e=e-1>>1]+=t.weight;c+=t.weight*n}))),c}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=o(t,e[r-1],e[r]);return n}},function(t,e,n){var r=n(0),o=n(281),i=n(282),a=n(283);t.exports=function t(e,n,u,s){var c=e.children(n),f=e.node(n),d=f?f.borderLeft:void 0,h=f?f.borderRight:void 0,p={};d&&(c=r.filter(c,(function(t){return t!==d&&t!==h})));var l=o(e,c);r.forEach(l,(function(n){if(e.children(n.v).length){var o=t(e,n.v,u,s);p[n.v]=o,r.has(o,\\\"barycenter\\\")&&(i=n,a=o,r.isUndefined(i.barycenter)?(i.barycenter=a.barycenter,i.weight=a.weight):(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight))}var i,a}));var v=i(l,u);!function(t,e){r.forEach(t,(function(t){t.vs=r.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(v,p);var y=a(v,s);if(d&&(y.vs=r.flatten([d,y.vs,h],!0),e.predecessors(d).length)){var g=e.node(e.predecessors(d)[0]),b=e.node(e.predecessors(h)[0]);r.has(y,\\\"barycenter\\\")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+g.order+b.order)/(y.weight+2),y.weight+=2}return y}},function(t,e,n){var r=n(0);t.exports=function(t,e){return r.map(e,(function(e){var n=t.inEdges(e);if(n.length){var o=r.reduce(n,(function(e,n){var r=t.edge(n),o=t.node(n.v);return{sum:e.sum+r.weight*o.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:o.sum/o.weight,weight:o.weight}}return{v:e}}))}},function(t,e,n){\\\"use strict\\\";var r=n(0);t.exports=function(t,e){var n={};return r.forEach(t,(function(t,e){var o=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(o.barycenter=t.barycenter,o.weight=t.weight)})),r.forEach(e.edges(),(function(t){var e=n[t.v],o=n[t.w];r.isUndefined(e)||r.isUndefined(o)||(o.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function o(e){return function(n){n.in.push(e),0===--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),r.forEach(i.in.reverse(),n(i)),r.forEach(i.out,o(i))}return r.map(r.filter(e,(function(t){return!t.merged})),(function(t){return r.pick(t,[\\\"vs\\\",\\\"i\\\",\\\"barycenter\\\",\\\"weight\\\"])}))}(r.filter(n,(function(t){return!t.indegree})))}},function(t,e,n){var r=n(0),o=n(2);function i(t,e,n){for(var o;e.length&&(o=r.last(e)).i<=n;)e.pop(),t.push(o.vs),n++;return n}t.exports=function(t,e){var n=o.partition(t,(function(t){return r.has(t,\\\"barycenter\\\")})),a=n.lhs,u=r.sortBy(n.rhs,(function(t){return-t.i})),s=[],c=0,f=0,d=0;a.sort((h=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:h?e.i-t.i:t.i-e.i})),d=i(s,u,d),r.forEach(a,(function(t){d+=t.vs.length,s.push(t.vs),c+=t.barycenter*t.weight,f+=t.weight,d=i(s,u,d)}));var h;var p={vs:r.flatten(s,!0)};f&&(p.barycenter=c/f,p.weight=f);return p}},function(t,e,n){var r=n(0),o=n(5).Graph;t.exports=function(t,e,n){var i=function(t){var e;for(;t.hasNode(e=r.uniqueId(\\\"_root\\\")););return e}(t),a=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((function(e){return t.node(e)}));return r.forEach(t.nodes(),(function(o){var u=t.node(o),s=t.parent(o);(u.rank===e||u.minRank<=e&&e<=u.maxRank)&&(a.setNode(o),a.setParent(o,s||i),r.forEach(t[n](o),(function(e){var n=e.v===o?e.w:e.v,i=a.edge(n,o),u=r.isUndefined(i)?0:i.weight;a.setEdge(n,o,{weight:t.edge(e).weight+u})})),r.has(u,\\\"minRank\\\")&&a.setNode(o,{borderLeft:u.borderLeft[e],borderRight:u.borderRight[e]}))})),a}},function(t,e,n){var r=n(0);t.exports=function(t,e,n){var o,i={};r.forEach(n,(function(n){for(var r,a,u=t.parent(n);u;){if((r=t.parent(u))?(a=i[r],i[r]=u):(a=o,o=u),a&&a!==u)return void e.setEdge(a,u);u=r}}))}},function(t,e,n){\\\"use strict\\\";var r=n(0),o=n(2),i=n(287).positionX;t.exports=function(t){(function(t){var e=o.buildLayerMatrix(t),n=t.graph().ranksep,i=0;r.forEach(e,(function(e){var o=r.max(r.map(e,(function(e){return t.node(e).height})));r.forEach(e,(function(e){t.node(e).y=i+o/2})),i+=o+n}))})(t=o.asNonCompoundGraph(t)),r.forEach(i(t),(function(e,n){t.node(n).x=e}))}},function(t,e,n){\\\"use strict\\\";var r=n(0),o=n(5).Graph,i=n(2);function a(t,e){var n={};return r.reduce(e,(function(e,o){var i=0,a=0,u=e.length,c=r.last(o);return r.forEach(o,(function(e,f){var d=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),h=d?t.node(d).order:u;(d||e===c)&&(r.forEach(o.slice(a,f+1),(function(e){r.forEach(t.predecessors(e),(function(r){var o=t.node(r),a=o.order;!(a<i||h<a)||o.dummy&&t.node(e).dummy||s(n,r,e)}))})),a=f+1,i=h)})),o})),n}function u(t,e){var n={};function o(e,o,i,a,u){var c;r.forEach(r.range(o,i),(function(o){c=e[o],t.node(c).dummy&&r.forEach(t.predecessors(c),(function(e){var r=t.node(e);r.dummy&&(r.order<a||r.order>u)&&s(n,e,c)}))}))}return r.reduce(e,(function(e,n){var i,a=-1,u=0;return r.forEach(n,(function(r,s){if(\\\"border\\\"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(i=t.node(c[0]).order,o(n,u,s,a,i),u=s,a=i)}o(n,u,n.length,i,e.length)})),n})),n}function s(t,e,n){if(e>n){var r=e;e=n,n=r}var o=t[e];o||(t[e]=o={}),o[n]=!0}function c(t,e,n){if(e>n){var o=e;e=n,n=o}return r.has(t[e],n)}function f(t,e,n,o){var i={},a={},u={};return r.forEach(e,(function(t){r.forEach(t,(function(t,e){i[t]=t,a[t]=t,u[t]=e}))})),r.forEach(e,(function(t){var e=-1;r.forEach(t,(function(t){var s=o(t);if(s.length)for(var f=((s=r.sortBy(s,(function(t){return u[t]}))).length-1)/2,d=Math.floor(f),h=Math.ceil(f);d<=h;++d){var p=s[d];a[t]===t&&e<u[p]&&!c(n,t,p)&&(a[p]=t,a[t]=i[t]=i[p],e=u[p])}}))})),{root:i,align:a}}function d(t,e,n,i,a){var u={},s=function(t,e,n,i){var a=new o,u=t.graph(),s=function(t,e,n){return function(o,i,a){var u,s=o.node(i),c=o.node(a),f=0;if(f+=s.width/2,r.has(s,\\\"labelpos\\\"))switch(s.labelpos.toLowerCase()){case\\\"l\\\":u=-s.width/2;break;case\\\"r\\\":u=s.width/2}if(u&&(f+=n?u:-u),u=0,f+=(s.dummy?e:t)/2,f+=(c.dummy?e:t)/2,f+=c.width/2,r.has(c,\\\"labelpos\\\"))switch(c.labelpos.toLowerCase()){case\\\"l\\\":u=c.width/2;break;case\\\"r\\\":u=-c.width/2}return u&&(f+=n?u:-u),u=0,f}}(u.nodesep,u.edgesep,i);return r.forEach(e,(function(e){var o;r.forEach(e,(function(e){var r=n[e];if(a.setNode(r),o){var i=n[o],u=a.edge(i,r);a.setEdge(i,r,Math.max(s(t,e,o),u||0))}o=e}))})),a}(t,e,n,a),c=a?\\\"borderLeft\\\":\\\"borderRight\\\";function f(t,e){for(var n=s.nodes(),r=n.pop(),o={};r;)o[r]?t(r):(o[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return f((function(t){u[t]=s.inEdges(t).reduce((function(t,e){return Math.max(t,u[e.v]+s.edge(e))}),0)}),s.predecessors.bind(s)),f((function(e){var n=s.outEdges(e).reduce((function(t,e){return Math.min(t,u[e.w]-s.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(u[e]=Math.max(u[e],n))}),s.successors.bind(s)),r.forEach(i,(function(t){u[t]=u[n[t]]})),u}function h(t,e){return r.minBy(r.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return r.forIn(e,(function(e,r){var i=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+i,n),o=Math.min(e-i,o)})),n-o}))}function p(t,e){var n=r.values(e),o=r.min(n),i=r.max(n);r.forEach([\\\"u\\\",\\\"d\\\"],(function(n){r.forEach([\\\"l\\\",\\\"r\\\"],(function(a){var u,s=n+a,c=t[s];if(c!==e){var f=r.values(c);(u=\\\"l\\\"===a?o-r.min(f):i-r.max(f))&&(t[s]=r.mapValues(c,(function(t){return t+u})))}}))}))}function l(t,e){return r.mapValues(t.ul,(function(n,o){if(e)return t[e.toLowerCase()][o];var i=r.sortBy(r.map(t,o));return(i[1]+i[2])/2}))}t.exports={positionX:function(t){var e,n=i.buildLayerMatrix(t),o=r.merge(a(t,n),u(t,n)),s={};r.forEach([\\\"u\\\",\\\"d\\\"],(function(i){e=\\\"u\\\"===i?n:r.values(n).reverse(),r.forEach([\\\"l\\\",\\\"r\\\"],(function(n){\\\"r\\\"===n&&(e=r.map(e,(function(t){return r.values(t).reverse()})));var a=(\\\"u\\\"===i?t.predecessors:t.successors).bind(t),u=f(t,e,o,a),c=d(t,e,u.root,u.align,\\\"r\\\"===n);\\\"r\\\"===n&&(c=r.mapValues(c,(function(t){return-t}))),s[i+n]=c}))}));var c=h(t,s);return p(s,c),l(s,t.graph().align)},findType1Conflicts:a,findType2Conflicts:u,addConflict:s,hasConflict:c,verticalAlignment:f,horizontalCompaction:d,alignCoordinates:p,findSmallestWidthAlignment:h,balance:l}},function(t,e,n){var r=n(0),o=n(2),i=n(5).Graph;t.exports={debugOrdering:function(t){var e=o.buildLayerMatrix(t),n=new i({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,\\\"layer\\\"+t.node(e).rank)})),r.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),r.forEach(e,(function(t,e){var o=\\\"layer\\\"+e;n.setNode(o,{rank:\\\"same\\\"}),r.reduce(t,(function(t,e){return n.setEdge(t,e,{style:\\\"invis\\\"}),e}))})),n}}},function(t,e){t.exports=\\\"0.8.5-pre\\\"},function(t,e,n){\\\"use strict\\\";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.r(e),n.d(e,\\\"graphNew\\\",(function(){return et})),n.d(e,\\\"graphDagre\\\",(function(){return nt}));var a=n(61),u=n.n(a);const s=.5*Math.PI,c=(t,e)=>Math.round(t/e)*e,f=(t,e)=>Math.abs(t-e),d=(t,e)=>Math.atan2(t.y-e.y,t.x-e.x),h=t=>t.x-.5*t.width,p=t=>t.x+.5*t.width,l=t=>t.y-.5*t.height,v=t=>t.y+.5*t.height,y=t=>{const e={};var n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){const t=i.value;e[t.y]=e[t.y]||[],e[t.y].push(t)}}catch(l){r=!0,o=l}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}const u=Object.keys(e).map(t=>parseFloat(t));u.sort((t,e)=>t-e);const s=u.map(t=>e[t]);for(let v=0;v<s.length;v+=1){s[v].sort((t,e)=>g(t.x,e.x,t.id,e.id));var c=!0,f=!1,d=void 0;try{for(var h,p=s[v][Symbol.iterator]();!(c=(h=p.next()).done);c=!0){h.value.row=v}}catch(l){f=!0,d=l}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}}return s},g=(t,e,...n)=>{const r=\\\"string\\\"===typeof t?t.localeCompare(e):t-e;return 0!==r||0===n.length?r:g(...n)},b=(t,e,n,r,o,i)=>{const a=o-n,u=i-r,s=(d=1,(c=((t-n)*a+(e-r)*u)/(a*a+u*u||1))<(f=0)?f:c>d?d:c);var c,f,d;return{x:n+a*s,y:r+u*s,ax:n,ay:r,bx:o,by:i}};function m(){return new x}var x=function(){function t(){this.index={},this.array=[]}return t.prototype.size=function(){return this.array.length},t.prototype.empty=function(){return 0===this.array.length},t.prototype.itemAt=function(t){return this.array[t]},t.prototype.contains=function(t){return void 0!==this.index[t.id()]},t.prototype.find=function(t){var e=this.index[t.id()];return void 0===e?void 0:this.array[e]},t.prototype.setDefault=function(t,e){var n=this.index[t.id()];if(void 0===n){var r=new _(t,e());return this.index[t.id()]=this.array.length,this.array.push(r),r}return this.array[n]},t.prototype.insert=function(t,e){var n=new _(t,e),r=this.index[t.id()];return void 0===r?(this.index[t.id()]=this.array.length,this.array.push(n)):this.array[r]=n,n},t.prototype.erase=function(t){var e=this.index[t.id()];if(void 0!==e){this.index[t.id()]=void 0;var n=this.array[e],r=this.array.pop();return n!==r&&(this.array[e]=r,this.index[r.first.id()]=e),n}},t.prototype.copy=function(){for(var e=new t,n=0;n<this.array.length;n++){var r=this.array[n].copy();e.array[n]=r,e.index[r.first.id()]=n}return e},t}(),_=function(){function t(t,e){this.first=t,this.second=e}return t.prototype.copy=function(){return new t(this.first,this.second)},t}(),w=function(){function t(t){void 0===t&&(t=\\\"\\\"),this._value=0,this._context=null,this._id=E++,this._name=t}return t.prototype.id=function(){return this._id},t.prototype.name=function(){return this._name},t.prototype.setName=function(t){this._name=t},t.prototype.context=function(){return this._context},t.prototype.setContext=function(t){this._context=t},t.prototype.value=function(){return this._value},t.prototype.setValue=function(t){this._value=t},t.prototype.plus=function(t){return new j(this,t)},t.prototype.minus=function(t){return new j(this,\\\"number\\\"===typeof t?-t:[-1,t])},t.prototype.multiply=function(t){return new j([t,this])},t.prototype.divide=function(t){return new j([1/t,this])},t.prototype.toJSON=function(){return{name:this._name,value:this._value}},t.prototype.toString=function(){return this._context+\\\"[\\\"+this._name+\\\":\\\"+this._value+\\\"]\\\"},t}(),E=0,j=function(){function t(){var t=k(arguments);this._terms=t.terms,this._constant=t.constant}return t.prototype.terms=function(){return this._terms},t.prototype.constant=function(){return this._constant},t.prototype.value=function(){for(var t=this._constant,e=0,n=this._terms.size();e<n;e++){var r=this._terms.itemAt(e);t+=r.first.value()*r.second}return t},t.prototype.plus=function(e){return new t(this,e)},t.prototype.minus=function(e){return new t(this,\\\"number\\\"===typeof e?-e:[-1,e])},t.prototype.multiply=function(e){return new t([e,this])},t.prototype.divide=function(e){return new t([1/e,this])},t.prototype.isConstant=function(){return 0==this._terms.size()},t.prototype.toString=function(){var t=this._terms.array.map((function(t){return t.second+\\\"*\\\"+t.first.toString()})).join(\\\" + \\\");return this.isConstant()||0===this._constant||(t+=\\\" + \\\"),t+=this._constant},t}();function k(t){for(var e=0,n=function(){return 0},r=m(),o=0,i=t.length;o<i;++o){var a=t[o];if(\\\"number\\\"===typeof a)e+=a;else if(a instanceof w)r.setDefault(a,n).second+=1;else if(a instanceof j){e+=a.constant();for(var u=0,s=(h=a.terms()).size();u<s;u++){var c=h.itemAt(u);r.setDefault(c.first,n).second+=c.second}}else{if(!(a instanceof Array))throw new Error(\\\"invalid Expression argument: \\\"+a);if(2!==a.length)throw new Error(\\\"array must have length 2\\\");var f=a[0],d=a[1];if(\\\"number\\\"!==typeof f)throw new Error(\\\"array item 0 must be a number\\\");if(d instanceof w)r.setDefault(d,n).second+=f;else{if(!(d instanceof j))throw new Error(\\\"array item 1 must be a variable or expression\\\");e+=d.constant()*f;var h;for(u=0,s=(h=d.terms()).size();u<s;u++){c=h.itemAt(u);r.setDefault(c.first,n).second+=c.second*f}}}}return{terms:r,constant:e}}var N,M=function(){function t(){}return t.create=function(t,e,n,r){void 0===r&&(r=1);var o=0;return o+=1e6*Math.max(0,Math.min(1e3,t*r)),o+=1e3*Math.max(0,Math.min(1e3,e*r)),o+=Math.max(0,Math.min(1e3,n*r))},t.clip=function(e){return Math.max(0,Math.min(t.required,e))},t.required=t.create(1e3,1e3,1e3),t.strong=t.create(1,0,0),t.medium=t.create(0,1,0),t.weak=t.create(0,0,1),t}();!function(t){t[t.Le=0]=\\\"Le\\\",t[t.Ge=1]=\\\"Ge\\\",t[t.Eq=2]=\\\"Eq\\\"}(N||(N={}));var S,O=function(){function t(t,e,n,r){void 0===r&&(r=M.required),this._id=A++,this._operator=e,this._strength=M.clip(r),this._expression=void 0===n&&t instanceof j?t:t.minus(n)}return t.prototype.id=function(){return this._id},t.prototype.expression=function(){return this._expression},t.prototype.op=function(){return this._operator},t.prototype.strength=function(){return this._strength},t.prototype.toString=function(){return this._expression.toString()+\\\" \\\"+[\\\"<=\\\",\\\">=\\\",\\\"=\\\"][this._operator]+\\\" 0 (\\\"+this._strength.toString()+\\\")\\\"},t}(),A=0,I=function(){function t(){this._cnMap=m(),this._rowMap=m(),this._varMap=m(),this._editMap=m(),this._infeasibleRows=[],this._objective=new L,this._artificial=null,this._idTick=0}return t.prototype.createConstraint=function(t,e,n,r){void 0===r&&(r=M.required);var o=new O(t,e,n,r);return this.addConstraint(o),o},t.prototype.addConstraint=function(t){if(void 0!==this._cnMap.find(t))throw new Error(\\\"duplicate constraint\\\");var e=this._createRow(t),n=e.row,r=e.tag,o=this._chooseSubject(n,r);if(o.type()===S.Invalid&&n.allDummies()){if(!C(n.constant()))throw new Error(\\\"unsatisfiable constraint\\\");o=r.marker}if(o.type()===S.Invalid){if(!this._addWithArtificialVariable(n))throw new Error(\\\"unsatisfiable constraint\\\")}else n.solveFor(o),this._substitute(o,n),this._rowMap.insert(o,n);this._cnMap.insert(t,r),this._optimize(this._objective)},t.prototype.removeConstraint=function(t){var e=this._cnMap.erase(t);if(void 0===e)throw new Error(\\\"unknown constraint\\\");this._removeConstraintEffects(t,e.second);var n=e.second.marker,r=this._rowMap.erase(n);if(void 0===r){var o=this._getMarkerLeavingSymbol(n);if(o.type()===S.Invalid)throw new Error(\\\"failed to find leaving row\\\");(r=this._rowMap.erase(o)).second.solveForEx(o,n),this._substitute(n,r.second)}this._optimize(this._objective)},t.prototype.hasConstraint=function(t){return this._cnMap.contains(t)},t.prototype.addEditVariable=function(t,e){if(void 0!==this._editMap.find(t))throw new Error(\\\"duplicate edit variable\\\");if((e=M.clip(e))===M.required)throw new Error(\\\"bad required strength\\\");var n=new j(t),r=new O(n,N.Eq,void 0,e);this.addConstraint(r);var o={tag:this._cnMap.find(r).second,constraint:r,constant:0};this._editMap.insert(t,o)},t.prototype.removeEditVariable=function(t){var e=this._editMap.erase(t);if(void 0===e)throw new Error(\\\"unknown edit variable\\\");this.removeConstraint(e.second.constraint)},t.prototype.hasEditVariable=function(t){return this._editMap.contains(t)},t.prototype.suggestValue=function(t,e){var n=this._editMap.find(t);if(void 0===n)throw new Error(\\\"unknown edit variable\\\");var r=this._rowMap,o=n.second,i=e-o.constant;o.constant=e;var a=o.tag.marker,u=r.find(a);if(void 0!==u)return u.second.add(-i)<0&&this._infeasibleRows.push(a),void this._dualOptimize();var s=o.tag.other;if(void 0!==(u=r.find(s)))return u.second.add(i)<0&&this._infeasibleRows.push(s),void this._dualOptimize();for(var c=0,f=r.size();c<f;++c){var d=r.itemAt(c),h=d.second,p=h.coefficientFor(a);0!==p&&h.add(i*p)<0&&d.first.type()!==S.External&&this._infeasibleRows.push(d.first)}this._dualOptimize()},t.prototype.updateVariables=function(){for(var t=this._varMap,e=this._rowMap,n=0,r=t.size();n<r;++n){var o=t.itemAt(n),i=e.find(o.second);void 0!==i?o.first.setValue(i.second.constant()):o.first.setValue(0)}},t.prototype._getVarSymbol=function(t){var e=this;return this._varMap.setDefault(t,(function(){return e._makeSymbol(S.External)})).second},t.prototype._createRow=function(t){for(var e=t.expression(),n=new L(e.constant()),r=e.terms(),o=0,i=r.size();o<i;++o){var a=r.itemAt(o);if(!C(a.second)){var u=this._getVarSymbol(a.first),s=this._rowMap.find(u);void 0!==s?n.insertRow(s.second,a.second):n.insertSymbol(u,a.second)}}var c=this._objective,f=t.strength(),d={marker:z,other:z};switch(t.op()){case N.Le:case N.Ge:var h=t.op()===N.Le?1:-1,p=this._makeSymbol(S.Slack);if(d.marker=p,n.insertSymbol(p,h),f<M.required){var l=this._makeSymbol(S.Error);d.other=l,n.insertSymbol(l,-h),c.insertSymbol(l,f)}break;case N.Eq:if(f<M.required){var v=this._makeSymbol(S.Error),y=this._makeSymbol(S.Error);d.marker=v,d.other=y,n.insertSymbol(v,-1),n.insertSymbol(y,1),c.insertSymbol(v,f),c.insertSymbol(y,f)}else{var g=this._makeSymbol(S.Dummy);d.marker=g,n.insertSymbol(g)}}return n.constant()<0&&n.reverseSign(),{row:n,tag:d}},t.prototype._chooseSubject=function(t,e){for(var n=t.cells(),r=0,o=n.size();r<o;++r){var i=n.itemAt(r);if(i.first.type()===S.External)return i.first}var a=e.marker.type();return(a===S.Slack||a===S.Error)&&t.coefficientFor(e.marker)<0?e.marker:((a=e.other.type())===S.Slack||a===S.Error)&&t.coefficientFor(e.other)<0?e.other:z},t.prototype._addWithArtificialVariable=function(t){var e=this._makeSymbol(S.Slack);this._rowMap.insert(e,t.copy()),this._artificial=t.copy(),this._optimize(this._artificial);var n=C(this._artificial.constant());this._artificial=null;var r=this._rowMap.erase(e);if(void 0!==r){var o=r.second;if(o.isConstant())return n;var i=this._anyPivotableSymbol(o);if(i.type()===S.Invalid)return!1;o.solveForEx(e,i),this._substitute(i,o),this._rowMap.insert(i,o)}for(var a=this._rowMap,u=0,s=a.size();u<s;++u)a.itemAt(u).second.removeSymbol(e);return this._objective.removeSymbol(e),n},t.prototype._substitute=function(t,e){for(var n=this._rowMap,r=0,o=n.size();r<o;++r){var i=n.itemAt(r);i.second.substitute(t,e),i.second.constant()<0&&i.first.type()!==S.External&&this._infeasibleRows.push(i.first)}this._objective.substitute(t,e),this._artificial&&this._artificial.substitute(t,e)},t.prototype._optimize=function(t){for(;;){var e=this._getEnteringSymbol(t);if(e.type()===S.Invalid)return;var n=this._getLeavingSymbol(e);if(n.type()===S.Invalid)throw new Error(\\\"the objective is unbounded\\\");var r=this._rowMap.erase(n).second;r.solveForEx(n,e),this._substitute(e,r),this._rowMap.insert(e,r)}},t.prototype._dualOptimize=function(){for(var t=this._rowMap,e=this._infeasibleRows;0!==e.length;){var n=e.pop(),r=t.find(n);if(void 0!==r&&r.second.constant()<0){var o=this._getDualEnteringSymbol(r.second);if(o.type()===S.Invalid)throw new Error(\\\"dual optimize failed\\\");var i=r.second;t.erase(n),i.solveForEx(n,o),this._substitute(o,i),t.insert(o,i)}}},t.prototype._getEnteringSymbol=function(t){for(var e=t.cells(),n=0,r=e.size();n<r;++n){var o=e.itemAt(n),i=o.first;if(o.second<0&&i.type()!==S.Dummy)return i}return z},t.prototype._getDualEnteringSymbol=function(t){for(var e=Number.MAX_VALUE,n=z,r=t.cells(),o=0,i=r.size();o<i;++o){var a=r.itemAt(o),u=a.first,s=a.second;if(s>0&&u.type()!==S.Dummy){var c=this._objective.coefficientFor(u)/s;c<e&&(e=c,n=u)}}return n},t.prototype._getLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,n=z,r=this._rowMap,o=0,i=r.size();o<i;++o){var a=r.itemAt(o),u=a.first;if(u.type()!==S.External){var s=a.second,c=s.coefficientFor(t);if(c<0){var f=-s.constant()/c;f<e&&(e=f,n=u)}}}return n},t.prototype._getMarkerLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,n=e,r=e,o=z,i=o,a=o,u=o,s=this._rowMap,c=0,f=s.size();c<f;++c){var d=s.itemAt(c),h=d.second,p=h.coefficientFor(t);if(0!==p){var l=d.first;if(l.type()===S.External)u=l;else if(p<0){(v=-h.constant()/p)<n&&(n=v,i=l)}else{var v;(v=h.constant()/p)<r&&(r=v,a=l)}}}return i!==o?i:a!==o?a:u},t.prototype._removeConstraintEffects=function(t,e){e.marker.type()===S.Error&&this._removeMarkerEffects(e.marker,t.strength()),e.other.type()===S.Error&&this._removeMarkerEffects(e.other,t.strength())},t.prototype._removeMarkerEffects=function(t,e){var n=this._rowMap.find(t);void 0!==n?this._objective.insertRow(n.second,-e):this._objective.insertSymbol(t,-e)},t.prototype._anyPivotableSymbol=function(t){for(var e=t.cells(),n=0,r=e.size();n<r;++n){var o=e.itemAt(n),i=o.first.type();if(i===S.Slack||i===S.Error)return o.first}return z},t.prototype._makeSymbol=function(t){return new P(t,this._idTick++)},t}();function C(t){return t<0?-t<1e-8:t<1e-8}!function(t){t[t.Invalid=0]=\\\"Invalid\\\",t[t.External=1]=\\\"External\\\",t[t.Slack=2]=\\\"Slack\\\",t[t.Error=3]=\\\"Error\\\",t[t.Dummy=4]=\\\"Dummy\\\"}(S||(S={}));var P=function(){function t(t,e){this._id=e,this._type=t}return t.prototype.id=function(){return this._id},t.prototype.type=function(){return this._type},t}(),z=new P(S.Invalid,-1),L=function(){function t(t){void 0===t&&(t=0),this._cellMap=m(),this._constant=t}return t.prototype.cells=function(){return this._cellMap},t.prototype.constant=function(){return this._constant},t.prototype.isConstant=function(){return this._cellMap.empty()},t.prototype.allDummies=function(){for(var t=this._cellMap,e=0,n=t.size();e<n;++e){if(t.itemAt(e).first.type()!==S.Dummy)return!1}return!0},t.prototype.copy=function(){var e=new t(this._constant);return e._cellMap=this._cellMap.copy(),e},t.prototype.add=function(t){return this._constant+=t},t.prototype.insertSymbol=function(t,e){void 0===e&&(e=1),C(this._cellMap.setDefault(t,(function(){return 0})).second+=e)&&this._cellMap.erase(t)},t.prototype.insertRow=function(t,e){void 0===e&&(e=1),this._constant+=t._constant*e;for(var n=t._cellMap,r=0,o=n.size();r<o;++r){var i=n.itemAt(r);this.insertSymbol(i.first,i.second*e)}},t.prototype.removeSymbol=function(t){this._cellMap.erase(t)},t.prototype.reverseSign=function(){this._constant=-this._constant;for(var t=this._cellMap,e=0,n=t.size();e<n;++e){var r=t.itemAt(e);r.second=-r.second}},t.prototype.solveFor=function(t){var e=this._cellMap,n=-1/e.erase(t).second;this._constant*=n;for(var r=0,o=e.size();r<o;++r)e.itemAt(r).second*=n},t.prototype.solveForEx=function(t,e){this.insertSymbol(t,-1),this.solveFor(e)},t.prototype.coefficientFor=function(t){var e=this._cellMap.find(t);return void 0!==e?e.second:0},t.prototype.substitute=function(t,e){var n=this._cellMap.erase(t);void 0!==n&&this.insertRow(e,n.second)},t}();const F=(t,e)=>{if(\\\"undefined\\\"===typeof t.id)throw new Error(\\\"Object is missing property 'id' required for key.\\\");return t.id+\\\"_\\\"+e},R=(t,e)=>t-e,D=(t,e)=>t===e,T=(t,e)=>t>=e,B=(t,e=1,n=!1)=>n?V(t):U(t,e),U=(t,e)=>{for(let s=0;s<e;s+=1){var n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){const t=i.value,e=(t.delta||R)(t.a[t.key],t.b[t.key],t),n=(t.distance||f)(t.a[t.key],t.b[t.key],t),r=t.target(t.a[t.key],t.b[t.key],t,e,n);if(!(t.operator||D)(n,r,e)){const n=(t.strength?t.strength(t):1)*(e-r);let o=t.weightA?t.weightA(t):1,i=t.weightB?t.weightB(t):1;o/=o+i,i=1-o,t.a[t.key]-=o*n,t.b[t.key]+=i*n}}}catch(u){r=!0,o=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}},V=t=>{const e=new I,n={};var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){const t=a.value;n[F(t.a,t.key)]=new w,n[F(t.b,t.key)]=new w}}catch(m){o=!0,i=m}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}var s,c=!0,f=!1,d=void 0;try{for(var h,p=t[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){const t=h.value,r=n[F(t.a,t.key)].minus(n[F(t.b,t.key)]);t.constraint=new O(r,(s=t.operator||D)===D?N.Eq:s===T?N.Ge:void 0,t.target(),!0===t.required?M.required:M.strong),e.addConstraint(t.constraint)}}catch(m){f=!0,d=m}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}e.updateVariables();var l=!0,v=!1,y=void 0;try{for(var g,b=t[Symbol.iterator]();!(l=(g=b.next()).done);l=!0){const t=g.value;t.a[t.key]=n[F(t.a,t.key)].value(),t.b[t.key]=n[F(t.b,t.key)].value()}}catch(m){v=!0,y=m}finally{try{l||null==b.return||b.return()}finally{if(v)throw y}}},G=(t,e,n)=>{const r=q(t);let o=0;for(let h=0;h<r.length;h+=1){const t=r[h];o+=c(t*n,Math.round(.25*n));var i=!0,a=!1,u=void 0;try{for(var s,f=e[h+1][Symbol.iterator]();!(i=(s=f.next()).done);i=!0){s.value.y+=o}}catch(d){a=!0,u=d}finally{try{i||null==f.return||f.return()}finally{if(a)throw u}}}},q=t=>{const e={};var n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){const t=i.value,n=Math.abs(d(t.targetNode,t.sourceNode)-s)/s,r=t.sourceNode.row,o=t.targetNode.row-1;e[r]=e[r]||[0,0],e[r][0]+=n,e[r][1]+=1,o!==r&&(e[o]=e[o]||[0,0],e[o][0]+=n,e[o][1]+=1)}}catch(u){r=!0,o=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}for(const s in e)e[s]=e[s][0]/(e[s][1]||1);return Object.values(e)},Y={layout:{spaceX:16,spaceY:110,layerSpaceY:55,basisX:1500,padding:100,iterations:20},routing:{spaceX:26,spaceY:28,minPassageGap:40,stemUnit:8,stemMinSource:5,stemMinTarget:5,stemMax:20,stemSpaceSource:6,stemSpaceTarget:10}},X=(t,e,n,r=Y)=>{$(t,e),W(t,n),(({nodes:t,edges:e,layers:n,basisX:r,spaceX:o,spaceY:a,layerSpaceY:u,iterations:s})=>{const f=[],d=[],h=[],p=[],l=[],v=[],b=[];var m=!0,x=!1,_=void 0;try{for(var w,E=t[Symbol.iterator]();!(m=(w=E.next()).done);m=!0){const t=w.value;t.x=0,t.y=0}}catch($){x=!0,_=$}finally{try{m||null==E.return||E.return()}finally{if(x)throw _}}const j=e.map(t=>({a:t.targetNode,b:t.sourceNode,key:\\\"y\\\",operator:T,target:()=>a,weightA:()=>0,weightB:()=>1,required:!0}));if(n){const e=Object.values(n),r=.5*(a+u);let o=t.filter(t=>t.nearestLayer===e[0]);for(let n=0;n<e.length-1;n+=1){const i=e[n],a=e[n+1],u=t.filter(t=>t.nearestLayer===a),s={id:i,x:0,y:0};var k=!0,N=!1,M=void 0;try{for(var S,O=o[Symbol.iterator]();!(k=(S=O.next()).done);k=!0){const t=S.value;f.push({a:s,b:t,key:\\\"y\\\",operator:T,target:()=>r,weightA:()=>0,weightB:()=>1})}}catch($){N=!0,M=$}finally{try{k||null==O.return||O.return()}finally{if(N)throw M}}var A=!0,I=!1,C=void 0;try{for(var P,z=u[Symbol.iterator]();!(A=(P=z.next()).done);A=!0){const t=P.value;f.push({a:t,b:s,key:\\\"y\\\",operator:T,target:()=>r,weightA:()=>0,weightB:()=>1})}}catch($){I=!0,C=$}finally{try{A||null==z.return||z.return()}finally{if(I)throw C}}o=u}}B([...j,...f],1,!0);const L=y(t),F={basisX:r,key:\\\"x\\\",operator:(t,e,n)=>e>=0?n>=e:n<=e,target:(t,e,n)=>n.edgeA.sourceNode.x-n.edgeB.sourceNode.x+(n.edgeA.targetNode.x-n.edgeB.targetNode.x)<0?-n.basisX:n.basisX,strength:t=>1/t.basisX,weightA:()=>.5,weightB:()=>.5};for(let c=0;c<e.length;c+=1){const t=e[c];for(let n=c+1;n<e.length;n+=1){const r=e[n];t.source!==r.source&&d.push(i(i({},F),{},{a:t.sourceNode,b:r.sourceNode,edgeA:t,edgeB:r})),t.target!==r.target&&d.push(i(i({},F),{},{a:t.targetNode,b:r.targetNode,edgeA:t,edgeB:r}))}}var R=!0,U=!1,V=void 0;try{for(var q,Y=e[Symbol.iterator]();!(R=(q=Y.next()).done);R=!0){const t=q.value,e={a:t.sourceNode,b:t.targetNode,key:\\\"x\\\",operator:D,target:()=>0,strength:t=>1/Math.max(1,.5*(t.a.targets.length+t.b.sources.length)),weightA:()=>.5,weightB:()=>.5};h.push(e);const n=1===t.sourceNode.targets.length,r=1===t.targetNode.sources.length;(n||r)&&p.push(e),n&&r&&l.push(e)}}catch($){U=!0,V=$}finally{try{R||null==Y.return||Y.return()}finally{if(U)throw V}}const X=Math.ceil(.5*s);for(let i=0;i<s;i+=1){B(d,1),B(h,1),B(p,X),B(l,X),v.length=0;for(let t=0;t<L.length;t+=1){const e=L[t];e.sort((t,e)=>g(t.x,e.x,t.id,e.id));for(let t=0;t<e.length-1;t+=1)v.push({a:e[t],b:e[t+1],key:\\\"x\\\",operator:(t,e,n)=>n<=e,target:(t,e,n)=>-o-.5*n.a.width-.5*n.b.width,strength:()=>1,weightA:()=>.5,weightB:()=>.5})}B(v,X)}for(let i=0;i<L.length;i+=1){const t=L[i];for(let e=0;e<t.length-1;e+=1){const n=.8*(t[e+1].x-t[e].x),r=.5*t[e].width+o+.5*t[e+1].width,i=Math.max(c(n,o),r);b.push({a:t[e+1],b:t[e],key:\\\"x\\\",operator:T,target:()=>i,weightA:()=>0,weightB:()=>1,required:!0})}}B([...b,...h],1,!0),G(e,L,a)})(i({nodes:t,edges:e,layers:n},r.layout)),(({nodes:t,edges:e,spaceX:n,spaceY:r,minPassageGap:o,stemUnit:a,stemMinSource:u,stemMinTarget:s,stemMax:c,stemSpaceSource:m,stemSpaceTarget:x})=>{const _=y(t);var w=!0,E=!1,j=void 0;try{for(var k,N=t[Symbol.iterator]();!(w=(k=N.next()).done);w=!0){k.value.targets.sort((t,e)=>g(d(e.sourceNode,e.targetNode),d(t.sourceNode,t.targetNode)))}}catch(q){E=!0,j=q}finally{try{w||null==N.return||N.return()}finally{if(E)throw j}}var M=!0,S=!1,O=void 0;try{for(var A,I=e[Symbol.iterator]();!(M=(A=I.next()).done);M=!0){const t=A.value,e=t.sourceNode,a=t.targetNode;t.points=[];const u=Math.min((e.width-m)/e.targets.length,m),s=u*(e.targets.indexOf(t)-.5*(e.targets.length-1));let c={x:e.x+s,y:e.y};for(let d=e.row+1;d<a.row;d+=1){const e=_[d][0];let a={x:h(e)-n,y:e.y},u=1/0;const v=[i(i({},e),{},{x:Number.MIN_SAFE_INTEGER}),..._[d],i(i({},e),{},{x:Number.MAX_SAFE_INTEGER})];for(let t=0;t<v.length-1;t+=1){const e=v[t],i=v[t+1],s=h(i)-p(e);if(s<o)continue;const d=Math.min(n,.5*s),y=b(c.x,c.y,p(e)+d,l(e)-r,h(i)-d,l(i)-r),g=f(c.x,y.x);if(g>u)break;g<u&&(u=g,a=y)}const y=e.height+r;t.points.push({x:a.x+s,y:a.y}),t.points.push({x:a.x+s,y:a.y+y}),c={x:a.x,y:a.y+y}}}}catch(q){S=!0,O=q}finally{try{M||null==I.return||I.return()}finally{if(S)throw O}}var C=!0,P=!1,z=void 0;try{for(var L,F=t[Symbol.iterator]();!(C=(L=F.next()).done);C=!0){const t=L.value;t.targets.sort((t,e)=>g(d(e.sourceNode,e.points[0]||e.targetNode),d(t.sourceNode,t.points[0]||t.targetNode))),t.sources.sort((t,e)=>g(d(t.points[t.points.length-1]||t.sourceNode,t.targetNode),d(e.points[e.points.length-1]||e.sourceNode,e.targetNode)))}}catch(q){P=!0,z=q}finally{try{C||null==F.return||F.return()}finally{if(P)throw z}}var R=!0,D=!1,T=void 0;try{for(var B,U=e[Symbol.iterator]();!(R=(B=U.next()).done);R=!0){const t=B.value,e=t.sourceNode,n=t.targetNode,r=Math.min((e.width-m)/e.targets.length,m),o=Math.min((n.width-x)/n.sources.length,x),i=e.targets.indexOf(t)-.5*(e.targets.length-1),f=n.sources.indexOf(t)-.5*(n.sources.length-1),d=r*i,h=o*f,p=a*e.targets.length*(1-Math.abs(i)/e.targets.length),y=a*n.sources.length*(1-Math.abs(f)/n.sources.length),g=[{x:e.x+d,y:v(e)},{x:e.x+d,y:v(e)+u},{x:e.x+d,y:v(e)+u+Math.min(p,c)}],b=[{x:n.x+h,y:l(n)-s-Math.min(y,c)},{x:n.x+h,y:l(n)-s},{x:n.x+h,y:l(n)}],_=[...g,...t.points,...b];let w=_[0].y;for(var V=0,G=_;V<G.length;V++){const t=G[V];t.y<w?t.y=w:w=t.y}t.points=_}}catch(q){D=!0,T=q}finally{try{R||null==U.return||U.return()}finally{if(D)throw T}}})(i({nodes:t,edges:e,layers:n},r.routing));const o=tt(t,r.layout.padding);return t.forEach(t=>((t,e)=>(t.x=t.x-e.x,t.y=t.y-e.y,t.order=t.x+9999*t.y,t))(t,o.min)),e.forEach(t=>((t,e)=>(t.points.forEach(t=>{t.x=t.x-e.x,t.y=t.y-e.y}),t))(t,o.min)),{nodes:t,edges:e,layers:n,size:o}},$=(t,e)=>{const n={};var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){const t=a.value;n[t.id]=t,t.targets=[],t.sources=[]}}catch(p){o=!0,i=p}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}var s=!0,c=!1,f=void 0;try{for(var d,h=e[Symbol.iterator]();!(s=(d=h.next()).done);s=!0){const t=d.value;t.sourceNode=n[t.source],t.targetNode=n[t.target],t.sourceNode.targets.push(t),t.targetNode.sources.push(t)}}catch(p){c=!0,f=p}finally{try{s||null==h.return||h.return()}finally{if(c)throw f}}},W=(t,e)=>{if(e&&e.length>0){const c=e.reduce((t,e)=>i(i({},t),{},{[e]:!0}),{}),f=t=>Boolean(c[t.layer]);var n=!0,r=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){const t=a.value,e=Z(t,J,H,f);t.nearestLayer=e&&e.layer}}catch(s){r=!0,o=s}finally{try{n||null==u.return||u.return()}finally{if(r)throw o}}}},J=t=>K(t).concat(Q(t)),K=t=>t.targets.map(t=>t.targetNode),Q=t=>t.sources.map(t=>t.sourceNode),H=(t,e)=>Math.abs(t.rank-e.rank),Z=(t,e,n,r,o)=>{if(r(t))return t;(o=o||{})[t.id]=!0;const i=e(t).filter(t=>!o[t.id]).sort((e,r)=>n(t,e)-n(t,r));return i.filter(r)[0]||i.map(t=>Z(t,e,n,r,o))[0]},tt=(t,e)=>{const n={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}};var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){const t=a.value,e=t.x,r=t.y;e<n.min.x&&(n.min.x=e),e>n.max.x&&(n.max.x=e),r<n.min.y&&(n.min.y=r),r>n.max.y&&(n.max.y=r)}}catch(s){o=!0,i=s}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n.width=n.max.x-n.min.x+2*e,n.height=n.max.y-n.min.y+2*e,n.min.x-=e,n.min.y-=e,n},et=({nodes:t,edges:e,layers:n})=>{const r=X(t,e,n);return i(i({},r),{},{size:i(i({},r.size),{},{marginx:100,marginy:100}),oldgraph:!1})},nt=({nodes:t,edges:e,layers:n})=>{const r=Boolean(n.length),o=(new u.a.graphlib.Graph).setGraph({ranker:r?\\\"none\\\":null,ranksep:r?200:70,marginx:40,marginy:40});return t.forEach(t=>{o.setNode(t.id,t)}),e.forEach(t=>{o.setEdge(t.source,t.target,t)}),u.a.layout(o),{nodes:o.nodes().map(t=>{const e=o.node(t);return i(i({},e),{},{order:e.x+9999*e.y})}),edges:o.edges().map(t=>o.edge(t)),size:o.graph(),oldgraph:!0}};addEventListener(\\\"message\\\",(function(t){var n,r=t.data,o=r.type,i=r.method,a=r.id,u=r.params;\\\"RPC\\\"===o&&i&&((n=e[i])?Promise.resolve().then((function(){return n.apply(e,u)})):Promise.reject(\\\"No such method\\\")).then((function(t){postMessage({type:\\\"RPC\\\",id:a,result:t})})).catch((function(t){var e={message:t};t.stack&&(e.message=t.message,e.stack=t.stack,e.name=t.name),postMessage({type:\\\"RPC\\\",id:a,error:e})}))})),postMessage({type:\\\"RPC\\\",method:\\\"ready\\\"})}]);\\n//# sourceMappingURL=a67b65779e12e20ba57c.worker.js.map\"])), { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","export const RESET_DATA = 'RESET_DATA';\n\n/**\n * Overwrite the existing data store when receiving new data from upstream\n * @param {Object} data New pipeline state data\n */\nexport function resetData(data) {\n  return {\n    type: RESET_DATA,\n    data\n  };\n}\n\nexport const TOGGLE_LAYERS = 'TOGGLE_LAYERS';\n\n/**\n * Toggle whether to show layers on/off\n * @param {Boolean} visible True if layers are to be shown\n */\nexport function toggleLayers(visible) {\n  return {\n    type: TOGGLE_LAYERS,\n    visible\n  };\n}\n\nexport const TOGGLE_EXPORT_MODAL = 'TOGGLE_EXPORT_MODAL';\n\n/**\n * Toggle whether to show the export modal\n * @param {Boolean} visible True if the modal is to be shown\n */\nexport function toggleExportModal(visible) {\n  return {\n    type: TOGGLE_EXPORT_MODAL,\n    visible\n  };\n}\n\nexport const TOGGLE_GRAPH = 'TOGGLE_GRAPH';\n\n/**\n * Toggle graph visible/hidden\n * @param {boolean} visible Whether graph is shown\n */\nexport function toggleGraph(visible) {\n  return {\n    type: TOGGLE_GRAPH,\n    visible\n  };\n}\n\nexport const TOGGLE_TEXT_LABELS = 'TOGGLE_TEXT_LABELS';\n\n/**\n * Toggle whether to show text labels on/off\n * @param {Boolean} textLabels True if text labels are to be shown\n */\nexport function toggleTextLabels(textLabels) {\n  return {\n    type: TOGGLE_TEXT_LABELS,\n    textLabels\n  };\n}\n\nexport const TOGGLE_SIDEBAR = 'TOGGLE_SIDEBAR';\n\n/**\n * Toggle sidebar visible/hidden\n * @param {boolean} visible Whether sidebar nav is shown\n */\nexport function toggleSidebar(visible) {\n  return {\n    type: TOGGLE_SIDEBAR,\n    visible\n  };\n}\n\nexport const TOGGLE_THEME = 'TOGGLE_THEME';\n\n/**\n * Switch between light/dark theme\n * @param {string} theme Theme name\n */\nexport function toggleTheme(theme) {\n  return {\n    type: TOGGLE_THEME,\n    theme\n  };\n}\n\nexport const UPDATE_CHART_SIZE = 'UPDATE_CHART_SIZE';\n\n/**\n * Store the chart size, based on the window\n * @param {Object} chartSize getBoundingClientRect value\n */\nexport function updateChartSize(chartSize) {\n  return {\n    type: UPDATE_CHART_SIZE,\n    chartSize\n  };\n}\n\nexport const UPDATE_ZOOM = 'UPDATE_ZOOM';\n\n/**\n * Store the zoom\n * @param {Object} zoom The zoom transform\n */\nexport function updateZoom(zoom) {\n  return {\n    type: UPDATE_ZOOM,\n    zoom\n  };\n}\n\nexport const UPDATE_FONT_LOADED = 'UPDATE_FONT_LOADED';\n\n/**\n * Update whether the webfont has loaded, which should block the chart render\n * @param {Boolean} fontLoaded Whether the font has loaded\n */\nexport function updateFontLoaded(fontLoaded) {\n  return {\n    type: UPDATE_FONT_LOADED,\n    fontLoaded\n  };\n}\n\nexport const TOGGLE_MINIMAP = 'TOGGLE_MINIMAP';\n\n/**\n * Toggle mini map\n * @param {string} visible Visibility status\n */\nexport function toggleMiniMap(visible) {\n  return {\n    type: TOGGLE_MINIMAP,\n    visible\n  };\n}\n\nexport const CHANGE_FLAG = 'CHANGE_FLAG';\n\n/**\n * Change the given feature flag\n * @param {string} name The flag name\n * @param {value} value The value to set\n */\nexport function changeFlag(name, value) {\n  return {\n    type: CHANGE_FLAG,\n    name,\n    value\n  };\n}\n","import { CHANGE_FLAG } from '../actions';\n\nfunction flagsReducer(flagsState = {}, action) {\n  switch (action.type) {\n    case CHANGE_FLAG: {\n      return Object.assign({}, flagsState, {\n        [action.name]: action.value\n      });\n    }\n\n    default:\n      return flagsState;\n  }\n}\n\nexport default flagsReducer;\n","// This file contains any web-workers used in the app, which are inlined by\n// webpack + workerize-loader, so that they can be used in the exported library\n// without needing any special configuration on the part of the consumer.\n// Web workers don't work in Jest, so in a test environment we directly import\n// them instead, and then mock up a faux-worker function\n\n/* eslint-disable import/no-webpack-loader-syntax */\n\n// Check for test environment\nconst isTest = typeof jest !== 'undefined';\n\n// Conditionally load task via web worker only in non-test env\nconst graphWorker = isTest\n  ? require('./graph')\n  : require('workerize-loader?inline!./graph');\n\n/**\n * Emulate a web worker for testing purposes\n */\nconst createMockWorker = worker => {\n  if (!isTest) {\n    return worker;\n  }\n  return () => {\n    const mockWorker = {\n      terminate: () => {}\n    };\n    Object.keys(worker).forEach(name => {\n      mockWorker[name] = payload =>\n        new Promise(resolve => resolve(worker[name](payload)));\n    });\n    return mockWorker;\n  };\n};\n\nexport const graph = createMockWorker(graphWorker);\n\n/**\n * Manage the worker, avoiding race conditions by terminating running\n * processes when a new request is made, and reinitialising the instance.\n * Example getJob: (instance, payload) => instance.job(payload)\n * @param {function} worker Init worker and return job functions\n * @param {function} getJob Callback to select correct job function\n * @return {function} Function which returns a promise\n */\nexport function preventWorkerQueues(worker, getJob) {\n  let instance = worker();\n  let running = false;\n\n  return payload => {\n    if (running) {\n      // If worker is already processing a job, cancel it and restart\n      instance.terminate();\n      instance = worker();\n    }\n    running = true;\n\n    return getJob(instance, payload).then(response => {\n      running = false;\n      return response;\n    });\n  };\n}\n","import { graph as worker, preventWorkerQueues } from '../utils/worker';\nimport { toggleGraph } from './index';\n\nexport const TOGGLE_GRAPH_LOADING = 'TOGGLE_GRAPH_LOADING';\n\n/**\n * Toggle whether to display the loading spinner\n * @param {boolean} loading\n */\nexport function toggleLoading(loading) {\n  return {\n    type: TOGGLE_GRAPH_LOADING,\n    loading\n  };\n}\n\nexport const UPDATE_GRAPH_LAYOUT = 'UPDATE_GRAPH_LAYOUT';\n\n/**\n * Update the graph layout object\n * @param {Object} graph\n */\nexport function updateGraph(graph) {\n  return {\n    type: UPDATE_GRAPH_LAYOUT,\n    graph\n  };\n}\n\n/**\n * Choose which layout engine to use based on the oldgraph flag\n * @param {Object} instance Worker parent instance\n * @param {Object} state A subset of main state\n * @return {function} Promise function\n */\nconst chooseLayout = (instance, state) =>\n  state.oldgraph ? instance.graphDagre(state) : instance.graphNew(state);\n\n// Prepare new layout worker\nconst layoutWorker = preventWorkerQueues(worker, chooseLayout);\n\n/**\n * Async action to calculate graph layout in a web worker\n * whiled displaying a loading spinner\n * @param {Object} graphState A subset of main state\n * @return {function} A promise that resolves when the calcuation is done\n */\nexport function calculateGraph(graphState) {\n  if (!graphState) {\n    return updateGraph(graphState);\n  }\n  return async function(dispatch) {\n    dispatch(toggleLoading(true));\n    const graph = await layoutWorker(graphState);\n    dispatch(toggleGraph(true));\n    dispatch(toggleLoading(false));\n    return dispatch(updateGraph(graph));\n  };\n}\n","import { UPDATE_GRAPH_LAYOUT } from '../actions/graph';\n\nfunction nodeReducer(graphState = {}, action) {\n  const updateState = newState => Object.assign({}, graphState, newState);\n\n  switch (action.type) {\n    case UPDATE_GRAPH_LAYOUT: {\n      return updateState(action.graph);\n    }\n\n    default:\n      return graphState;\n  }\n}\n\nexport default nodeReducer;\n","import { TOGGLE_LAYERS } from '../actions';\n\nfunction layerReducer(layerState = {}, action) {\n  switch (action.type) {\n    case TOGGLE_LAYERS: {\n      return Object.assign({}, layerState, {\n        visible: action.visible\n      });\n    }\n\n    default:\n      return layerState;\n  }\n}\n\nexport default layerReducer;\n","export const pathRoot = './api';\n\nexport const localStorageName = 'KedroViz';\n\n// These values are used in both SCSS and JS, and we don't have variable-sharing\n// across Sass and JavaScript, so they're defined in two places. If you update their\n// value here, please also update their corresponding value in src/styles/_variables.scss\nexport const metaSidebarWidth = {\n  breakpoint: 1200,\n  open: 400,\n  closed: 0\n};\nexport const sidebarWidth = {\n  breakpoint: 700,\n  open: 400,\n  closed: 56\n};\n\nexport const chartMinWidth = 1200;\n\n// Remember to update the 'Flags' section in the README when updating these:\nexport const flags = {\n  oldgraph: {\n    description: 'Use older Dagre graphing algorithm',\n    default: false,\n    private: false,\n    icon: ''\n  },\n  lazy: {\n    description: 'Improved sidebar performance',\n    default: false,\n    icon: ''\n  }\n};\n\nexport const sidebar = {\n  Categories: {\n    Tags: 'tag'\n  },\n  Elements: {\n    Nodes: 'task',\n    Datasets: 'data',\n    Parameters: 'parameters'\n  }\n};\n","//--- Useful JS utility functions ---//\n\nimport { pathRoot } from '../config';\n\n/**\n * Loop through an array and output to an object\n * @param {Array} array\n * @param {Function} callback\n */\nexport const arrayToObject = (array, callback) => {\n  const newObject = {};\n  array.forEach(key => {\n    newObject[key] = callback(key);\n  });\n  return newObject;\n};\n\n/**\n * Determine the endpoint URL for loading different data types\n * @param {string} type Data type\n * @param {string=} id Endpoint identifier e.g. pipeline ID\n */\nexport const getUrl = (type, id) => {\n  switch (type) {\n    case 'main':\n      return [pathRoot, 'main'].join('/');\n    case 'pipeline':\n      if (!id) throw new Error('No pipeline ID provided');\n      return [pathRoot, 'pipelines', id].join('/');\n    case 'nodes':\n      if (!id) throw new Error('No node ID provided');\n      return [pathRoot, 'nodes', id].join('/');\n    default:\n      throw new Error('Unknown URL type');\n  }\n};\n\n/**\n * Filter duplicate values from an array\n * @param {any} d Datum\n * @param {number} i Index\n * @param {Array} arr The array to remove duplicate values from\n */\nexport const unique = (d, i, arr) => arr.indexOf(d) === i;\n\n/**\n * Returns true if any of the given props are different between given objects.\n * Only shallow changes are detected.\n * @param {Array} props The prop names to check\n * @param {object} objectA The first object\n * @param {object} objectB The second object\n * @returns {boolean} True if any prop changed else false\n */\nexport const changed = (props, objectA, objectB) => {\n  return (\n    objectA && objectB && props.some(prop => objectA[prop] !== objectB[prop])\n  );\n};\n","import { json } from 'd3-fetch';\nimport { getUrl } from '../utils';\n\n/**\n * Asynchronously load and parse data from json file using d3-fetch.\n * Throws an error if the request for `main` fails.\n * For requests other than `main`, returns the given or default fallback response.\n * @param {string} path JSON file location. Defaults to main data url from config.js\n * @param {object} fallback The fallback response object on request failure. Default `{}`.\n * @return {function} A promise that will return when the file is loaded and parsed\n */\nconst loadJsonData = (path = getUrl('main'), fallback = {}) =>\n  json(path).catch(() => {\n    const fullPath = `/public${path.substr(1)}`;\n\n    // For main route throw a user error\n    if (path === getUrl('main')) {\n      throw new Error(\n        `Unable to load data from ${path}. If you're running Kedro-Viz as a standalone (e.g. for JavaScript development), please check that you have placed a data file at ${fullPath}.`\n      );\n    }\n\n    return new Promise(resolve => resolve(fallback));\n  });\n\nexport default loadJsonData;\n","import { localStorageName } from '../config';\n\nconst noWindow = typeof window === 'undefined';\n\n/**\n * Retrieve state data from localStorage\n * @return {Object} State\n */\nexport const loadState = () => {\n  if (noWindow) {\n    return {};\n  }\n  try {\n    const serializedState = window.localStorage.getItem(localStorageName);\n    if (serializedState === null) {\n      return {};\n    }\n    return JSON.parse(serializedState);\n  } catch (err) {\n    console.error(err);\n    return {};\n  }\n};\n\n/**\n * Save updated state to localStorage\n * @param {Object} state New state object\n */\nexport const saveState = state => {\n  if (noWindow) {\n    return;\n  }\n  try {\n    const newState = Object.assign(loadState(), state);\n    // Remove deprecated key from localStorage to suppress error.\n    // This can be removed in future versions of KedroViz:\n    if (newState.hasOwnProperty('nodeTypeDisabled')) {\n      delete newState.nodeTypeDisabled;\n    }\n    const serializedState = JSON.stringify(newState);\n    window.localStorage.setItem(localStorageName, serializedState);\n  } catch (err) {\n    console.error(err);\n  }\n};\n\n/**\n * Remove unnecessary keys to prevent them being stored in state forever\n * @param {object} obj An object containing keys and booleans\n * @return {object} A new clone object but with the falsey keys removed\n */\nexport const pruneFalseyKeys = obj => {\n  const newObj = {};\n  for (let key in obj) {\n    if (obj.hasOwnProperty(key) && obj[key]) {\n      newObj[key] = obj[key];\n    }\n  }\n  return newObj;\n};\n","import { arrayToObject } from '../utils';\n\n/**\n * Create new default pipeline state instance\n * @return {object} state\n */\nexport const createInitialPipelineState = () => ({\n  pipeline: {\n    ids: [],\n    name: {}\n  },\n  node: {\n    ids: [],\n    name: {},\n    fullName: {},\n    type: {},\n    tags: {},\n    layer: {},\n    disabled: {},\n    pipelines: {},\n    clicked: null,\n    hovered: null,\n    fetched: {},\n    code: {},\n    docstring: {},\n    parameters: {},\n    filepath: {},\n    datasetType: {}\n  },\n  nodeType: {\n    ids: ['task', 'data', 'parameters'],\n    name: {\n      data: 'Datasets',\n      task: 'Nodes',\n      parameters: 'Parameters'\n    },\n    disabled: {}\n  },\n  edge: {\n    ids: [],\n    sources: {},\n    targets: {}\n  },\n  layer: {\n    ids: [],\n    name: {},\n    visible: true\n  },\n  tag: {\n    ids: [],\n    name: {},\n    active: {},\n    enabled: {}\n  }\n});\n\n/**\n * Check whether data is in expected format\n * @param {Object} data - The parsed data input\n * @return {Boolean} True if valid for formatting\n */\nconst validateInput = data => {\n  if (!data) {\n    throw new Error('No data provided to Kedro-Viz');\n  }\n  if (data === 'json') {\n    // Data is still loading\n    return false;\n  }\n  if (!Array.isArray(data.edges) || !Array.isArray(data.nodes)) {\n    if (typeof jest === 'undefined') {\n      console.error('Invalid Kedro-Viz data:', data);\n    }\n    throw new Error(\n      'Invalid Kedro-Viz data input. Please ensure that your pipeline data includes arrays of nodes and edges'\n    );\n  }\n  return true;\n};\n\n/**\n * Get unique, reproducible ID for each edge, based on its nodes\n * @param {Object} source - Name and type of the source node\n * @param {Object} target - Name and type of the target node\n */\nconst createEdgeID = (source, target) => [source, target].join('|');\n\n/**\n * Add a new pipeline\n * @param {string} pipeline.id - Unique ID\n * @param {string} pipeline.name - Pipeline name\n */\nconst addPipeline = state => pipeline => {\n  const { id } = pipeline;\n  if (state.pipeline.name[id]) {\n    return;\n  }\n  state.pipeline.ids.push(id);\n  state.pipeline.name[id] = pipeline.name;\n};\n\n/**\n * Add a new node if it doesn't already exist\n * @param {string} name - Default node name\n * @param {string} type - 'data' or 'task'\n * @param {Array} tags - List of associated tags\n */\nconst addNode = state => node => {\n  const { id } = node;\n  if (state.node.name[id]) {\n    return;\n  }\n  state.node.ids.push(id);\n  state.node.name[id] = node.name;\n  state.node.fullName[id] = node.full_name || node.name;\n  state.node.type[id] = node.type;\n  state.node.layer[id] = node.layer;\n  state.node.pipelines[id] = node.pipelines\n    ? arrayToObject(node.pipelines, () => true)\n    : {};\n  state.node.tags[id] = node.tags || [];\n  // supports for metadata in case it exists on initial load\n  state.node.code[id] = node.code;\n  state.node.docstring[id] = node.docstring;\n  state.node.parameters[id] = node.parameters;\n  state.node.filepath[id] = node.filepath;\n  state.node.datasetType[id] = node.datasetType;\n};\n\n/**\n * Create a new link between two nodes and add it to the edges array\n * @param {Object} source - Parent node\n * @param {Object} target - Child node\n */\nconst addEdge = state => ({ source, target }) => {\n  const id = createEdgeID(source, target);\n  if (state.edge.ids.includes(id)) {\n    return;\n  }\n  state.edge.ids.push(id);\n  state.edge.sources[id] = source;\n  state.edge.targets[id] = target;\n};\n\n/**\n * Add a new Tag if it doesn't already exist\n * @param {Object} tag - Tag object\n */\nconst addTag = state => tag => {\n  const { id } = tag;\n  state.tag.ids.push(id);\n  state.tag.name[id] = tag.name;\n};\n\n/**\n * Add a new Layer if it doesn't already exist\n * @param {Object} layer - Layer object\n */\nconst addLayer = state => layer => {\n  // using layer name as both layerId and name.\n  // It futureproofs it if we need a separate layer ID in the future.\n  state.layer.ids.push(layer);\n  state.layer.name[layer] = layer;\n};\n\n/**\n * Convert the pipeline data into a normalized state object\n * @param {Object} data Raw unformatted data input\n * @return {Object} Formatted, normalized state\n */\nconst normalizeData = data => {\n  const state = createInitialPipelineState();\n\n  if (data === 'json') {\n    state.asyncDataSource = true;\n  }\n\n  if (!validateInput(data)) {\n    return state;\n  }\n\n  data.nodes.forEach(addNode(state));\n  data.edges.forEach(addEdge(state));\n  if (data.pipelines) {\n    data.pipelines.forEach(addPipeline(state));\n    if (state.pipeline.ids.length) {\n      state.pipeline.main = data.selected_pipeline || state.pipeline.ids[0];\n      state.pipeline.active = state.pipeline.main;\n    }\n  }\n  if (data.tags) {\n    data.tags.forEach(addTag(state));\n  }\n  if (data.layers) {\n    data.layers.forEach(addLayer(state));\n  }\n\n  return state;\n};\n\nexport default normalizeData;\n","import { flags as flagsConfig } from '../config';\n\n/**\n * Flag definitions\n */\nexport const Flags = {\n  /**\n   * Returns `true` if the flag is defined otherwise `false`\n   * @param {string} name The flag name to test\n   * @returns {boolean} The result\n   */\n  isDefined: name => Flags.names().includes(name),\n\n  /**\n   * Returns an array of defined flag names\n   * @returns {array} The defined flag names\n   */\n  names: () => Object.keys(flagsConfig),\n\n  /**\n   * Returns an object mapping flag names to their default values\n   * @returns {object} The defined flag defaults\n   */\n  defaults: () =>\n    Flags.names().reduce(\n      (result, flag) =>\n        Object.assign(result, { [flag]: flagsConfig[flag].default }),\n      {}\n    )\n};\n\n/**\n * Returns an object with flags as set in given or current URL\n * @param {string=} url The URL (optional, default current location)\n * @returns {object} An object with flags and their values\n */\nexport const getFlagsFromUrl = url => {\n  const flags = {};\n\n  let urlParams;\n  try {\n    urlParams = new URL(url || document.location.href).searchParams;\n  } catch (e) {\n    console.warn('Feature flags are not supported in this browser');\n    return flags;\n  }\n\n  [...urlParams].forEach(([name, value]) =>\n    Flags.isDefined(name)\n      ? (flags[name] = value === 'true' || value === '1' || value === '')\n      : null\n  );\n\n  return flags;\n};\n\n/**\n * Returns a user info message describing the status of all defined flags\n * @param {object} flagsEnabled An object mapping of flag status\n * @returns {string} The info message\n */\nexport const getFlagsMessage = flagsEnabled => {\n  const allNames = Flags.names();\n\n  if (allNames.length > 0) {\n    let info = 'Experimental features \\n';\n\n    allNames.forEach(name => {\n      if (flagsConfig[name].private) {\n        return;\n      }\n      const isEnabled = flagsEnabled[name];\n      const status = isEnabled ? 'Enabled' : 'Disabled';\n      const statusIcon = isEnabled ? '' : '';\n      const icon = flagsConfig[name].icon;\n      const description = flagsConfig[name].description;\n      info += `\\n${statusIcon} ${icon} \"${name}\"  ${description}  ${status}`;\n    });\n\n    info += `\\n\\nSee docs on flags for more info `;\n    info += `\\nhttps://github.com/quantumblacklabs/kedro-viz#flags`;\n\n    return info;\n  }\n};\n","import deepmerge from 'deepmerge';\nimport { loadState } from './helpers';\nimport normalizeData from './normalize-data';\nimport { getFlagsFromUrl, Flags } from '../utils/flags';\n\n/**\n * Create new default state instance for properties that aren't overridden\n * when the pipeline is reset with new data via the App component's data prop\n * @return {object} state\n */\nexport const createInitialState = () => ({\n  chartSize: {},\n  flags: Flags.defaults(),\n  textLabels: true,\n  theme: 'dark',\n  loading: {\n    graph: false,\n    pipeline: false,\n    node: false\n  },\n  visible: {\n    graph: true,\n    labelBtn: true,\n    layerBtn: true,\n    exportBtn: true,\n    exportModal: false,\n    sidebar: true,\n    themeBtn: true,\n    miniMapBtn: true,\n    miniMap: true\n  },\n  zoom: {}\n});\n\n/**\n * Load values from localStorage and combine with existing state,\n * but filter out any unused values from localStorage\n * @param {object} state Initial/extant state\n * @return {object} Combined state from localStorage\n */\nexport const mergeLocalStorage = state => {\n  const localStorageState = loadState();\n  Object.keys(localStorageState).forEach(key => {\n    if (!state[key]) {\n      delete localStorageState[key];\n    }\n  });\n  return deepmerge(state, localStorageState);\n};\n\n/**\n * Prepare the pipeline data part of the state by normalizing the raw data,\n * and applying saved state from localStorage.\n * This part is separated so that it can be reset without overriding user settings,\n * because it can be run both on initial state load and again later on.\n * The applyFixes part should only ever be run once, on first load.\n * Exactly when it runs depends on whether the data is loaded asynchronously or not.\n * @param {object} data Data prop passed to App component\n * @param {boolean} applyFixes Whether to override initialState\n */\nexport const preparePipelineState = (data, applyFixes) => {\n  const state = mergeLocalStorage(normalizeData(data));\n  if (applyFixes) {\n    // Use main pipeline if active pipeline from localStorage isn't recognised\n    if (!state.pipeline.ids.includes(state.pipeline.active)) {\n      state.pipeline.active = state.pipeline.main;\n    }\n  }\n  return state;\n};\n\n/**\n * Prepare the non-pipeline data part of the state. This part is separated so that it\n * will persist if the pipeline data is reset.\n * Merge local storage and add custom state overrides from props etc\n * @param {object} props Props passed to App component\n * @return {object} Updated initial state\n */\nexport const prepareNonPipelineState = props => {\n  const state = mergeLocalStorage(createInitialState());\n\n  return {\n    ...state,\n    flags: { ...state.flags, ...getFlagsFromUrl() },\n    theme: props.theme || state.theme,\n    visible: { ...state.visible, ...props.visible }\n  };\n};\n\n/**\n * Configure the redux store's initial state, by merging default values\n * with normalised pipeline data and localStorage\n * @param {object} props App component props\n * @return {object} Initial state\n */\nconst getInitialState = (props = {}) => ({\n  ...prepareNonPipelineState(props),\n  ...preparePipelineState(props.data, props.data !== 'json')\n});\n\nexport default getInitialState;\n","import { getUrl } from '../utils';\nimport loadJsonData from '../store/load-data';\nimport { preparePipelineState } from '../store/initial-state';\nimport { resetData, toggleGraph } from './index';\n\n/**\n * This file contains actions that update the active pipeline, and if loading data\n * asynchronously, they also handle loading this pipeline data from different endpoints.\n *\n * Many different cases need to be addressed, including:\n * 1. Loading data synchronously, or asynchonously.\n * 2. Loading data and updating the pipeline on first page load, or on user actions.\n * 3. Whether the dataset has pipelines defined in it, or not.\n * 4. Whether localStorage has an active pipeline already defined.\n * 5. If so, whether it exists in the current dataset.\n * 6. Whether the requested endpoint is the 'main' one, or not.\n *\n * These are mostly handled either within this file, in the preparePipelineState\n * utility, or in the getNodeDisabledPipeline selector. Please see their tests\n * for more info about implementation requirements.\n */\n\nexport const UPDATE_ACTIVE_PIPELINE = 'UPDATE_ACTIVE_PIPELINE';\n\n/**\n * Update the actively-selected pipeline\n * @param {string} pipeline Pipeline ID\n */\nexport function updateActivePipeline(pipeline) {\n  return {\n    type: UPDATE_ACTIVE_PIPELINE,\n    pipeline\n  };\n}\n\nexport const TOGGLE_PIPELINE_LOADING = 'TOGGLE_PIPELINE_LOADING';\n\n/**\n * Toggle whether to display the loading spinner\n * @param {boolean} loading True if pipeline is still loading\n */\nexport function toggleLoading(loading) {\n  return {\n    type: TOGGLE_PIPELINE_LOADING,\n    loading\n  };\n}\n\n/**\n * Determine where to load data from\n * @param {object} pipeline Pipeline state\n */\nexport const getPipelineUrl = pipeline => {\n  if (pipeline.active === pipeline.main) {\n    return getUrl('main');\n  }\n  return getUrl('pipeline', pipeline.active);\n};\n\n/**\n * Check whether another async data pipeline request is needed on first page-load.\n * A second request is typically only required when an active pipeline is set in\n * localStorage, and it's not the 'main' pipeline endpoint.\n * @param {object} pipeline Pipeline state\n * @return {boolean} True if another request is needed\n */\nexport const requiresSecondRequest = pipeline => {\n  // Pipelines are not present in the data\n  if (!pipeline.ids.length || !pipeline.main) return false;\n  // There is no active pipeline set\n  if (!pipeline.active) return false;\n  // The active pipeline is not 'main'\n  return pipeline.active !== pipeline.main;\n};\n\n/**\n * Load pipeline data on initial page-load\n * @return {function} A promise that resolves when the data is loaded\n */\nexport function loadInitialPipelineData() {\n  return async function(dispatch, getState) {\n    // Get a copy of the full state from the store\n    const state = getState();\n    // If data is passed synchronously then this process isn't necessary\n    if (!state.asyncDataSource) {\n      return;\n    }\n    dispatch(toggleLoading(true));\n    // Load 'main' data file. This is always loaded first, because it's needed\n    // in order to obtain the list of pipelines, which is required for determining\n    // whether the active pipeline (from localStorage) exists in the data.\n    const url = getUrl('main');\n    let newState = await loadJsonData(url).then(data =>\n      preparePipelineState(data, true)\n    );\n    // If the active pipeline isn't 'main' then request data from new URL\n    if (requiresSecondRequest(newState.pipeline)) {\n      const url = getPipelineUrl(newState.pipeline);\n      newState = await loadJsonData(url).then(preparePipelineState);\n    }\n    dispatch(resetData(newState));\n    dispatch(toggleLoading(false));\n  };\n}\n\n/**\n * Change pipeline on selection, loading new data if necessary\n * @param {string} pipelineID Unique ID for new pipeline\n * @return {function} A promise that resolves when the data is loaded\n */\nexport function loadPipelineData(pipelineID) {\n  return async function(dispatch, getState) {\n    const { asyncDataSource, pipeline } = getState();\n    if (pipelineID && pipelineID === pipeline.active) {\n      return;\n    }\n    if (asyncDataSource) {\n      dispatch(toggleLoading(true));\n      // Remove the previous graph to show that a new pipeline is being loaded\n      dispatch(toggleGraph(false));\n      const url = getPipelineUrl({\n        main: pipeline.main,\n        active: pipelineID\n      });\n      const newState = await loadJsonData(url).then(preparePipelineState);\n      // Set active pipeline here rather than dispatching two separate actions,\n      // to improve performance by only requiring one state recalculation\n      newState.pipeline.active = pipelineID;\n      dispatch(resetData(newState));\n      dispatch(toggleLoading(false));\n    } else {\n      dispatch(updateActivePipeline(pipelineID));\n    }\n  };\n}\n","import { getUrl } from '../utils';\nimport loadJsonData from '../store/load-data';\n\nexport const TOGGLE_NODE_CLICKED = 'TOGGLE_NODE_CLICKED';\n\n/**\n * Update the value of the currently-active clicked node\n * @param {string|null} nodeClicked The node's unique identifier\n */\nexport function toggleNodeClicked(nodeClicked) {\n  return {\n    type: TOGGLE_NODE_CLICKED,\n    nodeClicked\n  };\n}\n\nexport const TOGGLE_NODES_DISABLED = 'TOGGLE_NODES_DISABLED';\n\n/**\n * Toggle a selected group of nodes' visibility on/off\n * @param {Array} nodeIDs The nodes' unique identifiers\n * @param {Boolean} isDisabled Whether the node should be visible\n */\nexport function toggleNodesDisabled(nodeIDs, isDisabled) {\n  return {\n    type: TOGGLE_NODES_DISABLED,\n    nodeIDs,\n    isDisabled\n  };\n}\n\nexport const TOGGLE_NODE_HOVERED = 'TOGGLE_NODE_HOVERED';\n\n/**\n * Update the value of the currently-active hovered node\n * @param {string|null} nodeHovered The node's unique identifier\n */\nexport function toggleNodeHovered(nodeHovered) {\n  return {\n    type: TOGGLE_NODE_HOVERED,\n    nodeHovered\n  };\n}\n\nexport const TOGGLE_NODE_DATA_LOADING = 'TOGGLE_NODE_DATA_LOADING';\n\n/**\n * Toggle whether to display the loading spinner\n * @param {boolean} loading True if pipeline is still loading\n */\nexport function toggleNodeDataLoading(loading) {\n  return {\n    type: TOGGLE_NODE_DATA_LOADING,\n    loading\n  };\n}\n\nexport const ADD_NODE_METADATA = 'ADD_NODE_METADATA';\n\n/**\n * Toggle whether to display the loading spinner\n * @param {boolean} loading True if pipeline is still loading\n */\nexport function addNodeMetadata(data) {\n  return {\n    type: ADD_NODE_METADATA,\n    data\n  };\n}\n\n/**\n * update node metadata on selection, loading new data if it has not been previously called\n * @param {string} nodeID node id of clicked node\n * @return {function} A promise that resolves when the data is loaded\n */\nexport function loadNodeData(nodeID) {\n  return async function(dispatch, getState) {\n    const { asyncDataSource, node } = getState();\n\n    dispatch(toggleNodeClicked(nodeID));\n\n    if (asyncDataSource && nodeID && !node.fetched[nodeID]) {\n      dispatch(toggleNodeDataLoading(true));\n      const url = getUrl('nodes', nodeID);\n      const nodeData = await loadJsonData(url);\n      dispatch(addNodeMetadata({ id: nodeID, data: nodeData }));\n      dispatch(toggleNodeDataLoading(false));\n    }\n  };\n}\n","import { TOGGLE_GRAPH_LOADING } from '../actions/graph';\nimport { TOGGLE_PIPELINE_LOADING } from '../actions/pipelines';\nimport { TOGGLE_NODE_DATA_LOADING } from '../actions/nodes';\n\nfunction loadingReducer(loadingState = {}, action) {\n  switch (action.type) {\n    case TOGGLE_PIPELINE_LOADING: {\n      return Object.assign({}, loadingState, {\n        pipeline: action.loading\n      });\n    }\n\n    case TOGGLE_GRAPH_LOADING: {\n      return Object.assign({}, loadingState, {\n        graph: action.loading\n      });\n    }\n\n    case TOGGLE_NODE_DATA_LOADING: {\n      return Object.assign({}, loadingState, {\n        node: action.loading\n      });\n    }\n\n    default:\n      return loadingState;\n  }\n}\n\nexport default loadingReducer;\n","import {\n  TOGGLE_NODE_CLICKED,\n  TOGGLE_NODES_DISABLED,\n  TOGGLE_NODE_HOVERED,\n  ADD_NODE_METADATA\n} from '../actions/nodes';\nimport { UPDATE_ACTIVE_PIPELINE } from '../actions/pipelines';\n\nfunction nodeReducer(nodeState = {}, action) {\n  const updateState = newState => Object.assign({}, nodeState, newState);\n\n  switch (action.type) {\n    case TOGGLE_NODE_CLICKED: {\n      return updateState({\n        clicked: action.nodeClicked\n      });\n    }\n\n    case TOGGLE_NODES_DISABLED: {\n      return updateState({\n        clicked: action.nodeIDs.includes(nodeState.clicked)\n          ? null\n          : nodeState.clicked,\n        disabled: action.nodeIDs.reduce(\n          (disabled, id) =>\n            Object.assign({}, disabled, {\n              [id]: action.isDisabled\n            }),\n          nodeState.disabled\n        )\n      });\n    }\n\n    case TOGGLE_NODE_HOVERED: {\n      return updateState({\n        hovered: action.nodeHovered\n      });\n    }\n\n    case UPDATE_ACTIVE_PIPELINE: {\n      return updateState({\n        clicked: null,\n        hovered: null\n      });\n    }\n\n    case ADD_NODE_METADATA: {\n      const { id, data } = action.data;\n      return updateState({\n        fetched: Object.assign({}, nodeState.fetched, {\n          [id]: true\n        }),\n        code: Object.assign({}, nodeState.code, {\n          [id]: data.code\n        }),\n        filepath: Object.assign({}, nodeState.filepath, {\n          [id]: data.filepath\n        }),\n        docstring: Object.assign({}, nodeState.docstring, {\n          [id]: data.docstring\n        }),\n        parameters: Object.assign({}, nodeState.parameters, {\n          [id]: data.parameters\n        }),\n        // the data returned from the API under the field name 'type' for dataset type nodes\n        datasetType: Object.assign({}, nodeState.datasetType, {\n          [id]: data.type\n        })\n      });\n    }\n\n    default:\n      return nodeState;\n  }\n}\n\nexport default nodeReducer;\n","import { TOGGLE_TYPE_DISABLED } from '../actions/node-type';\n\nfunction nodeTypeReducer(nodeTypeState = {}, action) {\n  switch (action.type) {\n    case TOGGLE_TYPE_DISABLED: {\n      return Object.assign({}, nodeTypeState, {\n        disabled: Object.assign({}, nodeTypeState.disabled, {\n          [action.typeID]: action.disabled\n        })\n      });\n    }\n    default:\n      return nodeTypeState;\n  }\n}\n\nexport default nodeTypeReducer;\n","export const TOGGLE_TYPE_DISABLED = 'TOGGLE_TYPE_DISABLED';\n\n/**\n * Toggle a node-type's visibility on/off\n * @param {string} typeID Type id\n * @param {Boolean} disabled True if type is disabled\n */\nexport function toggleTypeDisabled(typeID, disabled) {\n  return {\n    type: TOGGLE_TYPE_DISABLED,\n    typeID,\n    disabled\n  };\n}\n","import { UPDATE_ACTIVE_PIPELINE } from '../actions/pipelines';\n\nfunction pipelineReducer(pipelineState = {}, action) {\n  switch (action.type) {\n    case UPDATE_ACTIVE_PIPELINE: {\n      return Object.assign({}, pipelineState, {\n        active: action.pipeline\n      });\n    }\n\n    default:\n      return pipelineState;\n  }\n}\n\nexport default pipelineReducer;\n","import { TOGGLE_TAG_ACTIVE, TOGGLE_TAG_FILTER } from '../actions/tags';\n\nfunction tagReducer(tagState = {}, action) {\n  const updateState = newState => Object.assign({}, tagState, newState);\n\n  /**\n   * Batch update tags from an array of tag IDs\n   * @param {string} key Tag action value prop\n   */\n  const batchChanges = key =>\n    action.tagIDs.reduce((result, tagID) => {\n      result[tagID] = action[key];\n      return result;\n    }, {});\n\n  switch (action.type) {\n    case TOGGLE_TAG_ACTIVE: {\n      return updateState({\n        active: Object.assign({}, tagState.active, batchChanges('active'))\n      });\n    }\n\n    case TOGGLE_TAG_FILTER: {\n      return updateState({\n        enabled: Object.assign({}, tagState.enabled, batchChanges('enabled'))\n      });\n    }\n\n    default:\n      return tagState;\n  }\n}\n\nexport default tagReducer;\n","export const TOGGLE_TAG_ACTIVE = 'TOGGLE_TAG_ACTIVE';\n\n/**\n * Toggle a tag's highlighting on/off (or array of tags)\n * @param {string|Array} tagIDs Tag id(s)\n * @param {Boolean} active True if tag(s) active\n */\nexport function toggleTagActive(tagIDs, active) {\n  return {\n    type: TOGGLE_TAG_ACTIVE,\n    tagIDs: Array.isArray(tagIDs) ? tagIDs : [tagIDs],\n    active\n  };\n}\n\nexport const TOGGLE_TAG_FILTER = 'TOGGLE_TAG_FILTER';\n\n/**\n * Toggle a tag's filtering on/off (or array of tags)\n * @param {string|Array} tagIDs Tag id(s)\n * @param {Boolean} enabled True if tag(s) enabled\n */\nexport function toggleTagFilter(tagIDs, enabled) {\n  return {\n    type: TOGGLE_TAG_FILTER,\n    tagIDs: Array.isArray(tagIDs) ? tagIDs : [tagIDs],\n    enabled\n  };\n}\n","import {\n  TOGGLE_GRAPH,\n  TOGGLE_EXPORT_MODAL,\n  TOGGLE_LAYERS,\n  TOGGLE_SIDEBAR,\n  TOGGLE_MINIMAP\n} from '../actions';\n\nfunction visibleReducer(visibleState = {}, action) {\n  switch (action.type) {\n    case TOGGLE_GRAPH: {\n      return Object.assign({}, visibleState, {\n        graph: action.visible\n      });\n    }\n\n    case TOGGLE_EXPORT_MODAL: {\n      return Object.assign({}, visibleState, {\n        exportModal: action.visible\n      });\n    }\n\n    case TOGGLE_LAYERS: {\n      return Object.assign({}, visibleState, {\n        layers: action.visible\n      });\n    }\n\n    case TOGGLE_SIDEBAR: {\n      return Object.assign({}, visibleState, {\n        sidebar: action.visible\n      });\n    }\n\n    case TOGGLE_MINIMAP: {\n      return Object.assign({}, visibleState, {\n        miniMap: action.visible\n      });\n    }\n\n    default:\n      return visibleState;\n  }\n}\n\nexport default visibleReducer;\n","import { combineReducers } from 'redux';\nimport flags from './flags';\nimport graph from './graph';\nimport layer from './layers';\nimport loading from './loading';\nimport node from './nodes';\nimport nodeType from './node-type';\nimport pipeline from './pipeline';\nimport tag from './tags';\nimport visible from './visible';\nimport {\n  RESET_DATA,\n  TOGGLE_TEXT_LABELS,\n  TOGGLE_THEME,\n  UPDATE_CHART_SIZE,\n  UPDATE_ZOOM,\n  UPDATE_FONT_LOADED\n} from '../actions';\n\n/**\n * Create a generic reducer\n * @param {*} initialState Default state\n * @param {string} type Action type\n * @param {string} key Action payload key\n * @return {*} Updated state\n */\nconst createReducer = (initialState, type, key) => (\n  state = initialState,\n  action\n) => {\n  if (typeof key !== 'undefined' && action.type === type) {\n    return action[key];\n  }\n  return state;\n};\n\n/**\n * Reset/update application-wide data\n * @param {Object} state Complete app state\n * @param {Object} action Redux action\n * @return {Object} Updated(?) state\n */\nfunction resetDataReducer(state = {}, action) {\n  if (action.type === RESET_DATA) {\n    return Object.assign({}, state, action.data);\n  }\n  return state;\n}\n\nconst combinedReducer = combineReducers({\n  // These props have their own reducers in other files\n  flags,\n  graph,\n  layer,\n  loading,\n  node,\n  nodeType,\n  pipeline,\n  tag,\n  visible,\n  // These props don't have any actions associated with them\n  asyncDataSource: createReducer(false),\n  edge: createReducer({}),\n  id: createReducer(null),\n  // These props have very simple non-nested actions\n  chartSize: createReducer({}, UPDATE_CHART_SIZE, 'chartSize'),\n  zoom: createReducer({}, UPDATE_ZOOM, 'zoom'),\n  fontLoaded: createReducer(false, UPDATE_FONT_LOADED, 'fontLoaded'),\n  textLabels: createReducer(true, TOGGLE_TEXT_LABELS, 'textLabels'),\n  theme: createReducer('dark', TOGGLE_THEME, 'theme')\n});\n\nconst rootReducer = (state, action) =>\n  combinedReducer(resetDataReducer(state, action), action);\n\nexport default rootReducer;\n","import { createSelector } from 'reselect';\nimport { arrayToObject } from '../utils';\n\nconst getNodeIDs = state => state.node.ids;\nconst getNodePipelines = state => state.node.pipelines;\nconst getActivePipeline = state => state.pipeline.active;\nconst getNodeTags = state => state.node.tags;\nconst getAsyncDataSource = state => state.asyncDataSource;\n\n/**\n * Calculate whether nodes should be disabled based on their tags\n */\nexport const getNodeDisabledPipeline = createSelector(\n  [getNodeIDs, getNodePipelines, getActivePipeline, getAsyncDataSource],\n  (nodeIDs, nodePipelines, activePipeline, asyncDataSource) => {\n    if (asyncDataSource || !activePipeline) {\n      return {};\n    }\n    return arrayToObject(\n      nodeIDs,\n      nodeID => !nodePipelines[nodeID][activePipeline]\n    );\n  }\n);\n\n/**\n * Get a list of just the IDs for the active pipeline\n */\nexport const getPipelineNodeIDs = createSelector(\n  [getNodeIDs, getNodeDisabledPipeline],\n  (nodeIDs, nodeDisabledPipeline) =>\n    nodeIDs.filter(nodeID => !nodeDisabledPipeline[nodeID])\n);\n\n/**\n * Get IDs of tags used in the current pipeline\n */\nexport const getPipelineTagIDs = createSelector(\n  [getPipelineNodeIDs, getNodeTags],\n  (nodeIDs, nodeTags) => {\n    const visibleTags = {};\n    nodeIDs.forEach(nodeID => {\n      nodeTags[nodeID].forEach(tagID => {\n        if (!visibleTags[tagID]) {\n          visibleTags[tagID] = true;\n        }\n      });\n    });\n    return Object.keys(visibleTags);\n  }\n);\n","import { createSelector } from 'reselect';\nimport { getPipelineTagIDs } from './pipeline';\n\nconst getTagName = state => state.tag.name;\nconst getTagActive = state => state.tag.active;\nconst getTagEnabled = state => state.tag.enabled;\n\n/**\n * Retrieve the formatted list of tag filters\n */\nexport const getTagData = createSelector(\n  [getPipelineTagIDs, getTagName, getTagActive, getTagEnabled],\n  (tagIDs, tagName, tagActive, tagEnabled) =>\n    tagIDs.sort().map(id => ({\n      id,\n      name: tagName[id],\n      active: Boolean(tagActive[id]),\n      enabled: Boolean(tagEnabled[id])\n    }))\n);\n\n/**\n * Get the total and enabled number of tags\n */\nexport const getTagCount = createSelector(\n  [getPipelineTagIDs, getTagEnabled],\n  (tagIDs, tagEnabled) => ({\n    total: tagIDs.length,\n    enabled: tagIDs.filter(id => tagEnabled[id]).length\n  })\n);\n","import { createSelector } from 'reselect';\nimport { arrayToObject } from '../utils';\nimport { getNodeDisabledPipeline, getPipelineNodeIDs } from './pipeline';\nimport { getTagCount } from './tags';\n\nconst getNodeIDs = state => state.node.ids;\nconst getNodeDisabledNode = state => state.node.disabled;\nconst getNodeTags = state => state.node.tags;\nconst getNodeType = state => state.node.type;\nconst getTagEnabled = state => state.tag.enabled;\nconst getNodeTypeDisabled = state => state.nodeType.disabled;\nconst getEdgeIDs = state => state.edge.ids;\nconst getEdgeSources = state => state.edge.sources;\nconst getEdgeTargets = state => state.edge.targets;\nconst getLayerIDs = state => state.layer.ids;\nconst getLayersVisible = state => state.layer.visible;\nconst getNodeLayer = state => state.node.layer;\n\n/**\n * Calculate whether nodes should be disabled based on their tags\n */\nexport const getNodeDisabledTag = createSelector(\n  [getNodeIDs, getTagEnabled, getTagCount, getNodeTags],\n  (nodeIDs, tagEnabled, tagCount, nodeTags) =>\n    arrayToObject(nodeIDs, nodeID => {\n      if (tagCount.enabled === 0) {\n        return false;\n      }\n      if (nodeTags[nodeID].length) {\n        // Hide task nodes that don't have at least one tag filter enabled\n        return !nodeTags[nodeID].some(tag => tagEnabled[tag]);\n      }\n      return true;\n    })\n);\n\n/**\n * Set disabled status if the node is specifically hidden, and/or via a tag/view/type\n */\nexport const getNodeDisabled = createSelector(\n  [\n    getNodeIDs,\n    getNodeDisabledNode,\n    getNodeDisabledTag,\n    getNodeDisabledPipeline,\n    getNodeType,\n    getNodeTypeDisabled\n  ],\n  (\n    nodeIDs,\n    nodeDisabledNode,\n    nodeDisabledTag,\n    nodeDisabledPipeline,\n    nodeType,\n    typeDisabled\n  ) =>\n    arrayToObject(nodeIDs, id =>\n      [\n        nodeDisabledNode[id],\n        nodeDisabledTag[id],\n        nodeDisabledPipeline[id],\n        typeDisabled[nodeType[id]]\n      ].some(Boolean)\n    )\n);\n\n/**\n * Get a list of just the IDs for the remaining visible nodes\n */\nexport const getVisibleNodeIDs = createSelector(\n  [getPipelineNodeIDs, getNodeDisabled],\n  (nodeIDs, nodeDisabled) => nodeIDs.filter(id => !nodeDisabled[id])\n);\n\n/**\n * Get a list of just the IDs for the remaining visible layers\n */\nexport const getVisibleLayerIDs = createSelector(\n  [getVisibleNodeIDs, getNodeLayer, getLayerIDs, getLayersVisible],\n  (nodeIDs, nodeLayer, layerIDs, layersVisible) => {\n    if (!layersVisible) {\n      return [];\n    }\n    const visibleLayerIDs = {};\n    for (const nodeID of nodeIDs) {\n      visibleLayerIDs[nodeLayer[nodeID]] = true;\n    }\n    return layerIDs.filter(layerID => visibleLayerIDs[layerID]);\n  }\n);\n\n/**\n * Determine whether an edge should be disabled based on their source/target nodes\n */\nexport const getEdgeDisabled = createSelector(\n  [getEdgeIDs, getNodeDisabled, getEdgeSources, getEdgeTargets],\n  (edgeIDs, nodeDisabled, edgeSources, edgeTargets) =>\n    arrayToObject(edgeIDs, edgeID => {\n      const source = edgeSources[edgeID];\n      const target = edgeTargets[edgeID];\n      return Boolean(nodeDisabled[source] || nodeDisabled[target]);\n    })\n);\n","import { createSelector } from 'reselect';\nimport { getNodeDisabled, getEdgeDisabled } from './disabled';\n\nconst getNodeIDs = state => state.node.ids;\nconst getEdgeIDs = state => state.edge.ids;\nconst getEdgeSources = state => state.edge.sources;\nconst getEdgeTargets = state => state.edge.targets;\n\n/**\n * Create a new transitive edge from the first and last edge in the path\n * @param {string} target Node ID for the new edge\n * @param {string} source Node ID for the new edge\n * @param {object} transitiveEdges Store of existing edges\n */\nexport const addNewEdge = (source, target, { edgeIDs, sources, targets }) => {\n  const id = [source, target].join('|');\n  if (!edgeIDs.includes(id)) {\n    edgeIDs.push(id);\n    sources[id] = source;\n    targets[id] = target;\n  }\n};\n\n/**\n * Create new edges to connect nodes which have a disabled node (or nodes)\n * in between them\n */\nexport const getTransitiveEdges = createSelector(\n  [getNodeIDs, getEdgeIDs, getNodeDisabled, getEdgeSources, getEdgeTargets],\n  (nodeIDs, edgeIDs, nodeDisabled, edgeSources, edgeTargets) => {\n    const transitiveEdges = {\n      edgeIDs: [],\n      sources: {},\n      targets: {}\n    };\n\n    /**\n     * Recursively walk through the graph, stepping over disabled nodes,\n     * generating a list of nodes visited so far, and create transitive edges\n     * for each path that visits disabled nodes between enabled nodes.\n     * @param {Array} path The route that has been explored so far\n     */\n    const walkGraphEdges = path => {\n      edgeIDs.forEach(edgeID => {\n        const source = path[path.length - 1];\n        // Filter to only edges where the source node is the previous target\n        if (edgeSources[edgeID] !== source) {\n          return;\n        }\n        const target = edgeTargets[edgeID];\n        if (nodeDisabled[target]) {\n          // If target node is disabled then keep walking the graph\n          walkGraphEdges(path.concat(target));\n        } else if (path.length > 1) {\n          // Else only create a new edge if there would be 3 or more nodes in the path\n          addNewEdge(path[0], target, transitiveEdges);\n        }\n      });\n    };\n\n    // Only run walk if some nodes are disabled\n    if (nodeIDs.some(nodeID => nodeDisabled[nodeID])) {\n      // Examine the children of every enabled node. The walk only needs\n      // to be run in a single direction (i.e. top down), because links\n      // that end in a terminus can never be transitive.\n      nodeIDs.forEach(nodeID => {\n        if (!nodeDisabled[nodeID]) {\n          walkGraphEdges([nodeID]);\n        }\n      });\n    }\n\n    return transitiveEdges;\n  }\n);\n\n/**\n * Get only the visible edges (plus transitive edges),\n * and return them formatted as an array of objects\n */\nexport const getVisibleEdges = createSelector(\n  [\n    getEdgeIDs,\n    getEdgeDisabled,\n    getEdgeSources,\n    getEdgeTargets,\n    getTransitiveEdges\n  ],\n  (edgeIDs, edgeDisabled, edgeSources, edgeTargets, transitiveEdges) =>\n    edgeIDs\n      .filter(id => !edgeDisabled[id])\n      .concat(transitiveEdges.edgeIDs)\n      .map(id => ({\n        id,\n        source: edgeSources[id] || transitiveEdges.sources[id],\n        target: edgeTargets[id] || transitiveEdges.targets[id]\n      }))\n);\n","import { createSelector } from 'reselect';\nimport batchingToposort from 'batching-toposort';\nimport { getVisibleNodeIDs, getVisibleLayerIDs } from './disabled';\nimport { getVisibleEdges } from './edges';\n\nconst getNodeLayer = state => state.node.layer;\n\n/**\n * Get list of visible nodes for each visible layer\n */\nexport const getLayerNodes = createSelector(\n  [getVisibleNodeIDs, getVisibleLayerIDs, getNodeLayer],\n  (nodeIDs, layerIDs, nodeLayer) => {\n    if (!layerIDs.length) {\n      return [];\n    }\n    // Create object containing a list of every node for each layer\n    const layerNodes = {};\n    for (const nodeID of nodeIDs) {\n      const layer = nodeLayer[nodeID];\n      if (!layerNodes[layer]) {\n        layerNodes[layer] = [];\n      }\n      layerNodes[layer].push(nodeID);\n    }\n\n    // Convert to a nested array of layers of nodes\n    return layerIDs.map(layerID => layerNodes[layerID]);\n  }\n);\n\n/**\n * Calculate ranks (vertical placement) for each node,\n * by toposorting while taking layers into account\n */\nexport const getNodeRank = createSelector(\n  [getVisibleNodeIDs, getVisibleEdges, getLayerNodes, getVisibleLayerIDs],\n  (nodeIDs, edges, layerNodes, layerIDs) => {\n    if (!layerIDs.length) {\n      return {};\n    }\n\n    // For each node, create a list of nodes that depend on that node\n    const nodeDeps = {};\n\n    // Initialise empty dependency arrays for each node\n    for (const nodeID of nodeIDs) {\n      nodeDeps[nodeID] = [];\n    }\n\n    // Add dependencies for visible edges\n    for (const edge of edges) {\n      nodeDeps[edge.source].push(edge.target);\n    }\n\n    // Add \"false edge\" dependencies for layered nodes to prevent layer overlaps\n    for (let i = 1; i < layerNodes.length; i++) {\n      for (const sourceID of layerNodes[i - 1]) {\n        for (const targetID of layerNodes[i]) {\n          nodeDeps[sourceID].push(targetID);\n        }\n      }\n    }\n\n    // Run toposort algorithm to rank nodes by dependency\n    const toposortedNodes = batchingToposort(nodeDeps);\n\n    // Convert toposort order into rank numbering\n    const nodeRanks = {};\n    for (let rank = 0; rank < toposortedNodes.length; rank++) {\n      for (const nodeID of toposortedNodes[rank]) {\n        nodeRanks[nodeID] = rank;\n      }\n    }\n\n    return nodeRanks;\n  }\n);\n","import { createSelector } from 'reselect';\nimport { select } from 'd3-selection';\nimport { arrayToObject } from '../utils';\nimport { getPipelineNodeIDs } from './pipeline';\nimport {\n  getNodeDisabled,\n  getNodeDisabledTag,\n  getVisibleNodeIDs\n} from './disabled';\nimport { getNodeRank } from './ranks';\n\nconst getNodeName = state => state.node.name;\nconst getNodeFullName = state => state.node.fullName;\nconst getNodeDisabledNode = state => state.node.disabled;\nconst getNodeTags = state => state.node.tags;\nconst getNodeType = state => state.node.type;\nconst getNodeLayer = state => state.node.layer;\nconst getHoveredNode = state => state.node.hovered;\nconst getTagActive = state => state.tag.active;\nconst getTextLabels = state => state.textLabels;\nconst getFontLoaded = state => state.fontLoaded;\nconst getNodeTypeDisabled = state => state.nodeType.disabled;\nconst getClickedNode = state => state.node.clicked;\n\n/**\n * Gets a map of nodeIds to graph nodes\n */\nexport const getGraphNodes = createSelector(\n  [state => state.graph.nodes],\n  (nodes = []) =>\n    nodes.reduce((result, node) => {\n      result[node.id] = node;\n      return result;\n    }, {})\n);\n\n/**\n * Set active status if the node is specifically highlighted, and/or via an associated tag\n */\nexport const getNodeActive = createSelector(\n  [getPipelineNodeIDs, getHoveredNode, getNodeTags, getTagActive],\n  (nodeIDs, hoveredNode, nodeTags, tagActive) =>\n    arrayToObject(nodeIDs, nodeID => {\n      if (nodeID === hoveredNode) {\n        return true;\n      }\n      const activeViaTag = nodeTags[nodeID].some(tag => tagActive[tag]);\n      return Boolean(activeViaTag);\n    })\n);\n\n/**\n * Set selected status if the node is clicked\n */\nexport const getNodeSelected = createSelector(\n  [getPipelineNodeIDs, getClickedNode, getNodeDisabled],\n  (nodeIDs, clickedNode, nodeDisabled) =>\n    arrayToObject(\n      nodeIDs,\n      nodeID => nodeID === clickedNode && !nodeDisabled[nodeID]\n    )\n);\n\n/**\n * Returns formatted nodes as an array, with all relevant properties\n */\nexport const getNodeData = createSelector(\n  [\n    getPipelineNodeIDs,\n    getNodeName,\n    getNodeType,\n    getNodeDisabled,\n    getNodeDisabledNode,\n    getNodeDisabledTag,\n    getNodeTypeDisabled\n  ],\n  (\n    nodeIDs,\n    nodeName,\n    nodeType,\n    nodeDisabled,\n    nodeDisabledNode,\n    nodeDisabledTag,\n    typeDisabled\n  ) =>\n    nodeIDs\n      .sort((a, b) => {\n        if (nodeName[a] < nodeName[b]) return -1;\n        if (nodeName[a] > nodeName[b]) return 1;\n        return 0;\n      })\n      .map(id => ({\n        id,\n        name: nodeName[id],\n        type: nodeType[id],\n        disabled: nodeDisabled[id],\n        disabled_node: Boolean(nodeDisabledNode[id]),\n        disabled_tag: nodeDisabledTag[id],\n        disabled_type: Boolean(typeDisabled[nodeType[id]])\n      }))\n);\n\n/**\n * Returns formatted nodes grouped by type\n */\nexport const getGroupedNodes = createSelector(\n  [getNodeData],\n  nodes =>\n    nodes.reduce(function(obj, item) {\n      const key = item.type;\n      if (!obj.hasOwnProperty(key)) {\n        obj[key] = [];\n      }\n      obj[key].push(item);\n      return obj;\n    }, {})\n);\n\n/**\n * Temporarily create a new SVG container in the DOM, write a node to it,\n * measure its width with getBBox, then delete the container and store the value\n */\nexport const getNodeTextWidth = createSelector(\n  [getPipelineNodeIDs, getNodeName, getFontLoaded],\n  (nodeIDs, nodeName, fontLoaded) => {\n    if (!fontLoaded) {\n      return {};\n    }\n    const nodeTextWidth = {};\n    const svg = select(document.body)\n      .append('svg')\n      .attr('class', 'kedro pipeline-node');\n    svg\n      .selectAll('text')\n      .data(nodeIDs)\n      .enter()\n      .append('text')\n      .text(nodeID => nodeName[nodeID])\n      .each(function(nodeID) {\n        const width = this.getBBox ? this.getBBox().width : 0;\n        nodeTextWidth[nodeID] = width;\n      });\n    svg.remove();\n    return nodeTextWidth;\n  }\n);\n\n/**\n * Get the top/bottom and left/right padding for a node\n * @param {Boolean} showLabels Whether labels are visible\n * @param {Boolean} isTask Whether the node is a task type (vs data/params)\n */\nexport const getPadding = (showLabels, isTask) => {\n  if (showLabels) {\n    if (isTask) {\n      return { x: 16, y: 10 };\n    }\n    return { x: 20, y: 10 };\n  }\n  if (isTask) {\n    return { x: 14, y: 14 };\n  }\n  return { x: 16, y: 16 };\n};\n\n/**\n * Calculate node width/height and icon/text positioning\n */\nexport const getNodeSize = createSelector(\n  [\n    getPipelineNodeIDs,\n    getNodeTextWidth,\n    getTextLabels,\n    getNodeType,\n    getFontLoaded\n  ],\n  (nodeIDs, nodeTextWidth, textLabels, nodeType, fontLoaded) => {\n    if (!fontLoaded) {\n      return {};\n    }\n    return arrayToObject(nodeIDs, nodeID => {\n      const iconSize = textLabels ? 24 : 28;\n      const padding = getPadding(textLabels, nodeType[nodeID] === 'task');\n      const textWidth = textLabels ? nodeTextWidth[nodeID] : 0;\n      const textGap = textLabels ? 6 : 0;\n      const innerWidth = iconSize + textWidth + textGap;\n      return {\n        showText: textLabels,\n        width: innerWidth + padding.x * 2,\n        height: iconSize + padding.y * 2,\n        textOffset: (innerWidth - textWidth) / 2 - 1,\n        iconOffset: -innerWidth / 2,\n        iconSize\n      };\n    });\n  }\n);\n\n/**\n * Returns only visible nodes as an array, but without any extra properties\n * that are unnecessary for the chart layout calculation\n */\nexport const getVisibleNodes = createSelector(\n  [\n    getVisibleNodeIDs,\n    getNodeName,\n    getNodeType,\n    getNodeFullName,\n    getNodeSize,\n    getNodeLayer,\n    getNodeRank,\n    getFontLoaded\n  ],\n  (\n    nodeIDs,\n    nodeName,\n    nodeType,\n    nodeFullName,\n    nodeSize,\n    nodeLayer,\n    nodeRank,\n    fontLoaded\n  ) =>\n    fontLoaded\n      ? nodeIDs.map(id => ({\n          id,\n          name: nodeName[id],\n          label: nodeName[id],\n          fullName: nodeFullName[id],\n          type: nodeType[id],\n          layer: nodeLayer[id],\n          rank: nodeRank[id],\n          ...nodeSize[id]\n        }))\n      : []\n);\n","import { createSelector } from 'reselect';\nimport { getGraphNodes } from './nodes';\n\nconst getClickedNode = state => state.node.clicked;\n\n/**\n * Comparison for sorting alphabetically by name, otherwise by value\n */\nconst sortAlpha = (a, b) => (a.name || a).localeCompare(b.name || b);\n\n/**\n * Returns true if metadata sidebar is visible\n */\nexport const getVisibleMetaSidebar = createSelector(\n  [getClickedNode],\n  nodeClicked => Boolean(nodeClicked)\n);\n\n/**\n * Templates for run commands\n */\nconst runCommandTemplates = {\n  data: name => `kedro run --to-inputs ${name}`,\n  task: name => `kedro run --to-nodes ${name}`\n};\n\n/**\n * Returns run command for the node, if applicable to the node type\n * @param {object} node The node\n * @returns {?string} The run command for the node, if applicable\n */\nconst getRunCommand = node => {\n  const template = runCommandTemplates[node.type];\n  return template ? template(node.fullName) : null;\n};\n\n/**\n * Gets metadata for the currently clicked node if any\n */\nexport const getClickedNodeMetaData = createSelector(\n  [\n    getClickedNode,\n    getGraphNodes,\n    state => state.node.tags,\n    state => state.tag.name,\n    state => state.pipeline,\n    state => state.node.filepath,\n    state => state.node.code,\n    state => state.node.docstring,\n    state => state.node.parameters,\n    state => state.node.datasetType\n  ],\n  (\n    nodeId,\n    nodes = {},\n    nodeTags,\n    tagNames,\n    pipeline,\n    nodeFilepaths,\n    nodeCodes,\n    nodeDocstrings,\n    nodeParameters,\n    nodeDatasetTypes\n  ) => {\n    const node = nodes[nodeId];\n\n    if (!node) {\n      return null;\n    }\n\n    const parameters =\n      nodeParameters[node.id] &&\n      Object.entries(nodeParameters[node.id]).map(\n        ([key, value]) => `${key}: ${value}`\n      );\n\n    const metadata = {\n      node,\n      tags: [...nodeTags[node.id]]\n        .map(tagId => tagNames[tagId])\n        .sort(sortAlpha),\n      pipeline: pipeline.name[pipeline.active],\n      parameters,\n      runCommand: getRunCommand(node),\n      docstring: nodeDocstrings[node.id],\n      code: nodeCodes[node.id],\n      filepath: nodeFilepaths[node.id],\n      datasetType: nodeDatasetTypes[node.id]\n    };\n\n    // Note: node.sources node.targets require oldgraph enabled\n    if (node.sources && node.targets) {\n      metadata.inputs = node.sources\n        .map(edge => nodes[edge.source])\n        .sort(sortAlpha);\n      metadata.outputs = node.targets\n        .map(edge => nodes[edge.target])\n        .sort(sortAlpha);\n    }\n\n    return metadata;\n  }\n);\n","import { createSelector } from 'reselect';\nimport { getVisibleNodes } from './nodes';\nimport { getVisibleEdges } from './edges';\nimport { getVisibleLayerIDs } from './disabled';\nimport { getVisibleMetaSidebar } from '../selectors/metadata';\nimport { sidebarWidth, metaSidebarWidth } from '../config';\n\nconst getOldgraphFlag = state => state.flags.oldgraph;\nconst getVisibleSidebar = state => state.visible.sidebar;\nconst getFontLoaded = state => state.fontLoaded;\n\n/**\n * Select a subset of state that is watched by graph layout calculators\n * and used to prepare state.graph via async web worker actions\n */\nexport const getGraphInput = createSelector(\n  [\n    getVisibleNodes,\n    getVisibleEdges,\n    getVisibleLayerIDs,\n    getOldgraphFlag,\n    getFontLoaded\n  ],\n  (nodes, edges, layers, oldgraph, fontLoaded) => {\n    if (!fontLoaded) {\n      return null;\n    }\n    return { nodes, edges, layers, oldgraph, fontLoaded };\n  }\n);\n\n/**\n * Calculate the displayed width of a sidebar\n */\nexport const getSidebarWidth = (visible, width, { breakpoint, open, closed }) =>\n  visible && width > breakpoint ? open : closed;\n\n/**\n * Convert the DOMRect into an Object, mutate some of the properties,\n * and add some useful new ones\n */\nexport const getChartSize = createSelector(\n  [getVisibleSidebar, getVisibleMetaSidebar, state => state.chartSize],\n  (visibleSidebar, visibleMetaSidebar, chartSize) => {\n    const { left, top, width, height } = chartSize;\n    if (!width || !height) {\n      return {};\n    }\n\n    // Get the actual sidebar width\n    const sidebarWidthActual = getSidebarWidth(\n      visibleSidebar,\n      width,\n      sidebarWidth\n    );\n    const metaSidebarWidthActual = getSidebarWidth(\n      width,\n      visibleMetaSidebar,\n      metaSidebarWidth\n    );\n\n    // Find the resulting space for the chart\n    const chartWidth = width - sidebarWidthActual - metaSidebarWidthActual;\n\n    return {\n      left,\n      top,\n      outerWidth: width,\n      outerHeight: height,\n      height,\n      width: chartWidth,\n      sidebarWidth: sidebarWidthActual,\n      metaSidebarWidth: metaSidebarWidthActual\n    };\n  }\n);\n\n/**\n * Gets the current chart zoom\n */\nexport const getChartZoom = createSelector(\n  [state => state.zoom],\n  zoom => ({\n    ...zoom\n  })\n);\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport watch from 'redux-watch';\nimport reducer from '../reducers';\nimport { getGraphInput } from '../selectors/layout';\nimport { calculateGraph } from '../actions/graph';\nimport { saveState, pruneFalseyKeys } from './helpers';\n\n/**\n * Watch the getGraphInput selector, and dispatch an asynchronous action to\n * update state.graph via a web worker when it changes.\n * @param {object} store Redux store\n */\nconst updateGraphOnChange = store => {\n  const watchGraph = watch(() => getGraphInput(store.getState()));\n  store.subscribe(\n    watchGraph(graphInput => {\n      store.dispatch(calculateGraph(graphInput));\n    })\n  );\n};\n\n/**\n * Save selected state properties to window.localStorage\n * @param {object} state Redux state snapshot\n */\nconst saveStateToLocalStorage = state => {\n  saveState({\n    node: {\n      disabled: pruneFalseyKeys(state.node.disabled)\n    },\n    nodeType: {\n      disabled: state.nodeType.disabled\n    },\n    pipeline: {\n      active: state.pipeline.active\n    },\n    layer: {\n      visible: state.layer.visible\n    },\n    textLabels: state.textLabels,\n    theme: state.theme,\n    visible: state.visible,\n    flags: state.flags\n  });\n};\n\n/**\n * Configure initial state and create the Redux store\n * @param {Object} initialState Initial Redux state (from initial-state.js)\n * @return {Object} Redux store\n */\nexport default function configureStore(initialState) {\n  const store = createStore(reducer, initialState, applyMiddleware(thunk));\n  updateGraphOnChange(store);\n\n  store.subscribe(() => {\n    saveStateToLocalStorage(store.getState());\n  });\n\n  return store;\n}\n","import { createSelector } from 'reselect';\nimport { getVisibleLayerIDs } from './disabled';\n\nconst getGraph = state => state.graph;\nconst getLayerName = state => state.layer.name;\n\n/**\n * Get layer positions\n */\nexport const getLayers = createSelector(\n  [getGraph, getVisibleLayerIDs, getLayerName],\n  ({ nodes, size }, layerIDs, layerName) => {\n    if (!nodes || !size || !nodes.length || !layerIDs.length) {\n      return [];\n    }\n    const { width, height } = size;\n\n    const bounds = {};\n\n    for (const node of nodes) {\n      const layer = node.nearestLayer || node.layer;\n\n      if (layer) {\n        const bound = bounds[layer] || (bounds[layer] = [Infinity, -Infinity]);\n\n        if (node.y - node.height < bound[0]) {\n          bound[0] = node.y - node.height;\n        }\n\n        if (node.y + node.height > bound[1]) {\n          bound[1] = node.y + node.height;\n        }\n      }\n    }\n\n    return layerIDs.map((id, i) => {\n      const currentBound = bounds[id] || [0, 0];\n      const prevBound = bounds[layerIDs[i - 1]] || [\n        currentBound[0],\n        currentBound[0]\n      ];\n      const nextBound = bounds[layerIDs[i + 1]] || [\n        currentBound[1],\n        currentBound[1]\n      ];\n      const start = (prevBound[1] + currentBound[0]) / 2;\n      const end = (currentBound[1] + nextBound[0]) / 2;\n      const rectWidth = Math.max(width, height) * 5;\n\n      return {\n        id,\n        name: layerName[id],\n        x: (rectWidth - width) / -2,\n        y: start,\n        width: rectWidth,\n        height: Math.max(end - start, 0)\n      };\n    });\n  }\n);\n","import { createSelector } from 'reselect';\nimport { getVisibleEdges } from './edges';\n\nconst getClickedNode = state => state.node.clicked;\nconst getHoveredNode = state => state.node.hovered;\nconst getLazyFlag = state => state.flags.lazy;\n\n/**\n * Get the node that should be used as the center of the set of linked nodes\n * @param {Array} edges\n * @param {string} nodeID\n */\nexport const getCentralNode = createSelector(\n  [getClickedNode, getHoveredNode, getLazyFlag],\n  (clickedNode, hoveredNode, lazy) =>\n    lazy ? clickedNode : clickedNode || hoveredNode\n);\n\n/**\n * Gets a map of visible nodeIDs to successors nodeIDs in both directions\n * @param {Array} edges\n */\nexport const getVisibleEdgesByNode = createSelector(\n  [getVisibleEdges],\n  edges => {\n    const sourceEdges = {};\n    const targetEdges = {};\n\n    for (const edge of edges) {\n      if (!sourceEdges[edge.target]) {\n        sourceEdges[edge.target] = [];\n      }\n\n      sourceEdges[edge.target].push(edge.source);\n\n      if (!targetEdges[edge.source]) {\n        targetEdges[edge.source] = [];\n      }\n\n      targetEdges[edge.source].push(edge.target);\n    }\n\n    return { sourceEdges, targetEdges };\n  }\n);\n\n/**\n * Finds all visible successor nodeIDs for the given nodeID\n * @param {string} nodeID the starting nodeID\n * @param {Object} edgesByNode an object mapping nodeIDs to successor nodeIDs\n * @param {object} visited an object for storing all visited node ids\n * @returns {object} the supplied `visited` object\n */\nconst findLinkedNodes = (nodeID, edgesByNode, visited) => {\n  if (!visited[nodeID]) {\n    visited[nodeID] = true;\n\n    if (edgesByNode[nodeID]) {\n      edgesByNode[nodeID].forEach(nodeID =>\n        findLinkedNodes(nodeID, edgesByNode, visited)\n      );\n    }\n  }\n\n  return visited;\n};\n\n/**\n * Gets all visible ancestors and descendents for the given nodeID\n * @param {Object} visibleEdgeMaps\n * @param {string} nodeID\n */\nexport const getLinkedNodes = createSelector(\n  [getVisibleEdgesByNode, getCentralNode],\n  ({ sourceEdges, targetEdges }, nodeID) => {\n    if (!nodeID) {\n      return {};\n    }\n\n    const linkedNodes = {};\n    findLinkedNodes(nodeID, sourceEdges, linkedNodes);\n\n    linkedNodes[nodeID] = false;\n    findLinkedNodes(nodeID, targetEdges, linkedNodes);\n\n    return linkedNodes;\n  }\n);\n","/**\n * Returns a className string with the given modifiers in BEM style\n * @param {string} name The main class name\n * @param {?object} modifiers Map of modifier names to boolean or string values\n * @param {?string} others Optional class name string to concatenate after\n * @return {string} The compiled class name(s)\n */\nexport default (name, modifiers, others = '') =>\n  Object.keys(modifiers || {}).reduce((classes, modifier) => {\n    const value = modifiers[modifier];\n\n    if (typeof value !== 'string' && typeof value !== 'number') {\n      return `${classes} ${name}--${value ? '' : 'no-'}${modifier}`;\n    }\n\n    return `${classes} ${name}--${modifier}-${(value + '').replace(\n      /\\s/g,\n      '-'\n    )}`;\n  }, name) + (others ? ' ' + others : '');\n","import React from 'react';\nimport modifiers from '../../utils/modifiers';\n\nexport const paths = {\n  // database icon\n  data:\n    'M6 7.5C6 5.5 8.7 4 12 4c3.2 0 5.9 1.5 6 3.3V17c0 .2 0 .4-.2.6-1.1 1.6-3 2.3-5.8 2.3s-4.7-.7-5.8-2.3A1 1 0 016 17V7.5zm6 8c-1.6 0-3-.4-4-1v2.2c.7.8 2 1.2 4 1.2s3.3-.4 4-1.2v-2.2c-1 .6-2.4 1-4 1zm0-4.5c-1.5 0-3-.3-4-.9v1.6c.8 1.2 2 1.7 4 1.7s3.3-.5 4-1.7v-1.6c-1 .6-2.5.9-4 .9zm0-5c-1.3 0-2.4.3-3.2.8-.6.3-.8.6-.8.7s.2.4.8.7c.8.5 2 .8 3.2.8s2.4-.3 3.2-.8c.6-.3.8-.6.8-.7s-.2-.4-.8-.7c-.8-.5-2-.8-3.2-.8z',\n  // function icon\n  task:\n    'M19.46 4.3l.18.14-1.28 1.54c-2.06-1.71-3.52-1.1-4.55 2.52H16v2h-2.66c-.09.43-.17.89-.25 1.37l-.1.68c-1.2 8.23-4.11 11.46-8.41 8.34l-.19-.14 1.22-1.59c2.58 1.97 4.25.32 5.3-6.22l.1-.68.3-1.76H8v-2h3.78c1.48-5.36 4.12-7.04 7.68-4.2z',\n  // sliders icon\n  parameters:\n    'M8 14v1.5h13v2H8V19H6v-1.5H4v-2h2V14zM18.5 5v1.5H21v2h-2.5V10h-2V8.5H4v-2h12.5V5z'\n};\n\nexport default ({ className, type }) =>\n  paths[type] ? (\n    <svg\n      className={modifiers('pipeline-node-icon', { type }, className)}\n      viewBox=\"0 0 24 24\">\n      <path d={paths[type]} />\n    </svg>\n  ) : null;\n","import 'd3-transition';\nimport { interpolatePath } from 'd3-interpolate-path';\nimport { select } from 'd3-selection';\nimport { curveBasis, line } from 'd3-shape';\nimport { paths as nodeIcons } from '../icons/node-icon';\n\nconst lineShape = line()\n  .x(d => d.x)\n  .y(d => d.y)\n  .curve(curveBasis);\n\n/**\n * Matches all floating point numbers in a string\n */\nconst matchFloats = /\\d+\\.\\d+/g;\n\n/**\n * Limits the precision of a float value to one decimal point\n */\nconst toSinglePoint = value => parseFloat(value).toFixed(1);\n\n/**\n * Limits the precision of a path string to one decimal point\n */\nconst limitPrecision = path => path.replace(matchFloats, toSinglePoint);\n\n/**\n * Render layer bands\n */\nexport const drawLayers = function() {\n  const { layers } = this.props;\n\n  this.el.layers = this.el.layerGroup\n    .selectAll('.pipeline-layer')\n    .data(layers, layer => layer.id);\n\n  const enterLayers = this.el.layers\n    .enter()\n    .append('rect')\n    .attr('class', 'pipeline-layer');\n\n  this.el.layers.exit().remove();\n\n  this.el.layers = this.el.layers.merge(enterLayers);\n\n  this.el.layers\n    .attr('x', d => d.x)\n    .attr('y', d => d.y)\n    .attr('height', d => d.height)\n    .attr('width', d => d.width);\n};\n\n/**\n * Render layer name labels\n */\nexport const drawLayerNames = function() {\n  const {\n    chartSize: { sidebarWidth = 0 },\n    layers\n  } = this.props;\n\n  this.el.layerNameGroup\n    .transition('layer-names-sidebar-width')\n    .duration(this.DURATION)\n    .style('transform', `translateX(${sidebarWidth}px)`);\n\n  this.el.layerNames = this.el.layerNameGroup\n    .selectAll('.pipeline-layer-name')\n    .data(layers, layer => layer.id);\n\n  const enterLayerNames = this.el.layerNames\n    .enter()\n    .append('li')\n    .attr('class', 'pipeline-layer-name')\n    .style('opacity', 0)\n    .transition('enter-layer-names')\n    .duration(this.DURATION)\n    .style('opacity', 1);\n\n  this.el.layerNames\n    .exit()\n    .style('opacity', 1)\n    .transition('exit-layer-names')\n    .duration(this.DURATION)\n    .style('opacity', 0)\n    .remove();\n\n  this.el.layerNames = this.el.layerNames.merge(enterLayerNames);\n\n  this.el.layerNames.text(d => d.name).attr('dy', 5);\n};\n\n/**\n * Sets the size and position of the given node rects\n */\nconst updateNodeRects = nodeRects =>\n  nodeRects\n    .attr('width', node => node.width - 5)\n    .attr('height', node => node.height - 5)\n    .attr('x', node => (node.width - 5) / -2)\n    .attr('y', node => (node.height - 5) / -2)\n    .attr('rx', node => (node.type === 'task' ? 0 : node.height / 2));\n\n/**\n * Render node icons and name labels\n */\nexport const drawNodes = function(changed) {\n  const {\n    centralNode,\n    linkedNodes,\n    nodeActive,\n    nodeSelected,\n    nodes\n  } = this.props;\n\n  if (changed('nodes')) {\n    this.el.nodes = this.el.nodeGroup\n      .selectAll('.pipeline-node')\n      .data(nodes, node => node.id);\n  }\n\n  if (!this.el.nodes) {\n    return;\n  }\n\n  const updateNodes = this.el.nodes;\n  const enterNodes = this.el.nodes.enter().append('g');\n  const exitNodes = this.el.nodes.exit();\n  // Filter out undefined nodes on Safari\n  const allNodes = this.el.nodes\n    .merge(enterNodes)\n    .merge(exitNodes)\n    .filter(node => typeof node !== 'undefined');\n\n  if (changed('nodes')) {\n    enterNodes\n      .attr('tabindex', '0')\n      .attr('class', 'pipeline-node')\n      .attr('transform', node => `translate(${node.x}, ${node.y})`)\n      .attr('data-id', node => node.id)\n      .classed('pipeline-node--parameters', node => node.type === 'parameters')\n      .classed('pipeline-node--data', node => node.type === 'data')\n      .classed('pipeline-node--task', node => node.type === 'task')\n      .on('click', this.handleNodeClick)\n      .on('mouseover', this.handleNodeMouseOver)\n      .on('mouseout', this.handleNodeMouseOut)\n      .on('focus', this.handleNodeMouseOver)\n      .on('blur', this.handleNodeMouseOut)\n      .on('keydown', this.handleNodeKeyDown);\n\n    enterNodes\n      .attr('opacity', 0)\n      .transition('show-nodes')\n      .duration(this.DURATION)\n      .attr('opacity', 1);\n\n    enterNodes.append('rect');\n\n    // Performance: use a single path per icon\n    enterNodes\n      .append('path')\n      .attr('class', 'pipeline-node__icon')\n      .attr('d', node => nodeIcons[node.type]);\n\n    enterNodes\n      .append('text')\n      .attr('class', 'pipeline-node__text')\n      .text(node => node.name)\n      .attr('text-anchor', 'middle')\n      .attr('dy', 5)\n      .attr('dx', node => node.textOffset);\n\n    exitNodes\n      .transition('exit-nodes')\n      .duration(this.DURATION)\n      .style('opacity', 0)\n      .remove();\n\n    // Cancel exit transitions if re-entered\n    updateNodes.transition('exit-nodes').style('opacity', null);\n\n    this.el.nodes = this.el.nodeGroup.selectAll('.pipeline-node');\n  }\n\n  if (\n    changed('nodes', 'nodeActive', 'nodeSelected', 'centralNode', 'linkedNodes')\n  ) {\n    allNodes\n      .classed('pipeline-node--active', node => nodeActive[node.id])\n      .classed('pipeline-node--selected', node => nodeSelected[node.id])\n      .classed(\n        'pipeline-node--faded',\n        node => centralNode && !linkedNodes[node.id]\n      );\n  }\n\n  if (changed('nodes')) {\n    allNodes\n      .transition('update-nodes')\n      .duration(this.DURATION)\n      .attr('transform', node => `translate(${node.x}, ${node.y})`)\n      .on('end', () => {\n        try {\n          // Sort nodes so tab focus order follows X/Y position\n          allNodes.sort((a, b) => a.order - b.order);\n        } catch (err) {\n          // Avoid rare DOM errors thrown due to timing issues\n        }\n      });\n\n    enterNodes.select('rect').call(updateNodeRects);\n\n    updateNodes\n      .select('rect')\n      .transition('node-rect')\n      .duration(node => (node.showText ? 200 : 600))\n      .call(updateNodeRects);\n\n    // Performance: icon transitions with CSS on GPU\n    allNodes\n      .select('.pipeline-node__icon')\n      .style('transition-delay', node => (node.showText ? '0ms' : '200ms'))\n      .style(\n        'transform',\n        node =>\n          `translate(${node.iconOffset}px, ${-node.iconSize / 2}px) ` +\n          `scale(${node.iconSize / 24})`\n      );\n\n    // Performance: text transitions with CSS on GPU\n    allNodes\n      .select('.pipeline-node__text')\n      .style('transition-delay', node => (node.showText ? '200ms' : '0ms'))\n      .style('opacity', node => (node.showText ? 1 : 0));\n  }\n};\n\n/**\n * Render edge lines\n */\nexport const drawEdges = function(changed) {\n  const { edges, centralNode, linkedNodes } = this.props;\n\n  if (changed('edges')) {\n    this.el.edges = this.el.edgeGroup\n      .selectAll('.pipeline-edge')\n      .data(edges, edge => edge.id);\n  }\n\n  if (!this.el.edges) {\n    return;\n  }\n\n  const updateEdges = this.el.edges;\n  const enterEdges = this.el.edges.enter().append('g');\n  const exitEdges = this.el.edges.exit();\n  const allEdges = this.el.edges.merge(enterEdges).merge(exitEdges);\n\n  if (changed('edges')) {\n    enterEdges\n      .append('path')\n      .attr('marker-end', d => `url(#pipeline-arrowhead)`);\n\n    enterEdges.attr('data-id', edge => edge.id).attr('class', 'pipeline-edge');\n\n    enterEdges\n      .attr('opacity', 0)\n      .transition('show-edges')\n      .duration(this.DURATION)\n      .attr('opacity', 1);\n\n    exitEdges\n      .transition('exit-edges')\n      .duration(this.DURATION)\n      .style('opacity', 0)\n      .remove();\n\n    // Cancel exit transitions if re-entered\n    updateEdges.transition('exit-edges').style('opacity', null);\n\n    allEdges\n      .select('path')\n      .transition('update-edges')\n      .duration(this.DURATION)\n      .attrTween('d', function(edge) {\n        // Performance: Limit path precision for parsing & render\n        let current = edge.points && limitPrecision(lineShape(edge.points));\n        const previous = select(this).attr('d') || current;\n        return interpolatePath(previous, current);\n      });\n\n    this.el.edges = this.el.edgeGroup.selectAll('.pipeline-edge');\n  }\n\n  if (changed('edges', 'centralNode', 'linkedNodes')) {\n    allEdges.classed(\n      'pipeline-edge--faded',\n      edge =>\n        edge &&\n        centralNode &&\n        (!linkedNodes[edge.source] || !linkedNodes[edge.target])\n    );\n  }\n};\n","import React from 'react';\nimport classnames from 'classnames';\nimport './tooltip.css';\n\nconst zeroWidthSpace = String.fromCharCode(0x200b);\n\n/**\n * Force tooltip text to break on special characters\n * @param {string} text Any text with special characters\n * @return {string} text\n */\nexport const insertZeroWidthSpace = text =>\n  text.replace(/([^\\w\\s]|[_])/g, `${zeroWidthSpace}$1${zeroWidthSpace}`);\n\n/**\n * Display flowchart node tooltip\n * @param {object} chartSize Chart dimensions in pixels\n * @param {object} targetRect event.target.getBoundingClientRect()\n * @param {boolean} visible Whether to show the tooltip\n * @param {string} text Tooltip display label\n */\nconst Tooltip = ({ chartSize, targetRect, visible, text }) => {\n  const { left, top, width, height, outerWidth, sidebarWidth } = chartSize;\n  const isRight = targetRect.left - sidebarWidth > width / 2;\n  const isTop = targetRect.top < height / 2;\n  const xOffset = isRight ? targetRect.left - outerWidth : targetRect.left;\n  const yOffset = isTop ? targetRect.top + targetRect.height : targetRect.top;\n  const x = xOffset - left + targetRect.width / 2;\n  const y = yOffset - top;\n\n  return (\n    <div\n      className={classnames('pipeline-tooltip', {\n        'pipeline-tooltip--visible': visible,\n        'pipeline-tooltip--right': isRight,\n        'pipeline-tooltip--top': isTop\n      })}\n      style={{ transform: `translate(${x}px, ${y}px)` }}>\n      <div className=\"pipeline-tooltip__text\">{insertZeroWidthSpace(text)}</div>\n    </div>\n  );\n};\n\nTooltip.defaultProps = {\n  chartSize: {},\n  targetRect: {},\n  visible: false,\n  text: ''\n};\n\nexport default Tooltip;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport 'd3-transition';\nimport { select, event } from 'd3-selection';\nimport { interpolate } from 'd3-interpolate';\nimport { zoom, zoomIdentity, zoomTransform } from 'd3-zoom';\nimport { updateChartSize, updateZoom } from '../../actions';\nimport { loadNodeData, toggleNodeHovered } from '../../actions/nodes';\nimport { getNodeActive, getNodeSelected } from '../../selectors/nodes';\nimport { getChartSize, getChartZoom } from '../../selectors/layout';\nimport { getLayers } from '../../selectors/layers';\nimport { getCentralNode, getLinkedNodes } from '../../selectors/linked-nodes';\nimport { drawNodes, drawEdges, drawLayers, drawLayerNames } from './draw';\nimport Tooltip from '../tooltip';\nimport './styles/flowchart.css';\n\n/**\n * Display a pipeline flowchart, mostly rendered with D3\n */\nexport class FlowChart extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tooltip: { visible: false }\n    };\n\n    this.DURATION = 700;\n\n    this.containerRef = React.createRef();\n    this.svgRef = React.createRef();\n    this.wrapperRef = React.createRef();\n    this.edgesRef = React.createRef();\n    this.nodesRef = React.createRef();\n    this.layersRef = React.createRef();\n    this.layerNamesRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.selectD3Elements();\n    this.updateChartSize();\n    this.initZoomBehaviour();\n    this.addGlobalEventListeners();\n    this.update();\n\n    if (this.props.tooltip) {\n      this.showTooltip(null, this.props.tooltip);\n    } else {\n      this.hideTooltip();\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeGlobalEventListeners();\n  }\n\n  componentDidUpdate(prevProps) {\n    this.update(prevProps);\n  }\n\n  /**\n   * Updates drawing and zoom if props have changed\n   */\n  update(prevProps = {}) {\n    const { chartZoom } = this.props;\n    const changed = (...names) => this.changed(names, prevProps, this.props);\n\n    if (changed('visibleSidebar')) {\n      this.updateChartSize();\n    }\n\n    if (changed('layers', 'chartSize')) {\n      drawLayers.call(this);\n      drawLayerNames.call(this);\n    }\n\n    if (changed('edges', 'centralNode', 'linkedNodes')) {\n      drawEdges.call(this, changed);\n    }\n\n    if (\n      changed(\n        'nodes',\n        'centralNode',\n        'linkedNodes',\n        'nodeActive',\n        'nodeSelected'\n      )\n    ) {\n      drawNodes.call(this, changed);\n    }\n\n    if (changed('edges', 'nodes', 'layers', 'chartSize')) {\n      this.zoomToFit();\n    } else {\n      this.updateZoom(chartZoom);\n    }\n  }\n\n  /**\n   * Returns true if any of the given props are different between given objects.\n   * Only shallow changes are detected.\n   */\n  changed(props, objectA, objectB) {\n    return (\n      objectA && objectB && props.some(prop => objectA[prop] !== objectB[prop])\n    );\n  }\n\n  /**\n   * Create D3 element selectors\n   */\n  selectD3Elements() {\n    this.el = {\n      svg: select(this.svgRef.current),\n      wrapper: select(this.wrapperRef.current),\n      edgeGroup: select(this.edgesRef.current),\n      nodeGroup: select(this.nodesRef.current),\n      layerGroup: select(this.layersRef.current),\n      layerNameGroup: select(this.layerNamesRef.current)\n    };\n  }\n\n  /**\n   * Configure globals for the container dimensions,\n   * and apply them to the chart SVG\n   */\n  updateChartSize() {\n    this.props.onUpdateChartSize(\n      this.containerRef.current.getBoundingClientRect()\n    );\n  }\n\n  /**\n   * Add window event listeners on mount\n   */\n  addGlobalEventListeners() {\n    // Add ResizeObserver to listen for any changes in the container's width/height\n    // (with event listener fallback)\n    if (window.ResizeObserver) {\n      this.resizeObserver =\n        this.resizeObserver ||\n        new window.ResizeObserver(this.handleWindowResize);\n      this.resizeObserver.observe(this.containerRef.current);\n    } else {\n      window.addEventListener('resize', this.handleWindowResize);\n    }\n    // Print event listeners\n    window.addEventListener('beforeprint', this.handleBeforePrint);\n    window.addEventListener('afterprint', this.handleAfterPrint);\n  }\n\n  /**\n   * Remove window event listeners on unmount\n   */\n  removeGlobalEventListeners() {\n    // ResizeObserver\n    if (window.ResizeObserver) {\n      this.resizeObserver.unobserve(this.containerRef.current);\n    } else {\n      window.removeEventListener('resize', this.handleWindowResize);\n    }\n    // Print event listeners\n    window.removeEventListener('beforeprint', this.handleBeforePrint);\n    window.removeEventListener('afterprint', this.handleAfterPrint);\n  }\n\n  /**\n   * Handle window resize\n   */\n  handleWindowResize = () => {\n    this.updateChartSize();\n  };\n\n  /**\n   * Add viewBox on window print so that the SVG can be scaled to fit\n   */\n  handleBeforePrint = () => {\n    const gs = this.props.graphSize;\n    const width = gs.width + gs.marginx * 2;\n    const height = gs.height + gs.marginy * 2;\n    this.el.svg.attr('viewBox', `0 0 ${width} ${height}`);\n  };\n\n  /**\n   * Remove viewBox once printing is done\n   */\n  handleAfterPrint = () => {\n    this.el.svg.attr('viewBox', null);\n  };\n\n  /**\n   * Setup D3 zoom behaviour on component mount\n   */\n  initZoomBehaviour() {\n    this.zoomBehaviour = zoom()\n      // Transition using linear interpolation\n      .interpolate(interpolate)\n      // When zoom changes\n      .on('zoom', () => {\n        const { k: scale, x, y } = event.transform;\n        const [\n          minScale = 0,\n          maxScale = Infinity\n        ] = this.zoomBehaviour.scaleExtent();\n        const { sidebarWidth, metaSidebarWidth } = this.props.chartSize;\n        const { width = 0, height = 0 } = this.props.graphSize;\n\n        // Limit zoom translate extent: This needs to be recalculated on zoom\n        // as it needs access to the current scale to correctly multiply the\n        // sidebarWidth by the scale to offset it properly\n        const margin = 500;\n        this.zoomBehaviour.translateExtent([\n          [-sidebarWidth / scale - margin, -margin],\n          [width + margin + metaSidebarWidth / scale, height + margin]\n        ]);\n\n        // Transform the <g> that wraps the chart\n        this.el.wrapper.attr('transform', event.transform);\n\n        // Apply animating class to zoom wrapper\n        this.el.wrapper.classed(\n          'pipeline-flowchart__zoom-wrapper--animating',\n          true\n        );\n\n        // Update layer label y positions\n        if (this.el.layerNames) {\n          this.el.layerNames.style('transform', d => {\n            const ty = y + (d.y + d.height / 2) * scale;\n            return `translateY(${ty}px)`;\n          });\n        }\n\n        // Hide the tooltip so it doesn't get misaligned to its node\n        this.hideTooltip();\n\n        // Share the applied zoom state with other components\n        this.props.onUpdateZoom({\n          scale,\n          x,\n          y,\n          applied: true,\n          transition: false,\n          minScale,\n          maxScale\n        });\n      })\n      // When zoom ends\n      .on('end', () => {\n        this.el.wrapper.classed(\n          'pipeline-flowchart__zoom-wrapper--animating',\n          false\n        );\n      });\n\n    this.el.svg\n      .call(this.zoomBehaviour)\n      // Disabled to avoid conflicts with metadata panel triggered zooms\n      .on('dblclick.zoom', null);\n  }\n\n  /**\n   * Applies the given zoom state if necessary\n   * @param {Object} chartZoom The new zoom state\n   */\n  updateZoom(chartZoom) {\n    // No change if already applied (i.e. ignores internal updates)\n    if (chartZoom.applied) {\n      return;\n    }\n\n    // If the update is a reset, then just zoom to fit the graph\n    if (chartZoom.reset === true) {\n      this.zoomToFit();\n      return;\n    }\n\n    // Get current zoom transform\n    const zoom = this.zoomBehaviour;\n    const currentTransform = zoomTransform(this.wrapperRef.current);\n    const { k = 1 } = currentTransform;\n\n    // Get the updated zoom components\n    const { scale: targetScale = k, x: targetX, y: targetY } = chartZoom;\n    const transition =\n      chartZoom.transition || typeof chartZoom.transition === 'undefined';\n    const hasTranslation =\n      typeof targetX !== 'undefined' && typeof targetY !== 'undefined';\n\n    // Apply the zoom update immediately at first\n    // Note: only translateTo and scaleTo respect zoom extents\n    // Note: requires three separate calls so can't transition this\n    if (hasTranslation) {\n      // Update position and scale\n      this.el.svg\n        .call(zoom.transform, zoomIdentity)\n        .call(zoom.translateTo, targetX, targetY)\n        .call(zoom.scaleTo, targetScale);\n    } else {\n      // Update scale only\n      this.el.svg.call(zoom.scaleTo, targetScale);\n    }\n\n    // If the update requires a transition\n    if (transition) {\n      // Store the already computed target transform\n      const targetTransform = zoomTransform(this.wrapperRef.current);\n\n      // Revert and transition to target in a single call\n      this.el.svg\n        .call(zoom.transform, currentTransform)\n        .transition('zoom')\n        .duration(200)\n        .call(zoom.transform, targetTransform);\n    }\n  }\n\n  /**\n   * Zoom and scale to fit graph exactly in the viewport\n   */\n  zoomToFit() {\n    const { chartSize, graphSize } = this.props;\n\n    let scale = 1;\n    let translateX = 0;\n    let translateY = 0;\n\n    // Fit the graph exactly in the viewport\n    if (chartSize.width > 0 && graphSize.width > 0) {\n      scale = Math.min(\n        chartSize.width / graphSize.width,\n        chartSize.height / graphSize.height\n      );\n\n      translateX =\n        (chartSize.width - graphSize.width * scale) / 2 +\n        chartSize.sidebarWidth;\n      translateY = (chartSize.height - graphSize.height * scale) / 2;\n    }\n\n    // Limit zoom scale extent\n    this.zoomBehaviour.scaleExtent([scale * 0.8, 2]);\n\n    // Get the target zoom transform\n    const targetTransform = zoomIdentity\n      .translate(translateX, translateY)\n      .scale(scale);\n\n    // Get the current zoom transform\n    const { k = 1, x = 0, y = 0 } = zoomTransform(this.wrapperRef.current);\n    const isFirstZoom = k === 1 && x === 0 && y === 0;\n\n    // Avoid errors during tests due to lack of SVG support\n    if (typeof jest !== 'undefined') {\n      return;\n    }\n\n    // Apply transform but only transition after first zoom\n    (isFirstZoom\n      ? this.el.svg\n      : this.el.svg.transition('zoom').duration(this.DURATION)\n    ).call(this.zoomBehaviour.transform, targetTransform);\n  }\n\n  /**\n   * Enable a node's focus state and highlight linked nodes\n   * @param {Object} node Datum for a single node\n   */\n  handleNodeClick = node => {\n    this.props.onLoadNodeData(node.id);\n    event.stopPropagation();\n  };\n\n  /**\n   * Remove a node's focus state and dim linked nodes\n   */\n  handleChartClick = () => {\n    this.props.onLoadNodeData(null);\n  };\n\n  /**\n   * Enable a node's active state, show tooltip, and highlight linked nodes\n   * @param {Object} node Datum for a single node\n   */\n  handleNodeMouseOver = node => {\n    this.props.onToggleNodeHovered(node.id);\n    this.showTooltip(node);\n  };\n\n  /**\n   * Remove a node's active state, hide tooltip, and dim linked nodes\n   * @param {Object} node Datum for a single node\n   */\n  handleNodeMouseOut = () => {\n    this.props.onToggleNodeHovered(null);\n    this.hideTooltip();\n  };\n\n  /**\n   * Handle keydown event when a node is focused\n   * @param {Object} node Datum for a single node\n   */\n  handleNodeKeyDown = node => {\n    const ENTER = 13;\n    const ESCAPE = 27;\n    if (event.keyCode === ENTER) {\n      this.handleNodeClick(node);\n    }\n    if (event.keyCode === ESCAPE) {\n      this.handleChartClick();\n      this.handleNodeMouseOut(node);\n    }\n  };\n\n  /**\n   * Show, fill and and position the tooltip\n   * @param {Object} node A node datum\n   * @param {?Object} options Options for the tooltip if required\n   */\n  showTooltip(node, options = {}) {\n    this.setState({\n      tooltip: {\n        targetRect: event && event.target.getBoundingClientRect(),\n        text: node && node.fullName,\n        visible: true,\n        ...options\n      }\n    });\n  }\n\n  /**\n   * Hide the tooltip\n   */\n  hideTooltip() {\n    if (this.state.tooltip.visible) {\n      this.setState({\n        tooltip: {\n          ...this.state.tooltip,\n          visible: false\n        }\n      });\n    }\n  }\n\n  /**\n   * Render React elements\n   */\n  render() {\n    const { chartSize, layers, visibleGraph } = this.props;\n    const { outerWidth = 0, outerHeight = 0 } = chartSize;\n\n    return (\n      <div\n        className=\"pipeline-flowchart kedro\"\n        ref={this.containerRef}\n        onClick={this.handleChartClick}>\n        <svg\n          id=\"pipeline-graph\"\n          className=\"pipeline-flowchart__graph\"\n          width={outerWidth}\n          height={outerHeight}\n          ref={this.svgRef}>\n          <g\n            id=\"zoom-wrapper\"\n            className={classnames('pipeline-zoom-wrapper', {\n              'pipeline-zoom-wrapper--hidden': !visibleGraph\n            })}\n            ref={this.wrapperRef}>\n            <defs>\n              <marker\n                id=\"pipeline-arrowhead\"\n                className=\"pipeline-flowchart__arrowhead\"\n                viewBox=\"0 0 10 10\"\n                refX=\"7\"\n                refY=\"5\"\n                markerUnits=\"strokeWidth\"\n                markerWidth=\"8\"\n                markerHeight=\"6\"\n                orient=\"auto\">\n                <path d=\"M 0 0 L 10 5 L 0 10 L 4 5 z\" />\n              </marker>\n            </defs>\n            <g className=\"pipeline-flowchart__layers\" ref={this.layersRef} />\n            <g className=\"pipeline-flowchart__edges\" ref={this.edgesRef} />\n            <g\n              id=\"nodes\"\n              className=\"pipeline-flowchart__nodes\"\n              ref={this.nodesRef}\n            />\n          </g>\n        </svg>\n        <ul\n          className={classnames('pipeline-flowchart__layer-names', {\n            'pipeline-flowchart__layer-names--visible': layers.length\n          })}\n          ref={this.layerNamesRef}\n        />\n        <Tooltip chartSize={chartSize} {...this.state.tooltip} />\n      </div>\n    );\n  }\n}\n\n// Maintain a single reference to support change detection\nconst emptyEdges = [];\nconst emptyNodes = [];\nconst emptyGraphSize = {};\n\nexport const mapStateToProps = (state, ownProps) => ({\n  centralNode: getCentralNode(state),\n  chartSize: getChartSize(state),\n  chartZoom: getChartZoom(state),\n  edges: state.graph.edges || emptyEdges,\n  graphSize: state.graph.size || emptyGraphSize,\n  layers: getLayers(state),\n  linkedNodes: getLinkedNodes(state),\n  nodes: state.graph.nodes || emptyNodes,\n  nodeActive: getNodeActive(state),\n  nodeSelected: getNodeSelected(state),\n  visibleGraph: state.visible.graph,\n  visibleSidebar: state.visible.sidebar,\n  ...ownProps\n});\n\nexport const mapDispatchToProps = (dispatch, ownProps) => ({\n  onLoadNodeData: nodeClicked => {\n    dispatch(loadNodeData(nodeClicked));\n  },\n  onToggleNodeHovered: nodeHovered => {\n    dispatch(toggleNodeHovered(nodeHovered));\n  },\n  onUpdateChartSize: chartSize => {\n    dispatch(updateChartSize(chartSize));\n  },\n  onUpdateZoom: transform => {\n    dispatch(updateZoom(transform));\n  },\n  ...ownProps\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(FlowChart);\n","import React from 'react';\nimport classnames from 'classnames';\nimport { connect } from 'react-redux';\nimport Dropdown from '@quantumblack/kedro-ui/lib/components/dropdown';\nimport MenuOption from '@quantumblack/kedro-ui/lib/components/menu-option';\nimport { loadPipelineData } from '../../actions/pipelines';\nimport './pipeline-list.css';\n\n/**\n * A Dropdown displaying a list of selectable pipelines\n * @param {Object} pipeline Pipeline IDs, names, and active pipeline\n * @param {Function} onUpdateActivePipeline Handle updating the active pipeline\n * @param {Function} onToggleOpen Callback when opening/closing the dropdown\n * @param {string} theme Kedro UI light/dark theme\n */\nexport const PipelineList = ({\n  asyncDataSource,\n  onUpdateActivePipeline,\n  pipeline,\n  theme,\n  onToggleOpen\n}) => {\n  if (!pipeline.ids.length && !asyncDataSource) {\n    return null;\n  }\n  return (\n    <div className=\"pipeline-list\">\n      <Dropdown\n        disabled={!pipeline.ids.length}\n        onOpened={() => onToggleOpen(true)}\n        onClosed={() => onToggleOpen(false)}\n        theme={theme}\n        width={null}\n        onChanged={onUpdateActivePipeline}\n        defaultText={pipeline.name[pipeline.active] || 'Default'}>\n        {pipeline.ids.map(id => (\n          <MenuOption\n            key={`pipeline-${id}`}\n            className={classnames({\n              'pipeline-list__option--active': pipeline.active === id\n            })}\n            value={id}\n            primaryText={pipeline.name[id]}\n          />\n        ))}\n      </Dropdown>\n    </div>\n  );\n};\n\nexport const mapStateToProps = state => ({\n  asyncDataSource: state.asyncDataSource,\n  pipeline: state.pipeline,\n  theme: state.theme\n});\n\nexport const mapDispatchToProps = dispatch => ({\n  onUpdateActivePipeline: event => {\n    dispatch(loadPipelineData(event.value));\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(PipelineList);\n","import React, { useEffect, useRef } from 'react';\nimport SearchBar from '@quantumblack/kedro-ui/lib/components/search-bar';\nimport { connect } from 'react-redux';\n\n/**\n * Handle Node List Search\n * @param {function} onUpdateSearchValue Event handler\n * @param {string} searchValue Search text\n * @param {string} theme Light/dark theme for Kedro-UI component\n */\nexport const NodeListSearch = ({ onUpdateSearchValue, searchValue, theme }) => {\n  const container = useRef(null);\n\n  /**\n   * Focus search on CMD+F/CTRL+F, but only if not already focused, so that if\n   * you hit the shortcut again you will receive the default browser behaviour\n   * @param {object} event Keydown event\n   */\n  const handleWindowKeyDown = event => {\n    const isKeyF = event.key === 'f' || event.keyCode === 70;\n    const isKeyCtrlOrCmd = event.ctrlKey || event.metaKey;\n    if (isKeyF && isKeyCtrlOrCmd) {\n      const input = container.current.querySelector('input');\n      if (document.activeElement !== input) {\n        input.focus();\n        event.preventDefault();\n      } else {\n        input.blur();\n      }\n    }\n  };\n\n  /**\n   * Add window keydown event listener on mount, and remove on unmount\n   */\n  useEffect(() => {\n    window.addEventListener('keydown', handleWindowKeyDown);\n    return () => window.removeEventListener('keydown', handleWindowKeyDown);\n  });\n\n  /**\n   * Listen for keyboard events, and trigger relevant actions\n   * @param {number} keyCode The key event keycode\n   */\n  const handleKeyDown = event => {\n    const isKeyEscape = event.key === 'Escape' || event.keyCode === 27;\n    if (isKeyEscape) {\n      onUpdateSearchValue('');\n      container.current.querySelector('input').blur();\n    }\n  };\n\n  return (\n    <div\n      ref={container}\n      className=\"pipeline-nodelist-search\"\n      onKeyDown={handleKeyDown}>\n      <SearchBar\n        onChange={onUpdateSearchValue}\n        value={searchValue}\n        theme={theme}\n        placeholder={'Search'}\n      />\n    </div>\n  );\n};\n\nexport const mapStateToProps = state => ({\n  theme: state.theme\n});\n\nexport default connect(mapStateToProps)(NodeListSearch);\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M12 5.7c4.4 0 8 5 8 6s-3.6 6-8 6-8-5-8-6 3.6-6 8-6zm0 2a4 4 0 100 8 4 4 0 000-8zm0 2a2 2 0 110 4 2 2 0 010-4z\" />\n  </svg>\n);\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M18.6 5.17l1.4 1.4-2.2 2.19C19.18 10.09 20 11.5 20 12c0 1.03-3.58 6-8 6a6.8 6.8 0 01-2.8-.64L6.56 20l-1.4-1.4L18.6 5.17zm-2.8 5.59l-1.92 1.93a2 2 0 01-1.2 1.19l-1.92 1.92a4 4 0 005.04-5.04zM12 6c.85 0 1.68.19 2.45.5l-1.6 1.59a4 4 0 00-4.76 4.76L5.94 15C4.74 13.75 4 12.48 4 12c0-1.06 3.58-6 8-6z\" />\n  </svg>\n);\n","import React, { memo } from 'react';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport { changed } from '../../utils';\nimport NodeIcon from '../icons/node-icon';\nimport VisibleIcon from '../icons/visible';\nimport InvisibleIcon from '../icons/invisible';\nimport { getNodeActive } from '../../selectors/nodes';\n\n// The exact fixed height of a row as measured by getBoundingClientRect()\nexport const nodeListRowHeight = 36.59375;\n\n/**\n * Returns `true` if there are no props changes, therefore the last render can be reused.\n * Performance: Checks only the minimal set of props known to change after first render.\n */\nconst shouldMemo = (prevProps, nextProps) =>\n  !changed(\n    [\n      'active',\n      'checked',\n      'unset',\n      'disabled',\n      'faded',\n      'visible',\n      'selected',\n      'label',\n      'children'\n    ],\n    prevProps,\n    nextProps\n  );\n\nconst NodeListRow = memo(\n  ({\n    container: Container = 'div',\n    active,\n    checked,\n    unset,\n    children,\n    disabled,\n    faded,\n    visible,\n    id,\n    label,\n    name,\n    kind,\n    onMouseEnter,\n    onMouseLeave,\n    onChange,\n    onClick,\n    selected,\n    type,\n    visibleIcon = VisibleIcon,\n    invisibleIcon = InvisibleIcon\n  }) => {\n    const VisibilityIcon = checked ? visibleIcon : invisibleIcon;\n\n    return (\n      <Container\n        className={classnames(\n          'pipeline-nodelist__row kedro',\n          `pipeline-nodelist__row--kind-${kind}`,\n          {\n            'pipeline-nodelist__row--visible': visible,\n            'pipeline-nodelist__row--active': active,\n            'pipeline-nodelist__row--selected': selected,\n            'pipeline-nodelist__row--disabled': disabled,\n            'pipeline-nodelist__row--unchecked': !checked\n          }\n        )}\n        title={name}\n        onMouseEnter={visible ? onMouseEnter : null}\n        onMouseLeave={visible ? onMouseLeave : null}>\n        <button\n          className={classnames(\n            'pipeline-nodelist__row__text',\n            `pipeline-nodelist__row__text--kind-${kind}`\n          )}\n          onClick={onClick}\n          onFocus={onMouseEnter}\n          onBlur={onMouseLeave}\n          disabled={disabled}\n          title={children ? null : name}>\n          {type && (\n            <NodeIcon\n              className={classnames(\n                'pipeline-nodelist__row__type-icon',\n                'pipeline-nodelist__row__icon',\n                {\n                  'pipeline-nodelist__row__type-icon--faded': faded,\n                  'pipeline-nodelist__row__type-icon--disabled': disabled,\n                  'pipeline-nodelist__row__type-icon--nested': !children,\n                  'pipeline-nodelist__row__type-icon--active': active,\n                  'pipeline-nodelist__row__type-icon--selected': selected\n                }\n              )}\n              type={type}\n            />\n          )}\n          <span\n            className={classnames('pipeline-nodelist__row__label', {\n              'pipeline-nodelist__row__label--faded': faded,\n              'pipeline-nodelist__row__label--disabled': disabled\n            })}\n            dangerouslySetInnerHTML={{ __html: label }}\n          />\n        </button>\n        {children}\n        <label\n          htmlFor={id}\n          className={classnames(\n            'pipeline-row__toggle',\n            `pipeline-row__toggle--kind-${kind}`,\n            {\n              'pipeline-row__toggle--disabled': disabled,\n              'pipeline-row__toggle--selected': selected,\n              'pipeline-row__toggle--not-tag': type !== 'tag'\n            }\n          )}>\n          <input\n            id={id}\n            className=\"pipeline-nodelist__row__checkbox\"\n            type=\"checkbox\"\n            checked={checked}\n            disabled={disabled}\n            name={name}\n            onChange={onChange}\n          />\n          <VisibilityIcon\n            aria-label={name}\n            className={classnames(\n              'pipeline-nodelist__row__icon',\n              'pipeline-row__toggle-icon',\n              `pipeline-row__toggle-icon--kind-${kind}`,\n              {\n                'pipeline-row__toggle-icon--checked': checked,\n                'pipeline-row__toggle-icon--unchecked': !checked,\n                'pipeline-row__toggle-icon--unset': unset,\n                'pipeline-row__toggle-icon--visible': type !== 'tag'\n              }\n            )}\n          />\n        </label>\n      </Container>\n    );\n  },\n  shouldMemo\n);\n\nexport const mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  active:\n    typeof ownProps.active !== 'undefined'\n      ? ownProps.active\n      : getNodeActive(state)[ownProps.id] || false\n});\n\nexport default connect(mapStateToProps)(NodeListRow);\n","import { useState, useLayoutEffect, useRef, useMemo, useCallback } from 'react';\n\n/**\n * A component that renders only the children currently visible on screen.\n * Renders all children if not supported by browser or is disabled via the `lazy` prop.\n * @param {function} height A `function(start, end)` returning the pixel height for any given range of items\n * @param {number} total The total count of all items in the list\n * @param {function} children A `function(props)` rendering the list and items (see `childProps`)\n * @param {?number} [buffer=0.5] A number [0...1] as a % of the visible region to render additionally\n * @param {?boolean} [lazy=true] Toggles the lazy functionality\n * @param {?boolean} [dispose=false] Toggles disposing items when they lose visibility\n * @param {?function} onChange Optional change callback\n * @param {?function} container Optional, default scroll container is `element.offsetParent`\n * @return {object} The rendered children\n **/\nexport default ({\n  height,\n  total,\n  children,\n  lazy = true,\n  dispose = false,\n  buffer = 0.5,\n  onChange,\n  container = element => element?.offsetParent\n}) => {\n  // Required browser feature checks\n  const supported = typeof window.IntersectionObserver !== 'undefined';\n\n  // Active only if supported and enabled else renders all children\n  const active = lazy && supported;\n\n  // The range of items currently rendered\n  const [range, setRange] = useState([0, 0]);\n  const rangeRef = useRef([0, 0]);\n\n  // List container element\n  const listRef = useRef();\n\n  // Upper placeholder element\n  const upperRef = useRef();\n\n  // Lower placeholder element\n  const lowerRef = useRef();\n\n  // Height of a single item\n  const itemHeight = useMemo(() => height(0, 1), [height]);\n\n  // Height of all items\n  const totalHeight = useMemo(() => height(0, total), [height, total]);\n\n  // Height of items above the rendered range\n  const upperHeight = useMemo(() => height(0, range[0]), [height, range]);\n\n  // Height of items below the rendered range\n  const lowerHeight = useMemo(() => height(range[1], total), [\n    height,\n    range,\n    total\n  ]);\n\n  // Skipped if not enabled or supported\n  if (active) {\n    // Allows an update only once per frame\n    const requestUpdate = useRequestFrameOnce(\n      // Memoise the frame callback\n      useCallback(() => {\n        // Get the range of items visible in this frame\n        const visibleRange = visibleRangeOf(\n          // The list container\n          listRef.current,\n          // The list's scrolling parent container\n          container(listRef.current),\n          buffer,\n          total,\n          itemHeight\n        );\n\n        // Merge ranges\n        const effectiveRange =\n          // If dispose, render visible range only\n          dispose\n            ? visibleRange\n            : // If not dispose, expand current range with visible range\n              rangeUnion(rangeRef.current, visibleRange);\n\n        // Avoid duplicate render calls as state is not set immediate\n        if (!rangeEqual(rangeRef.current, effectiveRange)) {\n          // Store the update in a ref immediately\n          rangeRef.current = effectiveRange;\n\n          // Apply the update in the next render\n          setRange(effectiveRange);\n        }\n      }, [buffer, total, itemHeight, dispose, container])\n    );\n\n    // Memoised observer options\n    const observerOptions = useMemo(\n      () => ({\n        // Create a threshold point for every item\n        threshold: thresholds(total)\n      }),\n      [total]\n    );\n\n    // Updates on changes in visibility at the given thresholds (intersection ratios)\n    useIntersection(listRef, observerOptions, requestUpdate);\n    useIntersection(upperRef, observerOptions, requestUpdate);\n    useIntersection(lowerRef, observerOptions, requestUpdate);\n\n    // Updates on changes in item dimensions\n    useLayoutEffect(() => requestUpdate(), [\n      total,\n      itemHeight,\n      totalHeight,\n      requestUpdate\n    ]);\n  }\n\n  // Memoised child props for user to apply as needed\n  const childProps = useMemo(\n    () => ({\n      listRef,\n      upperRef,\n      lowerRef,\n      total,\n      start: active ? range[0] : 0,\n      end: active ? range[1] : total,\n      listStyle: {\n        // Relative for placeholder positioning\n        position: 'relative',\n        // List must always have the correct height\n        height: active ? totalHeight : undefined,\n        // List must always pad missing items (upper at least)\n        paddingTop: active ? upperHeight : undefined\n      },\n      upperStyle: {\n        position: 'absolute',\n        display: !active ? 'none' : undefined,\n        height: upperHeight,\n        width: '100%',\n        // Upper placeholder must always snap to top edge\n        top: '0'\n      },\n      lowerStyle: {\n        position: 'absolute',\n        display: !active ? 'none' : undefined,\n        height: lowerHeight,\n        width: '100%',\n        // Lower placeholder must always snap to bottom edge\n        bottom: '0'\n      }\n    }),\n    [\n      active,\n      range,\n      total,\n      listRef,\n      upperRef,\n      lowerRef,\n      totalHeight,\n      upperHeight,\n      lowerHeight\n    ]\n  );\n\n  // Optional change callback\n  onChange && onChange(childProps);\n\n  // Render the children\n  return children(childProps);\n};\n\n/**\n * Returns a range in the form `[start, end]` clamped inside `[min, max]`\n * @param {number} start The start of the range\n * @param {number} end The end of the range\n * @param {number} min The range minimum\n * @param {number} max The range maximum\n * @returns {array} The clamped range\n */\nexport const range = (start, end, min, max) => [\n  Math.max(Math.min(start, max), min),\n  Math.max(Math.min(end, max), min)\n];\n\n/**\n * Returns the union of both ranges\n * @param {array} rangeA The first range `[start, end]`\n * @param {array} rangeB The second range `[start, end]`\n * @returns {array} The range union\n */\nexport const rangeUnion = (rangeA, rangeB) => [\n  Math.min(rangeA[0], rangeB[0]),\n  Math.max(rangeA[1], rangeB[1])\n];\n\n/**\n * Returns true if the ranges have the same `start` and `end` values\n * @param {array} rangeA The first range `[start, end]`\n * @param {array} rangeB The second range `[start, end]`\n * @returns {boolean} True if ranges are equal else false\n */\nexport const rangeEqual = (rangeA, rangeB) =>\n  rangeA[0] === rangeB[0] && rangeA[1] === rangeB[1];\n\n/**\n * Gets the range of items inside the container's screen bounds.\n * Assumes a single fixed height for all child items.\n * Only considers visibility along the vertical y-axis (i.e. only top, bottom bounds).\n * @param {HTMLElement} element The target element (e.g. list container)\n * @param {?HTMLElement} container The clipping container of the target (e.g. scroll container)\n * @param {number} buffer A number [0...1] as a % of the container to render additionally\n * @param {number} childTotal The total count of all children in the target (e.g. list row count)\n * @param {number} childHeight Height of a single child element (e.g. height of one list row)\n * @returns {array} The calculated range of visible items as `[start, end]`\n */\nconst visibleRangeOf = (\n  element,\n  container,\n  buffer,\n  childTotal,\n  childHeight\n) => {\n  // Check element exists\n  if (!element) {\n    return [0, 0];\n  }\n\n  // If no container use the element itself\n  if (!container) {\n    container = element;\n  }\n\n  // Find the clipping container bounds (e.g. scroll container)\n  const clip = container.getBoundingClientRect();\n\n  // Find element bounds (e.g. list container inside scroll container)\n  const list = element.getBoundingClientRect();\n\n  // Find the number of items to buffer\n  const bufferCount = Math.ceil((buffer * clip.height) / childHeight);\n\n  // When clip is fully above viewport or element is fully above clip\n  if (clip.bottom < 0 || list.bottom < clip.top) {\n    // Only bottom part of the buffer in range\n    return range(childTotal - bufferCount, childTotal, 0, childTotal);\n  }\n\n  // Get the viewport bounds\n  const viewport = {\n    top: 0,\n    bottom: window.innerHeight || document.documentElement.clientHeight\n  };\n\n  // When clip is fully below viewport or element is fully below clip\n  if (clip.top > viewport.bottom || list.top > clip.bottom) {\n    // Only top part of the buffer in range\n    return range(0, bufferCount, 0, childTotal);\n  }\n\n  // Find intersection of clip and viewport now overlap guaranteed\n  const top = Math.max(clip.top, viewport.top);\n  const bottom = Math.min(clip.bottom, viewport.bottom);\n\n  // Find unbounded item range within the intersection\n  const start = Math.floor((top - list.top) / childHeight);\n  const end = Math.ceil((bottom - list.top) / childHeight);\n\n  // Apply buffer and clamp unbounded range to list bounds\n  return range(start - bufferCount, end + bufferCount, 0, childTotal);\n};\n\n/**\n * A hook to create a callback that runs once, at the end of the frame\n * @param {function} callback The callback\n * @returns {function} The wrapped callback\n */\nconst useRequestFrameOnce = callback => {\n  const request = useRef();\n\n  // Allow only a single callback per-frame\n  return useCallback(() => {\n    cancelAnimationFrame(request.current);\n    request.current = requestAnimationFrame(callback);\n  }, [request, callback]);\n};\n\n/**\n * Generates an array of the form [0, ...n / total]\n * except where total is `0` where it returns `[0]`.\n * @param {number} total The total number of thresholds to create\n * @returns {array} The threshold array\n */\nexport const thresholds = total =>\n  total === 0\n    ? [0]\n    : [...Array.from({ length: total }, (_, i) => i / total), 1];\n\n/**\n * A hook that creates and manages an IntersectionObserver for the given element\n * @param {object} element A React.Ref from the target element\n * @param {object} options An IntersectionObserver options object\n * @param {function} callback A function to call with IntersectionObserver changes\n */\nconst useIntersection = (element, options, callback) => {\n  const observer = useRef();\n\n  // After rendering and layout\n  return useLayoutEffect(() => {\n    // Check the element is ready\n    if (!element.current) {\n      return;\n    }\n\n    // Dispose any previous observer\n    if (observer.current) {\n      observer.current.disconnect();\n    }\n\n    // Create a new observer\n    observer.current = new window.IntersectionObserver(callback, options);\n    observer.current.observe(element.current);\n\n    // Manually callback as element may already be visible\n    callback();\n  }, [callback, element, options]);\n};\n","import React from 'react';\nimport modifiers from '../../utils/modifiers';\nimport { connect } from 'react-redux';\nimport NodeListRow, { nodeListRowHeight } from './node-list-row';\nimport LazyList from '../lazy-list';\n\nconst NodeRowList = ({\n  items = [],\n  group,\n  collapsed,\n  onItemClick,\n  onItemChange,\n  onItemMouseEnter,\n  onItemMouseLeave\n}) => (\n  <ul\n    className={modifiers(\n      'pipeline-nodelist__children',\n      { closed: collapsed },\n      'pipeline-nodelist__list pipeline-nodelist__list--nested'\n    )}>\n    {items.map(item => (\n      <NodeListRow\n        container=\"li\"\n        key={item.id}\n        id={item.id}\n        kind={group.kind}\n        label={item.highlightedLabel}\n        name={item.name}\n        type={item.type}\n        active={item.active}\n        checked={item.checked}\n        disabled={item.disabled}\n        faded={item.faded}\n        visible={item.visible}\n        selected={item.selected}\n        unset={item.unset}\n        visibleIcon={item.visibleIcon}\n        invisibleIcon={item.invisibleIcon}\n        onClick={() => onItemClick(item)}\n        onMouseEnter={() => onItemMouseEnter(item)}\n        onMouseLeave={() => onItemMouseLeave(item)}\n        onChange={e => onItemChange(item, !e.target.checked)}\n      />\n    ))}\n  </ul>\n);\n\nconst NodeRowLazyList = ({\n  items = [],\n  group,\n  collapsed,\n  onItemClick,\n  onItemChange,\n  onItemMouseEnter,\n  onItemMouseLeave\n}) => (\n  <LazyList\n    height={(start, end) => (end - start) * nodeListRowHeight}\n    total={items.length}>\n    {({\n      start,\n      end,\n      total,\n      listRef,\n      upperRef,\n      lowerRef,\n      listStyle,\n      upperStyle,\n      lowerStyle\n    }) => (\n      <ul\n        ref={listRef}\n        style={listStyle}\n        className={modifiers(\n          'pipeline-nodelist__children',\n          { closed: collapsed },\n          'pipeline-nodelist__list pipeline-nodelist__list--nested'\n        )}>\n        <li\n          className={modifiers('pipeline-nodelist__placeholder-upper', {\n            fade: start !== end && start > 0\n          })}\n          ref={upperRef}\n          style={upperStyle}\n        />\n        <li\n          className={modifiers('pipeline-nodelist__placeholder-lower', {\n            fade: start !== end && end < total\n          })}\n          ref={lowerRef}\n          style={lowerStyle}\n        />\n        {items.slice(start, end).map(item => (\n          <NodeListRow\n            container=\"li\"\n            key={item.id}\n            id={item.id}\n            kind={group.kind}\n            label={item.highlightedLabel}\n            name={item.name}\n            type={item.type}\n            active={item.active}\n            checked={item.checked}\n            disabled={item.disabled}\n            faded={item.faded}\n            visible={item.visible}\n            selected={item.selected}\n            unset={item.unset}\n            visibleIcon={item.visibleIcon}\n            invisibleIcon={item.invisibleIcon}\n            onClick={() => onItemClick(item)}\n            onMouseEnter={() => onItemMouseEnter(item)}\n            onMouseLeave={() => onItemMouseLeave(item)}\n            onChange={e => onItemChange(item, !e.target.checked)}\n          />\n        ))}\n      </ul>\n    )}\n  </LazyList>\n);\n\nexport const mapStateToProps = (state, ownProps) => ({\n  lazy: state.flags.lazy,\n  ...ownProps\n});\n\nexport default connect(mapStateToProps)(props =>\n  props.lazy ? <NodeRowLazyList {...props} /> : <NodeRowList {...props} />\n);\n","import React from 'react';\nimport classnames from 'classnames';\nimport NodeListRow from './node-list-row';\nimport NodeRowList from './node-list-row-list';\n\nexport const NodeListGroup = ({\n  items,\n  group,\n  collapsed,\n  id,\n  name,\n  kind,\n  checked,\n  unset,\n  childCount,\n  allUnset,\n  visibleIcon,\n  invisibleIcon,\n  onToggleChecked,\n  onToggleCollapsed,\n  onItemClick,\n  onItemChange,\n  onItemMouseEnter,\n  onItemMouseLeave\n}) => (\n  <li\n    className={classnames(\n      'pipeline-nodelist__group',\n      `pipeline-nodelist__group--type-${id}`,\n      `pipeline-nodelist__group--kind-${kind}`,\n      {\n        'pipeline-nodelist__group--all-unset': allUnset\n      }\n    )}>\n    <h3 className=\"pipeline-nodelist__heading\">\n      <NodeListRow\n        id={id}\n        kind={kind}\n        name={name}\n        label={`${name} <i>${childCount}</i>`}\n        unset={unset}\n        checked={checked}\n        visibleIcon={visibleIcon}\n        invisibleIcon={invisibleIcon}\n        onChange={e => {\n          onToggleChecked(id, !e.target.checked);\n        }}>\n        <button\n          aria-label={`${collapsed ? 'Show' : 'Hide'} ${name.toLowerCase()}`}\n          onClick={() => onToggleCollapsed(id)}\n          className={classnames('pipeline-type-group-toggle', {\n            'pipeline-type-group-toggle--alt': collapsed\n          })}\n        />\n      </NodeListRow>\n    </h3>\n    <NodeRowList\n      items={items}\n      group={group}\n      collapsed={collapsed}\n      onItemClick={onItemClick}\n      onItemChange={onItemChange}\n      onItemMouseEnter={onItemMouseEnter}\n      onItemMouseLeave={onItemMouseLeave}\n    />\n  </li>\n);\n\nexport default NodeListGroup;\n","import React, { useState } from 'react';\nimport { loadState, saveState } from '../../store/helpers';\nimport NodeListGroup from './node-list-group';\n\nconst storedState = loadState();\n\nconst NodeListGroups = ({\n  items,\n  sections,\n  groups,\n  searchValue,\n  onToggleGroupChecked,\n  onItemClick,\n  onItemMouseEnter,\n  onItemMouseLeave,\n  onItemChange\n}) => {\n  const [collapsed, setCollapsed] = useState(storedState.groupsCollapsed || {});\n\n  // Collapse/expand node group\n  const onToggleGroupCollapsed = typeID => {\n    const groupsCollapsed = Object.assign({}, collapsed, {\n      [typeID]: !collapsed[typeID]\n    });\n    setCollapsed(groupsCollapsed);\n    saveState({ groupsCollapsed });\n  };\n\n  return sections.map(section => (\n    <nav className=\"pipeline-nodelist-section kedro\" key={section.name}>\n      <h2 className=\"pipeline-nodelist-section__title\">{section.name}</h2>\n      <ul className=\"pipeline-nodelist__list\">\n        {section.types.map(typeId => {\n          const group = groups[typeId];\n          return (\n            <NodeListGroup\n              group={group}\n              items={items[group.id] || []}\n              key={group.id}\n              id={group.id}\n              name={group.name}\n              kind={group.kind}\n              checked={group.checked}\n              childCount={group.count}\n              allUnset={group.allUnset}\n              visibleIcon={group.visibleIcon}\n              invisibleIcon={group.invisibleIcon}\n              collapsed={Boolean(searchValue) ? false : collapsed[group.id]}\n              onToggleCollapsed={onToggleGroupCollapsed}\n              onToggleChecked={onToggleGroupChecked}\n              onItemClick={onItemClick}\n              onItemChange={onItemChange}\n              onItemMouseEnter={onItemMouseEnter}\n              onItemMouseLeave={onItemMouseLeave}\n            />\n          );\n        })}\n      </ul>\n    </nav>\n  ));\n};\n\nexport default NodeListGroups;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport NodeListSearch from './node-list-search';\nimport NodeListGroups from './node-list-groups';\nimport './styles/node-list.css';\n\n/**\n * Scrollable list of toggleable items, with search & filter functionality\n */\nconst NodeList = ({\n  faded,\n  items,\n  sections,\n  groups,\n  searchValue,\n  getGroupState,\n  onUpdateSearchValue,\n  onToggleGroupChecked,\n  onItemClick,\n  onItemMouseEnter,\n  onItemMouseLeave,\n  onItemChange\n}) => (\n  <div\n    className={classnames('pipeline-nodelist', {\n      'pipeline-nodelist--fade': faded\n    })}>\n    <NodeListSearch\n      onUpdateSearchValue={onUpdateSearchValue}\n      searchValue={searchValue}\n    />\n    <Scrollbars\n      className=\"pipeline-nodelist-scrollbars\"\n      style={{ width: 'auto' }}\n      autoHide\n      hideTracksWhenNotNeeded>\n      <NodeListGroups\n        items={items}\n        sections={sections}\n        groups={groups}\n        searchValue={searchValue}\n        getGroupState={getGroupState}\n        onItemClick={onItemClick}\n        onItemMouseEnter={onItemMouseEnter}\n        onItemMouseLeave={onItemMouseLeave}\n        onItemChange={onItemChange}\n        onToggleGroupChecked={onToggleGroupChecked}\n      />\n    </Scrollbars>\n  </div>\n);\n\nexport default NodeList;\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg\n    className={className}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\">\n    <rect x=\"8.5\" y=\"9\" width=\"5\" height=\"5\" rx=\"1\" strokeWidth=\"1.5\" />\n  </svg>\n);\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg\n    className={className}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\">\n    <rect x=\"8.5\" y=\"9\" width=\"5\" height=\"5\" rx=\"1\" strokeWidth=\"2\" />\n  </svg>\n);\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg\n    className={className}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\">\n    <rect x=\"6.5\" y=\"10.5\" width=\"8\" height=\"1.5\" />\n  </svg>\n);\n","import { createSelector } from 'reselect';\nimport utils from '@quantumblack/kedro-ui/lib/utils';\nimport { sidebar } from '../../config';\nimport IndicatorIcon from '../icons/indicator';\nimport IndicatorOffIcon from '../icons/indicator-off';\nimport IndicatorPartialIcon from '../icons/indicator-partial';\nimport VisibleIcon from '../icons/visible';\nimport InvisibleIcon from '../icons/invisible';\nconst { escapeRegExp, getHighlightedText } = utils;\n\n/**\n * Get a list of IDs of the visible nodes\n * @param {object} nodes Grouped nodes\n * @return {array} List of node IDs\n */\nexport const getNodeIDs = nodes => {\n  const getNodeIDs = type => nodes[type].map(node => node.id);\n  const concatNodeIDs = (nodeIDs, type) => nodeIDs.concat(getNodeIDs(type));\n\n  return Object.keys(nodes).reduce(concatNodeIDs, []);\n};\n\n/**\n * Add a new highlightedLabel field to each of the node objects\n * @param {object} nodes Grouped lists of nodes\n * @param {string} searchValue Search term\n * @return {object} The grouped nodes with highlightedLabel fields added\n */\nexport const highlightMatch = (nodes, searchValue) => {\n  const addHighlightedLabel = node => ({\n    highlightedLabel: getHighlightedText(node.name, searchValue),\n    ...node\n  });\n  const addLabelsToNodes = (newNodes, type) => ({\n    ...newNodes,\n    [type]: nodes[type].map(addHighlightedLabel)\n  });\n\n  return Object.keys(nodes).reduce(addLabelsToNodes, {});\n};\n\n/**\n * Check whether a name matches the search text\n * @param {string} name\n * @param {string} searchValue\n * @return {boolean} True if match\n */\nexport const nodeMatchesSearch = (node, searchValue) => {\n  const valueRegex = searchValue\n    ? new RegExp(escapeRegExp(searchValue), 'gi')\n    : '';\n  return Boolean(node.name.match(valueRegex));\n};\n\n/**\n * Return only the results that match the search text\n * @param {object} nodes Grouped lists of nodes\n * @param {string} searchValue Search term\n * @return {object} Grouped nodes\n */\nexport const filterNodes = (nodes, searchValue) => {\n  const filterNodesByType = type =>\n    nodes[type].filter(node => nodeMatchesSearch(node, searchValue));\n  const filterNodeLists = (newNodes, type) => ({\n    ...newNodes,\n    [type]: filterNodesByType(type)\n  });\n\n  return Object.keys(nodes).reduce(filterNodeLists, {});\n};\n\n/**\n * Return filtered/highlighted nodes, and filtered node IDs\n * @param {object} nodes Grouped lists of nodes\n * @param {string} searchValue Search term\n * @return {object} Grouped nodes, and node IDs\n */\nexport const getFilteredNodes = createSelector(\n  [state => state.nodes, state => state.searchValue],\n  (nodes, searchValue) => {\n    const filteredNodes = filterNodes(nodes, searchValue);\n\n    return {\n      filteredNodes: highlightMatch(filteredNodes, searchValue),\n      nodeIDs: getNodeIDs(filteredNodes)\n    };\n  }\n);\n\n/**\n * Return filtered/highlighted tags\n * @param {object} tags List of tags\n * @param {string} searchValue Search term\n * @return {object} Grouped tags\n */\nexport const getFilteredTags = createSelector(\n  [state => state.tags, state => state.searchValue],\n  (tags, searchValue) =>\n    highlightMatch(filterNodes({ tag: tags }, searchValue), searchValue)\n);\n\n/**\n * Return filtered/highlighted tag list items\n * @param {object} filteredTags List of filtered tags\n * @param {object} tagsEnabled Map of enabled tags\n * @return {array} Node list items\n */\nexport const getFilteredTagItems = createSelector(\n  [getFilteredTags, state => state.tagsEnabled],\n  (filteredTags, tagsEnabled) => ({\n    tag: filteredTags.tag.map(tag => ({\n      ...tag,\n      type: 'tag',\n      visibleIcon: IndicatorIcon,\n      invisibleIcon: IndicatorOffIcon,\n      active: false,\n      selected: false,\n      faded: false,\n      visible: true,\n      disabled: false,\n      unset: typeof tagsEnabled[tag.id] === 'undefined',\n      checked: tagsEnabled[tag.id] === true\n    }))\n  })\n);\n\n/**\n * Compares items for sorting in groups first\n * by enabled status (by tag) and then alphabeticaly (by name)\n * @param {object} itemA First item to compare\n * @param {object} itemB Second item to compare\n * @return {number} Comparison result\n */\nconst compareEnabledThenAlpha = (itemA, itemB) => {\n  const byEnabledTag = Number(itemA.disabled_tag) - Number(itemB.disabled_tag);\n  const byAlpha = itemA.name.localeCompare(itemB.name);\n  return byEnabledTag !== 0 ? byEnabledTag : byAlpha;\n};\n\n/**\n * Compares items for sorting in groups first\n * by enabled status (by tag) and then alphabeticaly (by name)\n * @param {object} itemA First item to compare\n * @param {object} itemB Second item to compare\n * @return {number} Comparison result\n */\nexport const getFilteredNodeItems = createSelector(\n  [getFilteredNodes, state => state.nodeSelected],\n  ({ filteredNodes }, nodeSelected) => {\n    const result = {};\n\n    for (const type of Object.keys(filteredNodes)) {\n      result[type] = filteredNodes[type]\n        .map(node => {\n          const checked = !node.disabled_node;\n          const disabled = node.disabled_tag || node.disabled_type;\n          return {\n            ...node,\n            visibleIcon: VisibleIcon,\n            invisibleIcon: InvisibleIcon,\n            active: undefined,\n            selected: nodeSelected[node.id],\n            faded: node.disabled_node || disabled,\n            visible: !disabled && checked,\n            unset: false,\n            checked,\n            disabled\n          };\n        })\n        .sort(compareEnabledThenAlpha);\n    }\n\n    return result;\n  }\n);\n\n/**\n * Get formatted list of sections\n * @return {array} List of sections\n */\nexport const getSections = createSelector(() =>\n  Object.keys(sidebar).map(name => ({\n    name,\n    types: Object.values(sidebar[name])\n  }))\n);\n\n/**\n * Returns groups of items per type\n * @param {array} types List of node types\n * @param {array} items List of items\n * @return {array} List of groups\n */\nexport const getGroups = createSelector(\n  [state => state.types, state => state.items],\n  (nodeTypes, items) => {\n    const groups = {};\n    const itemTypes = [...nodeTypes, { id: 'tag' }];\n\n    for (const itemType of itemTypes) {\n      const itemsOfType = items[itemType.id] || [];\n\n      groups[itemType.id] = {\n        type: itemType,\n        id: itemType.id,\n        name: itemType.name,\n        kind: 'toggle',\n        visibleIcon: VisibleIcon,\n        invisibleIcon: InvisibleIcon,\n        checked: !itemType.disabled,\n        count: itemsOfType.length,\n        allUnset: itemsOfType.every(item => item.unset),\n        allChecked: itemsOfType.every(item => item.checked)\n      };\n\n      if (itemType.id === 'tag') {\n        const group = groups[itemType.id];\n\n        Object.assign(group, {\n          name: 'Tags',\n          kind: 'filter',\n          checked: !group.allUnset,\n          visibleIcon: group.allChecked ? IndicatorIcon : IndicatorPartialIcon,\n          invisibleIcon: IndicatorOffIcon\n        });\n      }\n    }\n\n    return groups;\n  }\n);\n\n/**\n * Returns filtered/highlighted tag and node list items\n * @param {object} filteredTags List of filtered tags\n * @param {object} tagsEnabled Map of enabled tags\n * @return {array} Node list items\n */\nexport const getFilteredItems = createSelector(\n  [getFilteredNodeItems, getFilteredTagItems],\n  (filteredNodeItems, filteredTagItems) => {\n    return {\n      ...filteredTagItems,\n      ...filteredNodeItems\n    };\n  }\n);\n","import { createSelector } from 'reselect';\nimport { getNodeDisabled } from './disabled';\nimport { arrayToObject } from '../utils';\n\nconst getNodeIDs = state => state.node.ids;\nconst getNodeType = state => state.node.type;\nconst getNodeTypeIDs = state => state.nodeType.ids;\nconst getNodeTypeName = state => state.nodeType.name;\nconst getNodeTypeDisabled = state => state.nodeType.disabled;\n\n/**\n * Calculate the total number of nodes (and the number of visible nodes)\n * for each node-type\n */\nexport const getTypeNodeCount = createSelector(\n  [getNodeTypeIDs, getNodeIDs, getNodeType, getNodeDisabled],\n  (types, nodeIDs, nodeType, nodeDisabled) =>\n    arrayToObject(types, type => {\n      const typeNodeIDs = nodeIDs.filter(nodeID => nodeType[nodeID] === type);\n      const visibleTypeNodeIDs = typeNodeIDs.filter(\n        nodeID => !nodeDisabled[nodeID]\n      );\n      return {\n        total: typeNodeIDs.length,\n        visible: visibleTypeNodeIDs.length\n      };\n    })\n);\n\n/**\n * Get formatted list of node type objects\n */\nexport const getNodeTypes = createSelector(\n  [getNodeTypeIDs, getNodeTypeName, getNodeTypeDisabled, getTypeNodeCount],\n  (types, typeName, typeDisabled, typeNodeCount) =>\n    types.map(id => ({\n      id,\n      name: typeName[id],\n      disabled: Boolean(typeDisabled[id]),\n      nodeCount: typeNodeCount[id]\n    }))\n);\n","import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport utils from '@quantumblack/kedro-ui/lib/utils';\nimport NodeList from './node-list';\nimport { getFilteredItems, getGroups, getSections } from './node-list-items';\nimport { toggleTagActive, toggleTagFilter } from '../../actions/tags';\nimport { toggleTypeDisabled } from '../../actions/node-type';\nimport { getNodeTypes } from '../../selectors/node-types';\nimport { getTagData } from '../../selectors/tags';\nimport { getGroupedNodes, getNodeSelected } from '../../selectors/nodes';\nimport {\n  loadNodeData,\n  toggleNodeHovered,\n  toggleNodesDisabled\n} from '../../actions/nodes';\nimport './styles/node-list.css';\n\nconst isTagType = type => type === 'tag';\n\n/**\n * Provides data from the store to populate a NodeList component.\n * Also handles user interaction and dispatches updates back to the store.\n *\n * The data are hierarchical but provided through flat lists in the form of:\n *\n * Sections (first level) e.g. Categories, Elements\n * Groups (second level) e.g. Tags, Nodes, Datasets, Parameters\n * Items (third level) e.g. 'Data Engineering', 'Content Optimisation'\n */\nconst NodeListProvider = ({\n  faded,\n  nodes,\n  nodeSelected,\n  sections,\n  tags,\n  tagsEnabled,\n  types,\n  onToggleNodesDisabled,\n  onToggleNodeSelected,\n  onToggleNodeActive,\n  onToggleTagActive,\n  onToggleTagFilter,\n  onToggleTypeDisabled\n}) => {\n  const [searchValue, updateSearchValue] = useState('');\n  const items = getFilteredItems({\n    nodes,\n    tags,\n    tagsEnabled,\n    nodeSelected,\n    searchValue\n  });\n  const groups = getGroups({ types, items });\n\n  const onItemClick = item => {\n    if (isTagType(item.type)) {\n      onTagItemChange(item, item.checked);\n    } else {\n      if (item.faded || item.selected) {\n        onToggleNodeSelected(null);\n      } else {\n        onToggleNodeSelected(item.id);\n      }\n    }\n  };\n\n  const onItemChange = (item, checked) => {\n    if (isTagType(item.type)) {\n      onTagItemChange(item, checked);\n    } else {\n      if (checked) {\n        onToggleNodeActive(null);\n      }\n\n      onToggleNodesDisabled([item.id], checked);\n    }\n  };\n\n  const onItemMouseEnter = item => {\n    if (isTagType(item.type)) {\n      onToggleTagActive(item.id, true);\n    } else if (item.visible) {\n      onToggleNodeActive(item.id);\n    }\n  };\n\n  const onItemMouseLeave = item => {\n    if (isTagType(item.type)) {\n      onToggleTagActive(item.id, false);\n    } else if (item.visible) {\n      onToggleNodeActive(null);\n    }\n  };\n\n  const onToggleGroupChecked = (type, checked) => {\n    if (isTagType(type)) {\n      // Filter all tags if at least one tag item set, otherwise enable all tags\n      const tagItems = items[type] || [];\n      const someTagSet = tagItems.some(tagItem => !tagItem.unset);\n      const allTagsValue = someTagSet ? undefined : true;\n      onToggleTagFilter(tagItems.map(tag => tag.id), allTagsValue);\n    } else {\n      onToggleTypeDisabled(type, checked);\n    }\n  };\n\n  const onTagItemChange = (tagItem, wasChecked) => {\n    const tagItems = items[tagItem.type] || [];\n    const oneTagChecked =\n      tagItems.filter(tagItem => tagItem.checked).length === 1;\n    const shouldResetTags = wasChecked && oneTagChecked;\n\n    if (shouldResetTags) {\n      // Unset all tags\n      onToggleTagFilter(tags.map(tag => tag.id), undefined);\n    } else {\n      // Toggle the tag\n      onToggleTagFilter([tagItem.id], !wasChecked);\n    }\n\n    // Reset node selection\n    onToggleNodeSelected(null);\n    onToggleNodeActive(null);\n  };\n\n  // Deselect node on Escape key\n  const handleKeyDown = event => {\n    utils.handleKeyEvent(event.keyCode, {\n      escape: () => onToggleNodeSelected(null)\n    });\n  };\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  });\n\n  return (\n    <NodeList\n      faded={faded}\n      items={items}\n      sections={sections}\n      groups={groups}\n      searchValue={searchValue}\n      onUpdateSearchValue={updateSearchValue}\n      onToggleGroupChecked={onToggleGroupChecked}\n      onItemClick={onItemClick}\n      onItemMouseEnter={onItemMouseEnter}\n      onItemMouseLeave={onItemMouseLeave}\n      onItemChange={onItemChange}\n    />\n  );\n};\n\nexport const mapStateToProps = state => ({\n  tags: getTagData(state),\n  tagsEnabled: state.tag.enabled,\n  nodes: getGroupedNodes(state),\n  nodeSelected: getNodeSelected(state),\n  sections: getSections(state),\n  types: getNodeTypes(state)\n});\n\nexport const mapDispatchToProps = dispatch => ({\n  onToggleTagActive: (tagIDs, active) => {\n    dispatch(toggleTagActive(tagIDs, active));\n  },\n  onToggleTagFilter: (tagIDs, enabled) => {\n    dispatch(toggleTagFilter(tagIDs, enabled));\n  },\n  onToggleTypeDisabled: (typeID, disabled) => {\n    dispatch(toggleTypeDisabled(typeID, disabled));\n  },\n  onToggleNodeSelected: nodeID => {\n    dispatch(loadNodeData(nodeID));\n  },\n  onToggleNodeActive: nodeID => {\n    dispatch(toggleNodeHovered(nodeID));\n  },\n  onToggleNodesDisabled: (nodeIDs, disabled) => {\n    dispatch(toggleNodesDisabled(nodeIDs, disabled));\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(NodeListProvider);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport './icon-button.css';\n\n/**\n * Icon button component\n */\nconst IconButton = ({\n  container: Container = 'li',\n  ariaLabel,\n  ariaLive,\n  className,\n  disabled,\n  icon,\n  labelText,\n  onClick,\n  visible,\n  active\n}) => {\n  const Icon = icon;\n\n  return visible ? (\n    <Container>\n      <button\n        aria-label={ariaLabel}\n        aria-live={ariaLive}\n        className={classnames(className, {\n          'pipeline-icon-toolbar__button': true,\n          'pipeline-icon-toolbar__button--active': active\n        })}\n        disabled={disabled}\n        onClick={onClick}>\n        {Icon && <Icon className=\"pipeline-icon\" />}\n        {labelText && (\n          <span className=\"pipeline-toolbar__label\">{labelText}</span>\n        )}\n      </button>\n    </Container>\n  ) : null;\n};\n\nIconButton.propTypes = {\n  ariaLabel: PropTypes.string,\n  ariaLive: PropTypes.string,\n  disabled: PropTypes.bool,\n  icon: PropTypes.func,\n  labelText: PropTypes.string,\n  onClick: PropTypes.func,\n  visible: PropTypes.bool,\n  active: PropTypes.bool\n};\n\nIconButton.defaultProps = {\n  ariaLabel: null,\n  ariaLive: null,\n  disabled: false,\n  icon: null,\n  labelText: null,\n  onClick: null,\n  visible: true,\n  active: false\n};\n\nexport default IconButton;\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M15.3 3.3l1.4 1.4L9.4 12l7.3 7.3-1.4 1.4L6.6 12z\" />\n  </svg>\n);\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg className={className} viewBox=\"0 0 20 20\">\n    <path d=\"M10 0a10 10 0 1 1 0 20 10 10 0 0 1 0-20zm0 2v16a8 8 0 1 0 0-16z\" />\n  </svg>\n);\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg className={className} viewBox=\"0 0 22 20\">\n    <path d=\"M22 0v20H7.3L0 10 7.3 0H22zm-6.2 5h-3.6L10 15h2l.3-1.8h3.4L16 15H18L15.8 5zm-1.5 1.7l1 4.7h-2.6l1-4.7h.6z\" />\n  </svg>\n);\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg className={className} viewBox=\"0 0 24 24\">\n    <path d=\"M5 16v4h14v-4h2v4c0 1-.8 2-1.9 2H5a2 2 0 01-2-2v-4h2zm8-14v11l3.5-3.5L18 11l-6 6-6-6 1.5-1.5L11 13V2h2z\" />\n  </svg>\n);\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg\n    className={className}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 20 20\">\n    <path d=\"M9.97 0l10.09 5-5.04 2.5 5.04 2.5-5.04 2.5 5.04 2.5L10 20 0 15l5-2.5L0 10l5.02-2.5L0 5zM7.23 13.61L4.47 15 10 17.77 15.56 15l-2.79-1.38L10 15zm5.56-4.98L9.99 10 7.26 8.63l-2.77 1.38 3.56 1.77 1.96.95 2.1-1L15.57 10zm-2.82-6.4L4.47 5 10 7.77 15.56 5z\" />\n  </svg>\n);\n","import React from 'react';\nimport classnames from 'classnames';\nimport { connect } from 'react-redux';\nimport {\n  toggleExportModal,\n  toggleLayers,\n  toggleSidebar,\n  toggleTextLabels,\n  toggleTheme\n} from '../../actions';\nimport IconButton from '../icon-button';\nimport MenuIcon from '../icons/menu';\nimport ThemeIcon from '../icons/theme';\nimport LabelIcon from '../icons/label';\nimport ExportIcon from '../icons/export';\nimport LayersIcon from '../icons/layers';\nimport { getVisibleLayerIDs } from '../../selectors/disabled';\nimport './primary-toolbar.css';\n\n/**\n * Main contols for filtering the chart data\n * @param {Function} onToggleTheme Handle toggling theme between light/dark\n * @param {Function} onToggleTextLabels Handle toggling text labels on/off\n * @param {Boolean} textLabels Whether text labels are displayed\n * @param {string} theme Kedro UI light/dark theme\n */\nexport const PrimaryToolbar = ({\n  disableLayerBtn,\n  onToggleExportModal,\n  onToggleLayers,\n  onToggleSidebar,\n  onToggleTextLabels,\n  onToggleTheme,\n  textLabels,\n  theme,\n  visible,\n  visibleLayers\n}) => (\n  <>\n    <ul className=\"pipeline-primary-toolbar kedro\">\n      <IconButton\n        ariaLabel={`${visible.sidebar ? 'Hide' : 'Show'} menu`}\n        className={classnames(\n          'pipeline-menu-button',\n          'pipeline-menu-button--menu',\n          {\n            'pipeline-menu-button--inverse': !visible.sidebar\n          }\n        )}\n        onClick={() => onToggleSidebar(!visible.sidebar)}\n        icon={MenuIcon}\n        labelText={`${visible.sidebar ? 'Hide' : 'Show'} menu`}\n      />\n      <IconButton\n        ariaLive=\"polite\"\n        ariaLabel={`Change to ${theme === 'light' ? 'dark' : 'light'} theme`}\n        className={'pipeline-menu-button--theme'}\n        onClick={() => onToggleTheme(theme === 'light' ? 'dark' : 'light')}\n        icon={ThemeIcon}\n        labelText=\"Toggle theme\"\n        visible={visible.themeBtn}\n      />\n      <IconButton\n        ariaLive=\"polite\"\n        className={'pipeline-menu-button--labels'}\n        onClick={() => onToggleTextLabels(!textLabels)}\n        icon={LabelIcon}\n        labelText={`${textLabels ? 'Hide' : 'Show'} text labels`}\n        visible={visible.labelBtn}\n      />\n      <IconButton\n        ariaLabel=\"Export graph as SVG or PNG\"\n        className={'pipeline-menu-button--export'}\n        onClick={() => onToggleExportModal(true)}\n        icon={ExportIcon}\n        labelText=\"Export visualisation\"\n        visible={visible.exportBtn}\n      />\n      <IconButton\n        ariaLabel={`Turn data layers ${visibleLayers ? 'off' : 'on'}`}\n        className={'pipeline-menu-button--layers'}\n        onClick={() => onToggleLayers(!visibleLayers)}\n        icon={LayersIcon}\n        labelText={`${visibleLayers ? 'Hide' : 'Show'} layers`}\n        disabled={disableLayerBtn}\n        visible={visible.layerBtn}\n      />\n    </ul>\n  </>\n);\n\nexport const mapStateToProps = state => ({\n  disableLayerBtn: !state.layer.ids.length,\n  textLabels: state.textLabels,\n  theme: state.theme,\n  visible: state.visible,\n  visibleLayers: Boolean(getVisibleLayerIDs(state).length)\n});\n\nexport const mapDispatchToProps = dispatch => ({\n  onToggleExportModal: value => {\n    dispatch(toggleExportModal(value));\n  },\n  onToggleLayers: value => {\n    dispatch(toggleLayers(Boolean(value)));\n  },\n  onToggleSidebar: visible => {\n    dispatch(toggleSidebar(visible));\n  },\n  onToggleTextLabels: value => {\n    dispatch(toggleTextLabels(Boolean(value)));\n  },\n  onToggleTheme: value => {\n    dispatch(toggleTheme(value));\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(PrimaryToolbar);\n","import React from 'react';\nimport classnames from 'classnames';\n\nexport default ({ className }) => (\n  <svg\n    className={classnames(className, 'pipeline-icon--stroke')}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 20 20\">\n    <path\n      transform=\"translate(-3 -4)\"\n      strokeWidth=\"2\"\n      d=\"M20.573 6.875L15.352 8.75l-6-3.75L4 6.875v12.96l5.352-2.085 6 3.75 5.221-2.736zM15.352 8v12.75M9.352 5v12.75\"\n    />\n  </svg>\n);\n","import React from 'react';\nimport classnames from 'classnames';\n\nexport default ({ className }) => (\n  <svg\n    className={classnames(className, 'pipeline-icon--stroke')}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\">\n    <path\n      transform=\"translate(-1 1) rotate(90 11.5 12)\"\n      strokeWidth=\"2\"\n      d=\"M11.5 4L11.5 20\"\n    />\n    <path transform=\"translate(-1 1)\" strokeWidth=\"2\" d=\"M11.5 4L11.5 20\" />\n  </svg>\n);\n","import React from 'react';\nimport classnames from 'classnames';\n\nexport default ({ className }) => (\n  <svg\n    className={classnames(className, 'pipeline-icon--stroke')}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\">\n    <path\n      transform=\"translate(-1 1) rotate(90 11.5 12)\"\n      strokeWidth=\"2\"\n      d=\"M11.5 5L11.5 19\"\n    />\n  </svg>\n);\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg\n    className={className}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 26 26\">\n    <path\n      transform=\"translate(0 0)\"\n      d=\"M8.48 2.637V8h.002v.128H6.488V6.207c-1.531 1.457-2.485 3.515-2.485 5.796 0 4.418 3.581 8 8 8 .18 0 .359-.006.536-.018l.001 2c-.179.01-.359.015-.54.015-5.523 0-10-4.477-10-10 0-2.913 1.246-5.536 3.234-7.364H2.997V2.644l5.471-.001.011-.005zM12 2c5.523 0 10 4.477 10 10 0 2.927-1.258 5.56-3.262 7.39l2.29-.002v1.994h-5.485v-.028l-.003.001V19.18l.003-.001v-3.282h1.994v1.882c1.52-1.456 2.466-3.506 2.466-5.776 0-4.419-3.582-8-8-8-.176 0-.35.005-.524.016V2.013C11.652 2.004 11.825 2 12 2z\"\n    />\n  </svg>\n);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { toggleMiniMap, updateZoom } from '../../actions';\nimport { getChartZoom } from '../../selectors/layout';\nimport IconButton from '../icon-button';\nimport MapIcon from '../icons/map';\nimport PlusIcon from '../icons/plus';\nimport MinusIcon from '../icons/minus';\nimport ResetIcon from '../icons/reset';\nimport './minimap-toolbar.css';\n\n/**\n * Controls for minimap\n */\nexport const MiniMapToolbar = ({\n  onToggleMiniMap,\n  visible,\n  chartZoom,\n  onUpdateChartZoom\n}) => {\n  const { scale, minScale, maxScale } = chartZoom;\n\n  return (\n    <>\n      <ul className=\"pipeline-minimap-toolbar kedro\">\n        <IconButton\n          icon={MapIcon}\n          className={'pipeline-minimap-button pipeline-minimap-button--map'}\n          ariaLabel={`Turn minimap ${visible.miniMap ? 'off' : 'on'}`}\n          onClick={() => onToggleMiniMap(!visible.miniMap)}\n          labelText={`${visible.miniMap ? 'Hide' : 'Show'} minimap`}\n          visible={visible.miniMapBtn}\n          active={visible.miniMap}\n        />\n        <IconButton\n          icon={PlusIcon}\n          className={'pipeline-minimap-button pipeline-minimap-button--zoom-in'}\n          ariaLabel={'Zoom in'}\n          labelText={'Zoom in'}\n          visible={visible.miniMapBtn}\n          disabled={scale >= maxScale}\n          onClick={() => onUpdateChartZoom(scaleZoom(chartZoom, 1.3))}\n        />\n        <IconButton\n          icon={MinusIcon}\n          className={\n            'pipeline-minimap-button pipeline-minimap-button--zoom-out'\n          }\n          ariaLabel={'Zoom out'}\n          labelText={'Zoom out'}\n          visible={visible.miniMapBtn}\n          disabled={scale <= minScale}\n          onClick={() => onUpdateChartZoom(scaleZoom(chartZoom, 0.7))}\n        />\n        <IconButton\n          icon={ResetIcon}\n          className={'pipeline-minimap-button pipeline-minimap-button--reset'}\n          ariaLabel={'Reset zoom'}\n          labelText={'Reset zoom'}\n          visible={visible.miniMapBtn}\n          onClick={() => onUpdateChartZoom(scaleZoom(chartZoom, 0))}\n        />\n        <li>\n          <span className=\"pipeline-minimap-toolbar__scale\" title=\"Zoom level\">\n            {Math.round(100 * chartZoom.scale) || 100}%\n          </span>\n        </li>\n      </ul>\n    </>\n  );\n};\n\nconst scaleZoom = ({ scale }, factor) => ({\n  scale: scale * (factor || 1),\n  applied: false,\n  transition: true,\n  reset: factor === 0\n});\n\nexport const mapStateToProps = state => ({\n  visible: state.visible,\n  chartZoom: getChartZoom(state)\n});\n\nexport const mapDispatchToProps = dispatch => ({\n  onToggleMiniMap: value => {\n    dispatch(toggleMiniMap(value));\n  },\n  onUpdateChartZoom: transform => {\n    dispatch(updateZoom(transform));\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MiniMapToolbar);\n","import 'd3-transition';\n\nconst viewportMargin = 2;\n\n/**\n * Render viewport region\n */\nexport const drawViewport = function() {\n  const { mapSize } = this.props;\n  const { x, y, width, height } = this.getViewport();\n\n  const minX = Math.max(x, viewportMargin);\n  const minY = Math.max(y, viewportMargin);\n  const maxX = Math.min(x + width, mapSize.width - viewportMargin);\n  const maxY = Math.min(y + height, mapSize.height - viewportMargin);\n\n  this.el.viewport\n    .enter()\n    .attr('x', 0)\n    .attr('y', 0);\n\n  this.el.viewport\n    .attr('transform', `translate(${minX}, ${minY})`)\n    .attr('width', Math.max(0, maxX - minX))\n    .attr('height', Math.max(0, maxY - minY));\n};\n\n/**\n * Render nodes\n */\nexport const drawNodes = function() {\n  const {\n    centralNode,\n    linkedNodes,\n    nodeActive,\n    nodeSelected,\n    nodes\n  } = this.props;\n\n  this.el.nodes = this.el.nodeGroup\n    .selectAll('.pipeline-minimap-node')\n    .data(nodes, node => node.id);\n\n  const enterNodes = this.el.nodes\n    .enter()\n    .append('g')\n    .attr('class', 'pipeline-minimap-node');\n\n  enterNodes\n    .attr('transform', node => `translate(${node.x}, ${node.y})`)\n    .attr('opacity', 0);\n\n  enterNodes.append('rect');\n\n  this.el.nodes\n    .exit()\n    .transition('exit-nodes')\n    .duration(this.DURATION)\n    .attr('opacity', 0)\n    .remove();\n\n  this.el.nodes = this.el.nodes\n    .merge(enterNodes)\n    .attr('data-id', node => node.id)\n    .classed('pipeline-minimap-node--active', node => nodeActive[node.id])\n    .classed('pipeline-minimap-node--selected', node => nodeSelected[node.id])\n    .classed(\n      'pipeline-minimap-node--faded',\n      node => centralNode && !linkedNodes[node.id]\n    );\n\n  this.el.nodes\n    .transition('update-nodes')\n    .duration(this.DURATION)\n    .attr('opacity', 1)\n    .attr('transform', node => `translate(${node.x}, ${node.y})`)\n    .end()\n    .catch(() => {});\n\n  this.el.nodes\n    .select('rect')\n    .attr('width', node => node.width - sizeOffset(node))\n    .attr('height', node => node.height - sizeOffset(node))\n    .attr('x', node => (node.width - sizeOffset(node)) / -2)\n    .attr('y', node => (node.height - sizeOffset(node)) / -2);\n};\n\nconst sizeOffset = node => (node.type === 'task' ? 5 : 16);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport 'd3-transition';\nimport { interpolate } from 'd3-interpolate';\nimport { select, event } from 'd3-selection';\nimport { zoom, zoomIdentity, zoomTransform } from 'd3-zoom';\nimport { getNodeActive, getNodeSelected } from '../../selectors/nodes';\nimport { updateZoom } from '../../actions';\nimport { getChartSize, getChartZoom } from '../../selectors/layout';\nimport { getCentralNode, getLinkedNodes } from '../../selectors/linked-nodes';\nimport { drawNodes, drawViewport } from './draw';\nimport './styles/minimap.css';\n\n/**\n * Display a pipeline minimap, mostly rendered with D3\n */\nexport class MiniMap extends Component {\n  constructor(props) {\n    super(props);\n\n    this.DURATION = 700;\n    this.TRANSITION_WAIT = 200;\n    this.ZOOM_RATE = 0.0025;\n    this.isPointerDown = false;\n    this.isPointerInside = false;\n    this.lastTransitionTime = 0;\n\n    this.containerRef = React.createRef();\n    this.svgRef = React.createRef();\n    this.wrapperRef = React.createRef();\n    this.nodesRef = React.createRef();\n    this.viewportRef = React.createRef();\n\n    this.onPointerMove = this.onPointerMove.bind(this);\n    this.onPointerEnter = this.onPointerEnter.bind(this);\n    this.onPointerLeave = this.onPointerLeave.bind(this);\n    this.onPointerDown = this.onPointerDown.bind(this);\n    this.onPointerWheel = this.onPointerWheel.bind(this);\n    this.onPointerWheelGlobal = this.onPointerWheelGlobal.bind(this);\n    this.onPointerUpGlobal = this.onPointerUpGlobal.bind(this);\n  }\n\n  componentDidMount() {\n    this.selectD3Elements();\n    this.initZoomBehaviour();\n    this.addGlobalEventListeners();\n    this.update();\n  }\n\n  componentWillUnmount() {\n    this.removeGlobalEventListeners();\n  }\n\n  /**\n   * Add window event listeners\n   */\n  addGlobalEventListeners() {\n    window.addEventListener('wheel', this.onPointerWheelGlobal, {\n      passive: false\n    });\n    window.addEventListener(\n      pointerEventName('pointerup'),\n      this.onPointerUpGlobal\n    );\n  }\n\n  /**\n   * Remove window event listeners\n   */\n  removeGlobalEventListeners() {\n    window.removeEventListener('wheel', this.onPointerWheelGlobal);\n    window.removeEventListener(\n      pointerEventName('pointerup'),\n      this.onPointerUpGlobal\n    );\n  }\n\n  componentDidUpdate(prevProps) {\n    this.update(prevProps);\n  }\n\n  /**\n   * Updates drawing and zoom if props have changed\n   */\n  update(prevProps = {}) {\n    const { visible, chartZoom } = this.props;\n\n    if (visible) {\n      const changed = (...names) => this.changed(names, prevProps, this.props);\n\n      if (\n        changed(\n          'visible',\n          'nodes',\n          'centralNode',\n          'linkedNodes',\n          'nodesActive',\n          'nodeSelected'\n        )\n      ) {\n        drawNodes.call(this);\n      }\n\n      if (changed('visible', 'chartZoom') && chartZoom.applied) {\n        drawViewport.call(this);\n      }\n\n      if (changed('visible', 'nodes', 'textLabels', 'chartSize')) {\n        this.zoomToFit();\n      }\n    }\n  }\n\n  /**\n   * Returns true if any of the given props are different between given objects.\n   * Only shallow changes are detected.\n   */\n  changed(props, objectA, objectB) {\n    return (\n      objectA && objectB && props.some(prop => objectA[prop] !== objectB[prop])\n    );\n  }\n\n  /**\n   * Create D3 element selectors\n   */\n  selectD3Elements() {\n    this.el = {\n      svg: select(this.svgRef.current),\n      wrapper: select(this.wrapperRef.current),\n      nodeGroup: select(this.nodesRef.current),\n      viewport: select(this.viewportRef.current)\n    };\n  }\n\n  /**\n   * Setup D3 zoom behaviour on component mount\n   */\n  initZoomBehaviour() {\n    // Create zoom behaviour\n    this.zoomBehaviour = zoom()\n      // Ignore all user input default behaviour\n      .filter(() => false)\n      // Transition using linear interpolation\n      .interpolate(interpolate)\n      // When zoom changes\n      .on('zoom', () => {\n        // Transform the <g> that wraps the map\n        this.el.wrapper.attr('transform', event.transform);\n      });\n\n    this.el.svg.call(this.zoomBehaviour);\n  }\n\n  /**\n   * Handle pointer enter\n   */\n  onPointerEnter = () => {\n    this.isPointerInside = true;\n  };\n\n  /**\n   * Handle pointer leave\n   */\n  onPointerLeave = () => {\n    this.isPointerInside = false;\n  };\n\n  /**\n   * Handle global pointer up\n   */\n  onPointerUpGlobal = () => {\n    this.isPointerDown = false;\n    this.isPointerInside = false;\n  };\n\n  /**\n   * Handle pointer down\n   * @param {Object} event Event object\n   */\n  onPointerDown = event => {\n    this.isPointerDown = true;\n    this.isPointerInside = true;\n\n    this.onPointerMove(event, true);\n  };\n\n  /**\n   * Handle pointer wheel\n   * @param {Object} event Event object\n   */\n  onPointerWheel = event => {\n    const { scale = 1 } = this.props.chartZoom;\n\n    // Change zoom based on wheel velocity\n    this.props.onUpdateChartZoom({\n      scale: scale - (event.deltaY || 0) * scale * this.ZOOM_RATE,\n      applied: false,\n      transition: false\n    });\n  };\n\n  /**\n   * Handle global pointer wheel\n   * @param {Object} event Event object\n   */\n  onPointerWheelGlobal = event => {\n    // Prevent window scroll when wheeling on this minimap\n    const wasTarget = this.containerRef.current.contains(event.target);\n    if (wasTarget) {\n      event.preventDefault();\n    }\n  };\n\n  /**\n   * Handle pointer move\n   * @param {Object} event Event object\n   * @param {?Boolean} useTransition Apply with transition\n   */\n  onPointerMove = (event, useTransition = false) => {\n    if (this.isPointerDown && this.isPointerInside) {\n      // Wait for transition\n      const time = Number(new Date());\n      if (time - this.lastTransitionTime < this.TRANSITION_WAIT) {\n        return;\n      }\n\n      // Get current state\n      const { width, height } = this.props.mapSize;\n      const { width: graphWidth, height: graphHeight } = this.props.graphSize;\n      const { k: scale = 1 } = zoomTransform(this.wrapperRef.current);\n      const containerRect = this.svgRef.current.getBoundingClientRect();\n\n      // Transform minimap pointer position to a graph position\n      const pointerX = event.clientX - containerRect.x;\n      const pointerY = event.clientY - containerRect.y;\n      const centerX = (width / scale - graphWidth) * 0.5;\n      const centerY = (height / scale - graphHeight) * 0.5;\n      const x = (pointerX / width) * (width / scale) - centerX;\n      const y = (pointerY / height) * (height / scale) - centerY;\n\n      // Dispatch an update to be applied\n      this.props.onUpdateChartZoom({\n        x,\n        y,\n        applied: false,\n        transition: useTransition\n      });\n\n      if (useTransition) {\n        this.lastTransitionTime = time;\n      }\n    }\n  };\n\n  /**\n   * Zoom and scale to fit\n   */\n  zoomToFit() {\n    const { mapSize, graphSize } = this.props;\n\n    let scale = 1;\n    let translateX = 0;\n    let translateY = 0;\n\n    // Fit the graph exactly in the viewport\n    if (mapSize.width > 0 && graphSize.width > 0) {\n      scale = Math.min(\n        (mapSize.width - padding) / graphSize.width,\n        (mapSize.height - padding) / graphSize.height\n      );\n      translateX = (mapSize.width - graphSize.width * scale) / 2;\n      translateY = (mapSize.height - graphSize.height * scale) / 2;\n    }\n\n    // Get the target zoom transform\n    const targetTransform = zoomIdentity\n      .translate(translateX, translateY)\n      .scale(scale);\n\n    // Get the current zoom transform\n    const { k = 1, x = 0, y = 0 } = zoomTransform(this.wrapperRef.current);\n    const isFirstZoom = k === 1 && x === 0 && y === 0;\n\n    // Avoid errors during tests due to lack of SVG support\n    if (typeof jest !== 'undefined') {\n      return;\n    }\n\n    // Apply transform but only transition after first zoom\n    (isFirstZoom\n      ? this.el.svg\n      : this.el.svg.transition('zoom').duration(this.DURATION)\n    ).call(this.zoomBehaviour.transform, targetTransform);\n  }\n\n  /**\n   * Get the position of the viewport relative to the minimap\n   */\n  getViewport() {\n    const { chartZoom, chartSize } = this.props;\n    const { k: mapScale, x: translateX, y: translateY } = zoomTransform(\n      this.wrapperRef.current\n    );\n\n    const scale = mapScale / chartZoom.scale;\n    const width = chartSize.width * scale;\n    const height = chartSize.height * scale;\n    const x = translateX - (chartZoom.x - chartSize.sidebarWidth) * scale;\n    const y = translateY - chartZoom.y * scale;\n\n    return { x, y, width, height };\n  }\n\n  /**\n   * Render React elements\n   */\n  render() {\n    const { width, height } = this.props.mapSize;\n    const transformStyle = {\n      transform: `translate(calc(-100% + ${width}px), -100%)`\n    };\n\n    // Add pointer events with back compatibility\n    const _ = pointerEventName;\n    const inputEvents = {\n      onWheel: this.onPointerWheel,\n      [_('onPointerEnter')]: this.onPointerEnter,\n      [_('onPointerLeave')]: this.onPointerLeave,\n      [_('onPointerDown')]: this.onPointerDown,\n      [_('onPointerMove')]: this.onPointerMove\n    };\n\n    return (\n      <div\n        className={classnames('pipeline-minimap-container', {\n          'pipeline-minimap-container--visible': this.props.visible\n        })}\n        style={this.props.visible ? transformStyle : {}}>\n        <div\n          className=\"pipeline-minimap kedro\"\n          ref={this.containerRef}\n          {...inputEvents}>\n          <svg\n            id=\"pipeline-minimap-graph\"\n            className=\"pipeline-minimap__graph\"\n            width={width}\n            height={height}\n            viewBox={`0 0 ${width} ${height}`}\n            ref={this.svgRef}>\n            <g id=\"zoom-wrapper\" ref={this.wrapperRef}>\n              <g\n                id=\"minimap-nodes\"\n                className=\"pipeline-minimap__nodes\"\n                ref={this.nodesRef}\n              />\n            </g>\n            <rect\n              className=\"pipeline-minimap__viewport\"\n              ref={this.viewportRef}\n            />\n          </svg>\n        </div>\n      </div>\n    );\n  }\n}\n\n// Map sizing constants\nconst padding = 32;\nconst height = 220;\nconst minWidth = 218;\nconst maxWidth = 1.5 * minWidth;\n\n/**\n * Convert pointer event name to a mouse event name if not supported\n */\nconst pointerEventName = event =>\n  window.PointerEvent\n    ? event\n    : event.replace('pointer', 'mouse').replace('Pointer', 'Mouse');\n\n/**\n * Gets the map sizing that fits the graph in state\n */\nconst getMapSize = state => {\n  const size = state.graph.size || {};\n  const graphWidth = size.width || 0;\n  const graphHeight = size.height || 0;\n\n  if (graphWidth > 0 && graphHeight > 0) {\n    // Constrain width\n    const scaledWidth = graphWidth * (height / graphHeight);\n    const width = Math.min(Math.max(scaledWidth, minWidth), maxWidth);\n\n    return { width, height };\n  }\n\n  // Use minimum size if no graph\n  return { width: minWidth, height: height };\n};\n\n// Maintain a single reference to support change detection\nconst emptyNodes = [];\nconst emptyGraphSize = {};\n\nexport const mapStateToProps = (state, ownProps) => ({\n  visible: state.visible.miniMap,\n  mapSize: getMapSize(state),\n  centralNode: getCentralNode(state),\n  chartSize: getChartSize(state),\n  chartZoom: getChartZoom(state),\n  graphSize: state.graph.size || emptyGraphSize,\n  nodes: state.graph.nodes || emptyNodes,\n  linkedNodes: getLinkedNodes(state),\n  nodeActive: getNodeActive(state),\n  nodeSelected: getNodeSelected(state),\n  textLabels: state.textLabels,\n  ...ownProps\n});\n\nexport const mapDispatchToProps = (dispatch, ownProps) => ({\n  onUpdateChartZoom: transform => {\n    dispatch(updateZoom(transform));\n  },\n  ...ownProps\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MiniMap);\n","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport PipelineList from '../pipeline-list';\nimport NodeList from '../node-list';\nimport PrimaryToolbar from '../primary-toolbar';\nimport MiniMapToolbar from '../minimap-toolbar';\nimport MiniMap from '../minimap';\nimport './sidebar.css';\n\n/**\n * Main app container. Handles showing/hiding the sidebar nav, and theme classes.\n * @param {boolean} props.visible Whether the sidebar is open/closed\n */\nexport const Sidebar = ({ visible }) => {\n  const [pipelineIsOpen, togglePipeline] = useState(false);\n\n  return (\n    <>\n      <div\n        className={classnames('pipeline-sidebar', {\n          'pipeline-sidebar--visible': visible\n        })}>\n        <div className=\"pipeline-ui\">\n          <PipelineList onToggleOpen={togglePipeline} />\n          <NodeList faded={pipelineIsOpen} />\n        </div>\n        <nav className=\"pipeline-toolbar\">\n          <PrimaryToolbar />\n          <MiniMapToolbar />\n        </nav>\n        <MiniMap />\n      </div>\n    </>\n  );\n};\n\nconst mapStateToProps = state => ({\n  visible: state.visible.sidebar\n});\n\nexport default connect(mapStateToProps)(Sidebar);\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg\n    className={className}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\">\n    <path d=\"M17 1v1h4v16h-4v4H3V6h4V2h4V1h6zM7 8H5v12h10v-2H7V8zm4-4H9v12h10V4h-2v1h-6V4z\" />\n  </svg>\n);\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg\n    className={className}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\">\n    <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\n  </svg>\n);\n","import React from 'react';\nimport modifiers from '../../utils/modifiers';\nimport './styles/metadata.css';\n\n/**\n * Shows a metadata value\n */\nconst MetaDataValue = ({\n  container: Container = 'span',\n  className,\n  value,\n  kind,\n  empty\n}) => (\n  <Container\n    title={value}\n    className={modifiers('pipeline-metadata__value', { kind }, className)}>\n    {!value && value !== 0 ? empty : value}\n  </Container>\n);\n\nexport default MetaDataValue;\n","import React, { useState } from 'react';\nimport modifiers from '../../utils/modifiers';\nimport MetaDataValue from './metadata-value';\nimport './styles/metadata.css';\n\n/**\n * Shows a list of MetaDataValue\n */\nconst MetaDataList = ({\n  property,\n  values = [],\n  kind = 'text',\n  empty = '-',\n  inline = true,\n  commas = true,\n  limit = false\n}) => {\n  const [expanded, setExpanded] = useState(false);\n  const showValues = !expanded && limit ? values.slice(0, limit) : values;\n  const remainder = values.length - showValues.length;\n\n  return values.length > 0 ? (\n    <>\n      <ul\n        className={modifiers('pipeline-metadata__value-list', {\n          inline,\n          commas\n        })}>\n        {showValues.map((item, index) => (\n          <li key={index}>\n            <MetaDataValue\n              value={property ? item[property] : item}\n              kind={kind}\n              empty={empty}\n            />\n          </li>\n        ))}\n      </ul>\n      {remainder > 0 ? (\n        <button\n          className=\"pipeline-metadata__value-list-expand\"\n          aria-expanded={expanded}\n          onClick={() => setExpanded(true)}>\n          + {remainder} more\n        </button>\n      ) : null}\n    </>\n  ) : (\n    <MetaDataValue empty={empty} />\n  );\n};\n\nexport default MetaDataList;\n","import React from 'react';\nimport MetaDataList from './metadata-list';\nimport MetaDataValue from './metadata-value';\nimport './styles/metadata.css';\n\n/**\n * Shows metadata label and a given single value, or a list of values, or child elements\n */\nconst MetaDataRow = ({\n  label,\n  property,\n  value,\n  kind = 'text',\n  empty = '-',\n  visible = true,\n  inline = true,\n  commas = true,\n  limit = false,\n  children\n}) => {\n  const showList = Array.isArray(value);\n\n  return (\n    visible && (\n      <>\n        <dt className=\"pipeline-metadata__label\">{label}</dt>\n        <dd className=\"pipeline-metadata__row\" data-label={label}>\n          {showList && (\n            <MetaDataList\n              property={property}\n              inline={inline}\n              commas={commas}\n              kind={kind}\n              empty={empty}\n              values={value}\n              limit={limit}\n            />\n          )}\n          {!showList && !children && (\n            <MetaDataValue value={value} kind={kind} empty={empty} />\n          )}\n          {children}\n        </dd>\n      </>\n    )\n  );\n};\n\nexport default MetaDataRow;\n","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport modifiers from '../../utils/modifiers';\nimport NodeIcon from '../../components/icons/node-icon';\nimport IconButton from '../../components/icon-button';\nimport CopyIcon from '../icons/copy';\nimport CloseIcon from '../icons/close';\nimport MetaDataRow from './metadata-row';\nimport MetaDataValue from './metadata-value';\nimport {\n  getVisibleMetaSidebar,\n  getClickedNodeMetaData\n} from '../../selectors/metadata';\nimport { toggleNodeClicked } from '../../actions/nodes';\nimport './styles/metadata.css';\n\n/**\n * Shows node meta data\n */\nconst MetaData = ({ visible = true, metadata, onToggleNodeSelected }) => {\n  const [showCopied, setShowCopied] = useState(false);\n\n  const isTaskNode = metadata?.node.type === 'task';\n  const isParametersNode = metadata?.node.type === 'parameters';\n  const isDataNode = metadata?.node.type === 'data';\n\n  const onCopyClick = () => {\n    window.navigator.clipboard.writeText(metadata.runCommand);\n    setShowCopied(true);\n    setTimeout(() => setShowCopied(false), 1500);\n  };\n\n  const onCloseClick = () => {\n    // Deselecting a node automatically hides MetaData panel\n    onToggleNodeSelected(null);\n  };\n\n  if (!metadata) {\n    return <div className=\"pipeline-metadata kedro\" />;\n  }\n\n  return (\n    <div className={modifiers('pipeline-metadata', { visible }, 'kedro')}>\n      <div className=\"pipeline-metadata__header\">\n        <NodeIcon\n          className=\"pipeline-metadata__icon\"\n          type={metadata.node.type}\n        />\n        <h2 className=\"pipeline-metadata__title\">{metadata.node.name}</h2>\n        <IconButton\n          container={React.Fragment}\n          ariaLabel=\"Close Metadata Panel\"\n          className=\"pipeline-metadata__close-button\"\n          icon={CloseIcon}\n          onClick={onCloseClick}\n        />\n      </div>\n      <dl className=\"pipeline-metadata__list\">\n        <MetaDataRow label=\"Type:\" value={metadata.node.type} />\n        <MetaDataRow\n          label=\"Dataset Type:\"\n          visible={isDataNode}\n          kind=\"type\"\n          value={metadata.datasetType}\n        />\n        <MetaDataRow label=\"File Path:\" kind=\"path\" value={metadata.filepath} />\n        <MetaDataRow\n          label={`Parameters (${metadata.parameters?.length || '-'}):`}\n          visible={isParametersNode || isTaskNode}\n          commas={false}\n          inline={false}\n          value={metadata.parameters}\n          limit={10}\n        />\n        <MetaDataRow\n          label=\"Inputs:\"\n          property=\"name\"\n          visible={isTaskNode}\n          value={metadata.inputs}\n        />\n        <MetaDataRow\n          label=\"Outputs:\"\n          property=\"name\"\n          visible={isTaskNode}\n          value={metadata.outputs}\n        />\n        <MetaDataRow\n          label=\"Tags:\"\n          kind=\"token\"\n          commas={false}\n          value={metadata.tags}\n        />\n        <MetaDataRow\n          label=\"Pipeline:\"\n          visible={Boolean(metadata.pipeline)}\n          value={metadata.pipeline}\n        />\n        <MetaDataRow\n          label=\"Run Command:\"\n          visible={Boolean(metadata.runCommand)}>\n          <div className=\"pipeline-metadata__toolbox-container\">\n            <MetaDataValue\n              container={'code'}\n              className={modifiers('pipeline-metadata__run-command-value', {\n                visible: !showCopied\n              })}\n              value={metadata.runCommand}\n            />\n            {window.navigator.clipboard && (\n              <>\n                <span\n                  className={modifiers('pipeline-metadata__copy-message', {\n                    visible: showCopied\n                  })}>\n                  Copied to clipboard.\n                </span>\n                <ul className=\"pipeline-metadata__toolbox\">\n                  <IconButton\n                    ariaLabel=\"Copy run command to clipboard.\"\n                    className=\"pipeline-metadata__copy-button\"\n                    icon={CopyIcon}\n                    onClick={onCopyClick}\n                  />\n                </ul>\n              </>\n            )}\n          </div>\n        </MetaDataRow>\n        <MetaDataRow\n          label=\"Description (docstring):\"\n          visible={isTaskNode}\n          value={metadata.docstring}\n        />\n      </dl>\n    </div>\n  );\n};\n\nexport const mapStateToProps = (state, ownProps) => ({\n  visible: getVisibleMetaSidebar(state),\n  metadata: getClickedNodeMetaData(state),\n  ...ownProps\n});\n\nexport const mapDispatchToProps = dispatch => ({\n  onToggleNodeSelected: nodeID => {\n    dispatch(toggleNodeClicked(nodeID));\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MetaData);\n","import downloadSvg, { downloadPng } from 'svg-crowbar';\n\n/**\n * Handle onClick for the SVG/PNG download button\n * @param {string} format Must be 'svg' or 'png'\n * @param {string} theme light/dark theme\n * @param {Object} graphSize Graph width/height/margin\n * @param {function} mockFn Mock testing function stand-in for svg-crowbar\n * @return {Function} onClick handler\n */\nconst exportGraph = ({ format, theme, graphSize, mockFn }) => {\n  const downloadFormats = {\n    png: downloadPng,\n    svg: downloadSvg\n  };\n  const download = mockFn || downloadFormats[format];\n\n  // Create clone of graph SVG to avoid breaking the original\n  const svg = document.querySelector('#pipeline-graph');\n  const clone = svg.parentNode.appendChild(svg.cloneNode(true));\n  clone.classList.add('kedro', `kui-theme--${theme}`, 'pipeline-graph--export');\n\n  // Reset zoom/translate\n  let width = graphSize.width + graphSize.marginx * 2;\n  let height = graphSize.height + graphSize.marginy * 2;\n  clone.setAttribute('viewBox', `0 0 ${width} ${height}`);\n  clone.querySelector('#zoom-wrapper').removeAttribute('transform');\n\n  // Impose a maximum size on PNGs because otherwise they break when downloading\n  if (format === 'png') {\n    const maxWidth = 5000;\n    width = Math.min(width, maxWidth);\n    height = Math.min(height, maxWidth * (height / width));\n  }\n  clone.setAttribute('width', width);\n  clone.setAttribute('height', height);\n\n  const style = document.createElement('style');\n  if (format === 'svg') {\n    // Add webfont\n    style.innerHTML =\n      '@import url(https://fonts.googleapis.com/css?family=Titillium+Web:400);';\n  } else {\n    // Add websafe fallback font\n    style.innerHTML = `.kedro {\n      font-family: \"Trebuchet MS\", \"Lucida Grande\", \"Lucida Sans Unicode\", \"Lucida Sans\", Tahoma, sans-serif;\n      letter-spacing: -0.4px;\n    }`;\n  }\n  clone.prepend(style);\n\n  // Download SVG/PNG\n  download(clone, 'kedro-pipeline', { css: 'internal' });\n\n  // Delete cloned SVG\n  svg.parentNode.removeChild(clone);\n};\n\nexport default exportGraph;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport Modal from '@quantumblack/kedro-ui/lib/components/modal';\nimport Button from '@quantumblack/kedro-ui/lib/components/button';\nimport { toggleExportModal } from '../../actions';\nimport exportGraph from './export-graph';\nimport './export-modal.css';\n\n/**\n * Kedro-UI modal to allow users to choose between SVG/PNG export formats\n */\nconst ExportModal = ({ graphSize, theme, onToggle, visible }) => {\n  if (!visible.exportBtn) {\n    return null;\n  }\n  return (\n    <Modal\n      title=\"Export pipeline visualisation\"\n      onClose={() => onToggle(false)}\n      theme={theme}\n      visible={visible.exportModal}>\n      <div className=\"pipeline-icon-modal\">\n        <Button\n          theme={theme}\n          onClick={() => {\n            exportGraph({ format: 'png', theme, graphSize });\n            onToggle(false);\n          }}>\n          Download PNG\n        </Button>\n        <Button\n          theme={theme}\n          onClick={() => {\n            exportGraph({ format: 'svg', theme, graphSize });\n            onToggle(false);\n          }}>\n          Download SVG\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport const mapStateToProps = state => ({\n  graphSize: state.graph.size || {},\n  visible: state.visible,\n  theme: state.theme\n});\n\nexport const mapDispatchToProps = dispatch => ({\n  onToggle: value => {\n    dispatch(toggleExportModal(value));\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ExportModal);\n","import React from 'react';\nimport classnames from 'classnames';\nimport './loading.css';\n\nconst d =\n  'M11.4 90.3q-1.4-2.4 0-4.7l42.3-73.3q1.3-2.3 4-2.3h84.6q2.7 0 4 2.3l42.4 73.3q1.3 2.3 0 4.7l-42.3 73.2q-1.4 2.4-4.1 2.4H57.7q-2.7 0-4-2.4z';\n\nexport default ({ className, visible }) => (\n  <svg\n    className={classnames(className, 'pipeline-loading-icon', {\n      'pipeline-loading-icon--visible': visible\n    })}\n    viewBox=\"0 0 200 180\">\n    <path d={d} />\n    <path d={d} />\n  </svg>\n);\n","import { createSelector } from 'reselect';\n\nconst getGraphLoading = state => state.loading.graph;\nconst getPipelineLoading = state => state.loading.pipeline;\nconst getFontLoading = state => !state.fontLoaded;\nconst getNodeLoading = state => state.loading.node;\n\n/**\n * Determine whether to show the loading spinner\n */\nexport const isLoading = createSelector(\n  [getGraphLoading, getPipelineLoading, getFontLoading, getNodeLoading],\n  (graphLoading, pipelineLoading, fontLoading, nodeLoading) => {\n    return graphLoading || pipelineLoading || fontLoading || nodeLoading;\n  }\n);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport FlowChart from '../flowchart';\nimport Sidebar from '../sidebar';\nimport MetaData from '../metadata';\nimport ExportModal from '../export-modal';\nimport LoadingIcon from '../icons/loading';\nimport { isLoading } from '../../selectors/loading';\nimport './wrapper.css';\n\n/**\n * Main app container. Handles showing/hiding the sidebar nav, and theme classes.\n */\nexport const Wrapper = ({ loading, theme }) => (\n  <div\n    className={classnames('kedro-pipeline', {\n      'kui-theme--dark': theme === 'dark',\n      'kui-theme--light': theme === 'light'\n    })}>\n    <h1 className=\"pipeline-title\">Kedro-Viz</h1>\n    <Sidebar />\n    <MetaData />\n    <div className=\"pipeline-wrapper\">\n      <FlowChart />\n      <LoadingIcon className=\"pipeline-wrapper__loading\" visible={loading} />\n    </div>\n    <ExportModal />\n  </div>\n);\n\nexport const mapStateToProps = state => ({\n  loading: isLoading(state),\n  theme: state.theme\n});\n\nexport default connect(mapStateToProps)(Wrapper);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Provider } from 'react-redux';\nimport configureStore from '../../store';\nimport { resetData, updateFontLoaded } from '../../actions';\nimport { loadInitialPipelineData } from '../../actions/pipelines';\nimport Wrapper from '../wrapper';\nimport getInitialState, {\n  preparePipelineState\n} from '../../store/initial-state';\nimport { getFlagsMessage } from '../../utils/flags';\nimport '@quantumblack/kedro-ui/lib/styles/app-no-webfont.css';\nimport LoadWebFont from '@quantumblack/kedro-ui/lib/utils/webfont.js';\nimport './app.css';\n\n/**\n * Main wrapper component. Intialises the Redux store\n */\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    const initialState = getInitialState(props);\n    this.store = configureStore(initialState);\n  }\n\n  componentDidMount() {\n    if (this.props.data === 'json') {\n      this.store.dispatch(loadInitialPipelineData());\n    }\n    this.loadWebFonts();\n    this.announceFlags(this.store.getState().flags);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.data !== this.props.data) {\n      this.updatePipelineData();\n    }\n  }\n\n  /**\n   * Shows a console message regarding the given flags\n   */\n  announceFlags(flags) {\n    const message = getFlagsMessage(flags);\n\n    if (message && typeof jest === 'undefined') {\n      console.info(message);\n    }\n  }\n\n  /**\n   * Dispatch an action once the webfont has loaded.\n   * Uses https://github.com/typekit/webfontloader\n   */\n  loadWebFonts() {\n    const setFontLoaded = () => {\n      this.store.dispatch(updateFontLoaded(true));\n    };\n    LoadWebFont({\n      active: setFontLoaded,\n      inactive: setFontLoaded\n    });\n  }\n\n  /**\n   * Dispatch an action to update the store with new pipeline data\n   */\n  updatePipelineData() {\n    const newState = preparePipelineState(this.props.data, true);\n    this.store.dispatch(resetData(newState));\n  }\n\n  render() {\n    return this.props.data ? (\n      <Provider store={this.store}>\n        <Wrapper />\n      </Provider>\n    ) : null;\n  }\n}\n\nApp.propTypes = {\n  /**\n   * Determines what pipeline data will be displayed on the chart.\n   * You can supply an object containing lists of edges, nodes, tags -\n   * See /src/utils/data for examples of the expected data format.\n   * Alternatively, the string 'json' indicates that data is being\n   * loaded asynchronously from /public/api/nodes.json\n   */\n  data: PropTypes.oneOfType([\n    PropTypes.oneOf(['json']),\n    PropTypes.shape({\n      edges: PropTypes.array.isRequired,\n      layers: PropTypes.array,\n      nodes: PropTypes.array.isRequired,\n      tags: PropTypes.array\n    })\n  ]),\n  /**\n   * Specify the theme: Either 'light' or 'dark'.\n   * If set, this will override the localStorage value.\n   */\n  theme: PropTypes.oneOf(['dark', 'light']),\n  /**\n   * Override visibility of various features, e.g. icon buttons\n   */\n  visible: PropTypes.shape({\n    labelBtn: PropTypes.bool,\n    layerBtn: PropTypes.bool,\n    exportBtn: PropTypes.bool,\n    sidebar: PropTypes.bool,\n    themeBtn: PropTypes.bool\n  })\n};\n\nexport default App;\n","import React from 'react';\nimport KonamiCode from 'konami-code';\nimport './easter-egg.css';\nimport mp3 from './brodyquest.mp3';\nimport img from './easter-egg.png';\n\n/**\n * Konami code Easter Egg component\n */\nclass EasterEgg extends React.Component {\n  /**\n   * Create new APP\n   * @param {object} props\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      play: false\n    };\n    if (typeof jest === 'undefined') {\n      console.info('Konami code is supported');\n    }\n\n    this.audio = new Audio(mp3);\n    this.audio.loop = true;\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n  }\n\n  /**\n   * Called when mounted to view\n   */\n  componentDidMount() {\n    const konami = new KonamiCode();\n    konami.listen(this.toggleState.bind(this));\n    document.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  /**\n   * Triggered when component state updates\n   */\n  componentDidUpdate() {\n    this.toggleAudio();\n    this.toggleCSS();\n  }\n\n  /**\n   * Called just before component is removed from the view\n   */\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown);\n    document.body.classList.remove('easter-theme');\n  }\n\n  /**\n   * Handle keyboard interaction\n   * @param {Event} e\n   */\n  handleKeyDown(e) {\n    const escape = e.keyCode === 27;\n    if (escape && this.state.play) {\n      this.setState({\n        play: false\n      });\n    }\n  }\n\n  /**\n   * Toggle play state on/off\n   */\n  toggleState() {\n    this.setState({ play: !this.state.play });\n  }\n\n  /**\n   * Play/Pause the mp3\n   */\n  toggleAudio() {\n    if (this.state.play) {\n      this.audio.play();\n    } else {\n      this.audio.pause();\n    }\n  }\n\n  /**\n   * Play/Pause the mp3\n   */\n  toggleCSS() {\n    if (this.state.play) {\n      document.body.classList.add('easter-theme');\n    } else {\n      document.body.classList.remove('easter-theme');\n    }\n  }\n\n  /**\n   * Render the component\n   * @return {ReactElement}\n   */\n  render() {\n    const { play } = this.state;\n    if (!play) {\n      return null;\n    }\n    return (\n      <div className=\"easter-egg\">\n        <img src={img} alt=\"\" width=\"500\" height=\"480\" />\n      </div>\n    );\n  }\n}\n\nexport default EasterEgg;\n","import seedrandom from 'seedrandom';\n\n/**\n * Generate a pseudo-random UUID\n * via https://stackoverflow.com/a/1349426/1651713\n * @param {number} length Hash/ID length\n * @return string\n */\nexport const generateHash = length => {\n  const result = [];\n  const characters =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  for (let i = 0; i < length; i++) {\n    result.push(\n      characters.charAt(Math.floor(Math.random() * characters.length))\n    );\n  }\n  return result.join('');\n};\n\n/**\n * Seed data with a random hash, allowing it to be reproduced.\n * If the URL searchParams contain a 'seed' key then use its value,\n * else create a new one, and make it available via the console.\n */\nexport const getSeedFromURL = () => {\n  let url;\n  let seed;\n  try {\n    url = new URL(document.location.href);\n    seed = url.searchParams.get('seed');\n  } catch (e) {\n    console.warn('Random data seeding is not supported in this browser');\n    return;\n  }\n  if (!seed) {\n    seed = generateHash(30);\n    url.searchParams.set('seed', seed);\n  }\n  if (typeof jest === 'undefined') {\n    console.info(\n      `%cRandom data seed: ${seed}\\nTo reuse this layout, visit ${url.toString()}`,\n      'font-weight: bold'\n    );\n  }\n  return seed;\n};\n\n/**\n * Get an array of numbers\n * @param {number} n Length of the array\n */\nexport const getNumberArray = n => Array.from(Array(n).keys());\n\nexport const LOREM_IPSUM = 'lorem ipsum dolor sit amet consectetur adipiscing elit vestibulum id turpis nunc nulla vitae diam dignissim fermentum elit sit amet viverra libero quisque condimentum pellentesque convallis sed consequat neque ac rhoncus finibus'.split(\n  ' '\n);\n\n/**\n * Utils that depend on a seeded RNG\n */\nconst randomUtils = () => {\n  // Set up seeded random number generator:\n  const seed = getSeedFromURL();\n  const random = seedrandom(seed);\n\n  /**\n   * Get a random number between 0 to n-1, inclusive\n   * @param {number} n Max number\n   */\n  const randomIndex = n => Math.floor(random() * n);\n\n  /**\n   * Get a random number between 1 to n, inclusive\n   * @param {number} n Max number\n   */\n  const randomNumber = n => Math.ceil(random() * n);\n\n  /**\n   * Get a random number between min and max, inclusive\n   * @param {number} (min) Min number\n   * @param {number} (max) Max number\n   */\n  const randomNumberBetween = (min, max) => randomNumber(max - min) + min;\n\n  /**\n   * Get a random datum from an array\n   * @param {Array} range The array to select a random item from\n   */\n  const getRandom = range => range[randomIndex(range.length)];\n\n  /**\n   * Generate a random latin name\n   * @param {number} n Number of words in the name\n   * @param {string} join The character(s) used to join each word\n   */\n  const getRandomName = (n, join = '_') =>\n    getNumberArray(n)\n      .map(() => getRandom(LOREM_IPSUM))\n      .join(join);\n\n  /**\n   * Randomly select a certain number (n) of items from an array (arr).\n   * via https://stackoverflow.com/a/19270021/1651713\n   * @param {array} arr List from which to choose\n   * @param {number} n Number of items to select\n   */\n  const getRandomSelection = (arr, n) => {\n    const result = new Array(n);\n    let len = arr.length;\n    const taken = new Array(len);\n    if (n > len) {\n      return arr;\n    }\n    while (n--) {\n      var x = Math.floor(random() * len);\n      result[n] = arr[x in taken ? taken[x] : x];\n      taken[x] = --len in taken ? taken[len] : len;\n    }\n    return result;\n  };\n\n  return {\n    random,\n    randomIndex,\n    randomNumber,\n    randomNumberBetween,\n    getRandom,\n    getRandomName,\n    getRandomSelection\n  };\n};\n\nexport default randomUtils;\n","import batchingToposort from 'batching-toposort';\n\nimport { arrayToObject, unique } from './index';\nimport randomUtils, { getNumberArray } from './random-utils';\n\n//--- Config variables ---//\n\nconst MAX_EDGE_COUNT = 200;\nconst MIN_EDGE_COUNT = 100;\nconst MAX_RANK_COUNT = 50;\nconst MIN_RANK_COUNT = 10;\nconst MAX_RANK_NODE_COUNT = 10;\nconst MIN_RANK_NODE_COUNT = 1;\nconst MIN_NODE_DEGREE = 2;\nconst MAX_NODE_TAG_COUNT = 5;\nconst MAX_TAG_COUNT = 20;\nconst PARAMETERS_FREQUENCY = 0.2;\nconst MIN_PIPELINES_COUNT = 2;\nconst MAX_PIPELINES_COUNT = 15;\nconst LAYERS = [\n  'Raw',\n  'Intermediate',\n  'Primary',\n  'Feature',\n  'Model Input',\n  'Model Output'\n];\n\n/**\n * Generate a random pipeline dataset\n */\nclass Pipeline {\n  constructor() {\n    this.utils = randomUtils();\n    this.pipelines = this.generatePipelines();\n    this.rankCount = this.getRankCount();\n    this.rankLayers = this.getRankLayers();\n    this.tags = this.generateTags();\n    this.nodes = this.generateNodes();\n    this.edges = this.generateEdges();\n\n    this.update();\n    this.finalise();\n  }\n\n  /**\n   * Create the pipelines aray\n   * @returns {number} Rank count total\n   */\n  generatePipelines() {\n    const pipelines = ['Default'];\n    const pipelineCount = this.utils.randomNumberBetween(\n      MIN_PIPELINES_COUNT,\n      MAX_PIPELINES_COUNT\n    );\n    for (let i = 1; i < pipelineCount; i++) {\n      pipelines.push(this.utils.getRandomName(this.utils.randomNumber(4), ' '));\n    }\n    return pipelines.filter(unique);\n  }\n\n  /**\n   * Get the number of ranks (i.e. horizontal bands)\n   * Odd ranks are data, even are task\n   * @returns {number} Rank count total\n   */\n  getRankCount() {\n    let rankCount = this.utils.randomNumberBetween(\n      MIN_RANK_COUNT,\n      MAX_RANK_COUNT\n    );\n    // Ensure odd numbers only, so that we start and end with a data node\n    if (!rankCount % 2) {\n      rankCount += 1;\n    }\n    return rankCount;\n  }\n\n  /**\n   * Randomly determine the layer for each rank\n   * @returns {object} Layers by rank\n   */\n  getRankLayers() {\n    const layerSize = arrayToObject(LAYERS, () => 0);\n    // Randomly decide the number of ranks in each layer\n    for (let i = 0; i < this.rankCount; i++) {\n      layerSize[this.utils.getRandom(LAYERS)]++;\n    }\n    // Assign layers to ranks based on layerSize\n    const rankLayers = {};\n    for (let rank = 0, layer = 0; rank < this.rankCount; rank++) {\n      while (layerSize[LAYERS[layer]] < 1) {\n        layer++;\n      }\n      rankLayers[rank] = LAYERS[layer];\n      layerSize[LAYERS[layer]]--;\n    }\n    return rankLayers;\n  }\n\n  /**\n   * Generate a random list of tags\n   * @returns {array} Tag name strings\n   */\n  generateTags() {\n    const tagCount = this.utils.randomNumber(MAX_TAG_COUNT);\n    return getNumberArray(tagCount)\n      .map(() =>\n        this.utils.getRandomName(this.utils.randomNumber(MAX_NODE_TAG_COUNT))\n      )\n      .filter(unique);\n  }\n\n  /**\n   * Create list of nodes\n   * @returns {array} List of node objects\n   */\n  generateNodes() {\n    const nodes = [];\n    for (let rank = 0; rank < this.rankCount; rank++) {\n      const rankNodeCount = this.getRankNodeCount(rank);\n      for (let i = 0; i < rankNodeCount; i++) {\n        const node = this.createNode(i, rank);\n        nodes.push(node);\n      }\n    }\n    return nodes;\n  }\n\n  /**\n   * Return a random count of nodes for a rank\n   * @returns {number} rank node count\n   */\n  getRankNodeCount() {\n    return Math.min(\n      MIN_RANK_NODE_COUNT / this.utils.random(),\n      MAX_RANK_NODE_COUNT\n    );\n  }\n\n  /**\n   * Determine a node's type based on its rank\n   * @param {number} rank Rank number\n   * @returns {string} Node type (task/data/parameters)\n   */\n  getType(node) {\n    if (node.rank % 2) {\n      return 'task';\n    }\n\n    if (!node._sources.length && this.utils.random() < PARAMETERS_FREQUENCY) {\n      return 'parameters';\n    }\n\n    return 'data';\n  }\n\n  /**\n   * Create a node datum object.\n   * @param {number} i Node index within its rank\n   * @param {number} initialRank Rank index\n   * @returns {object} Node object\n   */\n  createNode(i, initialRank) {\n    const layer = this.rankLayers[initialRank];\n    const node = {\n      id: `${layer}_${initialRank}_${i}`,\n      name: null,\n      full_name: null,\n      type: null,\n      rank: initialRank,\n      layer: layer,\n      pipelines: this.getNodePipelines(),\n      tags: this.getRandomTags(),\n      _sources: [],\n      _targets: []\n    };\n    return node;\n  }\n\n  /**\n   * Create a new node name of up to 10 words\n   * @param {string} Node type (task/data/parameters)\n   * @returns {string} Node name\n   */\n  getNodeName(type) {\n    const name = this.utils.getRandomName(this.utils.randomNumber(10), ' ');\n    return type === 'parameters' ? `Parameters ${name}` : name;\n  }\n\n  /**\n   * Create a list of the pipelines that the node will be included in\n   * @returns {array} Node piplines\n   */\n  getNodePipelines() {\n    return this.pipelines.reduce((pipelines, id, i) => {\n      if (i === 0 || this.utils.randomIndex(2)) {\n        return pipelines.concat(id);\n      }\n      return pipelines;\n    }, []);\n  }\n\n  /**\n   * Select a random number of tags from the list of tags\n   * @returns {array} List of tags\n   */\n  getRandomTags() {\n    return this.utils.getRandomSelection(\n      this.tags,\n      this.utils.randomNumber(this.tags.length)\n    );\n  }\n\n  /**\n   * Gets a map of ranks to lists of nodes at that rank\n   * @returns {array} List of nodes\n   */\n  getNodesByRank() {\n    const nodesByRank = {};\n\n    for (const node of this.nodes) {\n      nodesByRank[node.rank] = nodesByRank[node.rank] || [];\n      nodesByRank[node.rank].push(node);\n    }\n\n    return nodesByRank;\n  }\n\n  /**\n   * Create list of edges\n   * @returns {array} Edge objects\n   */\n  generateEdges() {\n    const edges = [];\n    const edgeCount = this.utils.randomNumberBetween(\n      MIN_EDGE_COUNT,\n      MAX_EDGE_COUNT\n    );\n    const nodesByRank = this.getNodesByRank();\n\n    // Find the sorted list of node ranks\n    const ranks = Object.keys(nodesByRank)\n      .map(rank => parseFloat(rank))\n      .sort((a, b) => a - b);\n\n    // Gets a random node with the given rank index\n    const getRandomNodeAtRank = rankIndex => {\n      const rankValue = ranks[rankIndex];\n      const rankNodes = nodesByRank[rankValue];\n      const rankNodeIndex = this.utils.randomIndex(rankNodes.length);\n      return rankNodes[rankNodeIndex];\n    };\n\n    // For the desired amount of edges\n    for (let i = 0; i < edgeCount; i += 1) {\n      // Choose a random source node excluding the last rank\n      const sourceRankIndex = this.utils.randomIndex(ranks.length - 1);\n      const source = getRandomNodeAtRank(sourceRankIndex);\n\n      // Choose a random target node after the source rank prefering nearby\n      const remainingRankCount = ranks.length - 1 - sourceRankIndex;\n      const biasedRandom = Math.round(0.5 / this.utils.random());\n      const targetRankIndex =\n        sourceRankIndex + Math.min(biasedRandom, remainingRankCount);\n      const target = getRandomNodeAtRank(targetRankIndex);\n\n      // Build the edge\n      const edge = {\n        source: source.id,\n        target: target.id,\n        _sourceNode: source,\n        _targetNode: target\n      };\n\n      edges.push(edge);\n\n      // Keep track of edges on nodes for later convenience\n      source._targets.push(edge);\n      target._sources.push(edge);\n    }\n\n    return edges;\n  }\n\n  /**\n   * Select only nodes with at least the minimum required connected nodes\n   * @returns {object} Filtered nodes\n   */\n  activeNodes() {\n    const nodes = {};\n\n    // Gets the total number of edges for the given node\n    const degree = node => node._sources.length + node._targets.length;\n\n    for (const edge of this.edges) {\n      // Keep both nodes if they have enough combined connections\n      if (\n        degree(edge._sourceNode) + degree(edge._targetNode) >\n        MIN_NODE_DEGREE\n      ) {\n        nodes[edge._sourceNode.id] = edge._sourceNode;\n        nodes[edge._targetNode.id] = edge._targetNode;\n      }\n    }\n\n    return Object.values(nodes);\n  }\n\n  /**\n   * Select only used tags\n   * @returns {object} Filtered tags\n   */\n  activeTags() {\n    return this.nodes\n      .reduce((tags, node) => (node.tags ? tags.concat(node.tags) : tags), [])\n      .filter(unique)\n      .map(tag => ({ name: tag, id: tag }));\n  }\n\n  /**\n   * Select only used edges\n   * @returns {object} Filtered edges\n   */\n  activeEdges() {\n    const visibleNodes = arrayToObject(\n      this.nodes.map(node => node.id),\n      () => true\n    );\n\n    return this.edges.filter(\n      edge => visibleNodes[edge.target] && visibleNodes[edge.source]\n    );\n  }\n\n  /**\n   * Updates node properties including rank, type and name based on the current graph\n   */\n  update() {\n    const graph = {};\n\n    for (const node of this.nodes) {\n      graph[node.id] = [];\n    }\n\n    for (const edge of this.edges) {\n      graph[edge.source].push(edge.target);\n    }\n\n    // Use toposort to find actual ranks\n    const sortedNodes = batchingToposort(graph);\n\n    for (let rank = 0; rank < sortedNodes.length; rank++) {\n      for (const id of sortedNodes[rank]) {\n        const node = this.nodes.find(node => node.id === id);\n        node.rank = rank;\n        node.type = this.getType(node);\n        node.name = this.getNodeName(node.type);\n        node.full_name = `${node.layer}_${node.type}_${node.rank}_${\n          node.name\n        }`.replace(/\\s/g, '_');\n      }\n    }\n  }\n\n  /**\n   * Removes unused elements and cleans up temporary properties\n   */\n  finalise() {\n    this.nodes = this.activeNodes();\n    this.tags = this.activeTags();\n    this.edges = this.activeEdges();\n\n    for (const node of this.nodes) {\n      delete node._sources;\n      delete node._targets;\n    }\n\n    for (const edge of this.edges) {\n      delete edge._targetNode;\n      delete edge._sourceNode;\n    }\n  }\n\n  /**\n   * Gets the complete pipeline data\n   * @returns {object} The pipeline data\n   */\n  all() {\n    return {\n      edges: this.edges,\n      layers: LAYERS,\n      nodes: this.nodes,\n      pipelines: this.pipelines.map(name => ({ id: name, name })),\n      tags: this.tags\n    };\n  }\n}\n\nconst generateRandomPipeline = () => new Pipeline().all();\n\nexport default generateRandomPipeline;\n","import getRandomPipeline from './random-data';\nimport animals from './data/animals.mock.json';\nimport demo from './data/demo.mock.json';\n\n/**\n * Determine the data source ID from the URL query string, or an environment\n * variable from the CLI, or from the URL host, else return undefined.\n * You can supply one of the following strings:\n   - 'random': Use randomly-generated data\n   - 'animals': Use data from the 'animals' test dataset ( this is the same dataset as used by the Core team for their tests )\n   - 'demo': Use data from the 'demo' test dataset\n   - 'json': Load data from a local json file (in /public/api/main)\n * @return {string} Data source identifier\n */\nexport const getSourceID = () => {\n  const qs = document.location.search.match(/data=(\\w+)/);\n  const { REACT_APP_DATA_SOURCE } = process.env;\n  const isDemo = document.location.host === 'quantumblacklabs.github.io';\n\n  if (qs) {\n    return encodeURIComponent(qs[1]);\n  }\n  if (REACT_APP_DATA_SOURCE) {\n    return REACT_APP_DATA_SOURCE;\n  }\n  if (isDemo) {\n    return 'demo';\n  }\n  return 'json';\n};\n\n/**\n * Either load synchronous pipeline data, or else indicate with a string\n * that json data should be loaded asynchronously later on.\n * @param {string} source Data source identifier\n * @return {object|string} Either raw data itself, or 'json'\n */\nexport const getDataValue = source => {\n  switch (source) {\n    case 'animals':\n      // Use data from the 'animals' test dataset\n      return animals;\n    case 'demo':\n      // Use data from the 'demo' test dataset\n      return demo;\n    case 'random':\n      // Use procedurally-generated data\n      return getRandomPipeline();\n    case 'json':\n      // Load data asynchronously later\n      return source;\n    default:\n      throw new Error(\n        `Unexpected data source value '${source}'. Your input should be one of the following values: 'animals', 'demo', 'json', or 'random'`\n      );\n  }\n};\n\n/**\n * Determine which data source to use, and return it\n * @return {object|string} Pipeline data, or 'json'\n */\nconst getPipelineData = () => getDataValue(getSourceID());\n\nexport default getPipelineData;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'what-input';\nimport App from './components/app';\nimport EasterEgg from './components/easter-egg';\nimport getPipelineData from './utils/data-source';\nimport './styles/index.css';\n\nconst KedroViz = () => (\n  <>\n    <App data={getPipelineData()} />\n    <EasterEgg />\n  </>\n);\n\nReactDOM.render(<KedroViz />, document.getElementById('root'));\n","/**\n * PI / 2 constant\n */\nexport const halfPI = Math.PI * 0.5;\n\n/**\n * Clamps the value between min and max\n * @param {number} value The number to clamp\n * @param {number} min The minimum value\n * @param {number} max The maximum value\n * @returns {number} The value clamped\n */\nexport const clamp = (value, min, max) =>\n  value < min ? min : value > max ? max : value;\n\n/**\n * Rounds the value to the nearest unit value\n * @param {number} value The value to snap\n * @param {number} unit The unit\n * @returns {number} The value snapped\n */\nexport const snap = (value, unit) => Math.round(value / unit) * unit;\n\n/**\n * Returns the distance between two values\n * @param {number} a The first value\n * @param {number} b The second value\n * @returns {number} The distance\n */\nexport const distance1d = (a, b) => Math.abs(a - b);\n\n/**\n * Returns the angle in radians between the points a and b relative to the X-axis about the origin\n * @param {object} a The first point\n * @param {object} b The second point\n * @returns {number} The angle\n */\nexport const angle = (a, b) => Math.atan2(a.y - b.y, a.x - b.x);\n\n/**\n * Returns the left edge x-position of the node\n * @param {object} node The node\n * @returns {number} The left edge position\n */\nexport const nodeLeft = node => node.x - node.width * 0.5;\n\n/**\n * Returns the right edge x-position of the node\n * @param {object} node The node\n * @returns {number} The right edge position\n */\nexport const nodeRight = node => node.x + node.width * 0.5;\n\n/**\n * Returns the top edge y-position of the node\n * @param {object} node The node\n * @returns {number} The top edge position\n */\nexport const nodeTop = node => node.y - node.height * 0.5;\n\n/**\n * Returns the bottom edge y-position of the node\n * @param {object} node The node\n * @returns {number} The bottom edge position\n */\nexport const nodeBottom = node => node.y + node.height * 0.5;\n\n/**\n * Finds the rows formed by nodes given the their positions in Y.\n * The result is sorted in X and Y.\n * Adds a `row` property to each node in-place\n * @param {array} nodes The input nodes\n * @returns {array} The sorted rows of nodes\n */\nexport const groupByRow = nodes => {\n  const rows = {};\n\n  // Create rows using node Y values\n  for (const node of nodes) {\n    rows[node.y] = rows[node.y] || [];\n    rows[node.y].push(node);\n  }\n\n  // Sort the set of rows accounting for keys being strings\n  const rowNumbers = Object.keys(rows).map(row => parseFloat(row));\n  rowNumbers.sort((a, b) => a - b);\n\n  // Sort rows in order of X position if set. Break ties with ids for stability\n  const sortedRows = rowNumbers.map(row => rows[row]);\n  for (let i = 0; i < sortedRows.length; i += 1) {\n    sortedRows[i].sort((a, b) => compare(a.x, b.x, a.id, b.id));\n\n    for (const node of sortedRows[i]) {\n      node.row = i;\n    }\n  }\n\n  return sortedRows;\n};\n\n/**\n * Generalised comparator function for sorting\n * If values are strings then `localeCompare` is used, otherwise values are subtracted\n * Compares the first pair of values and returns the difference if non equal,\n * otherwise ties are broken by comparing the subsequent pairs of values\n * @param {number|string} a Value to compare with `b`\n * @param {number|string} b Value to compare with `a`\n * @param {...number|string} values Any number of further pairs of values to compare as tie-breakers\n * @returns {number} A standard signed comparator result\n */\nexport const compare = (a, b, ...values) => {\n  const delta = typeof a === 'string' ? a.localeCompare(b) : a - b;\n  return delta !== 0 || values.length === 0 ? delta : compare(...values);\n};\n\n/**\n * Returns the node with the position translated in-place\n * @param {object} node The node\n * @param {object} offset The translation vector\n * @returns {object} The node\n */\nexport const offsetNode = (node, offset) => {\n  node.x = node.x - offset.x;\n  node.y = node.y - offset.y;\n  // Node sort order for tabindex:\n  node.order = node.x + node.y * 9999;\n  return node;\n};\n\n/**\n * Returns the edge with each point translated in-place\n * @param {object} edge The edge\n * @param {object} offset The translation vector\n * @returns {object} The edge\n */\nexport const offsetEdge = (edge, offset) => {\n  edge.points.forEach(point => {\n    point.x = point.x - offset.x;\n    point.y = point.y - offset.y;\n  });\n  return edge;\n};\n\n/**\n * Returns the point on the line segment `ax, ay, bx, by` closest to point `x, y`\n * @param {number} x The test point x\n * @param {number} y The test point y\n * @param {number} ax The start of the line segement x point\n * @param {number} ay The start of the line segement y point\n * @param {number} bx The end of the line segement x point\n * @param {number} by The end of the line segement y point\n * @returns {object} An object with the closest point and both line segment points\n */\nexport const nearestOnLine = (x, y, ax, ay, bx, by) => {\n  const dx = bx - ax;\n  const dy = by - ay;\n  const position = ((x - ax) * dx + (y - ay) * dy) / (dx * dx + dy * dy || 1);\n  const positionClamped = clamp(position, 0, 1);\n\n  return {\n    x: ax + dx * positionClamped,\n    y: ay + dy * positionClamped,\n    ax,\n    ay,\n    bx,\n    by\n  };\n};\n","/** @license kiwi.js v1.1.2\n * #------------------------------------------------------------------------------\n * # Copyright (c) 2013, Nucleic Development Team & H. Rutjes.\n * #\n * # Distributed under the terms of the Modified BSD License.\n * #\n * # The full license is in the file COPYING.txt, distributed with this software.\n * #------------------------------------------------------------------------------\n **/\nimport * as kiwi from 'kiwi.js';\n\nimport { distance1d } from './common';\n\n/**\n * Combines the given object's id and key to create a new key\n * @param {number} obj An object with `id` property\n * @param {number} key An identifier string\n * @returns {string} The combined key\n */\nconst key = (obj, key) => {\n  if (typeof obj.id === 'undefined')\n    throw new Error(`Object is missing property 'id' required for key.`);\n  return obj.id + '_' + key;\n};\n\n/**\n * Returns the value `a - b`\n * @param {number} a The first number\n * @param {number} b The second number\n * @returns {number} The result\n */\nexport const subtract = (a, b) => a - b;\n\n/**\n * Given a `solver` operator function, returns the equivalent kiwi.js operator if defined\n * @param {function} operator The operator function\n * @returns {object|undefined} The kiwi.js operator\n */\nconst toStrictOperator = operator => {\n  if (operator === equalTo) return kiwi.Operator.Eq;\n  if (operator === greaterOrEqual) return kiwi.Operator.Ge;\n};\n\n/**\n * Returns `true` if `a === b` otherwise `false`\n * @param {number} a The first value\n * @param {number} b The second value\n * @returns {boolean} The result\n */\nexport const equalTo = (a, b) => a === b;\n\n/**\n * Returns `true` if `a >= b` otherwise `false`\n * @param {number} a The first number\n * @param {number} b The second number\n * @returns {boolean} The result\n */\nexport const greaterOrEqual = (a, b) => a >= b;\n\n/**\n * Applies the given constraints to the objects in-place.\n * If `strict` is set, limitations apply but an exact solution is attempted,\n * otherwise a solution is approximated iteratively\n * @param {array} constraints The constraints to apply\n * @param {object} constraint.a The first object to constrain\n * @param {object} constraint.b The second object to constrain\n * @param {string} constraint.key The property name on `a` and `b` to constrain\n * @param {boolean=true} constraint.required Whether the constraint must be satisfied during strict solving\n * @param {function=} constraint.delta A signed difference function given `a` and `b`. Default `subtract`\n * @param {function=} constraint.distance An absolute distance function given `a` and `b`. Default `distance1d`\n * @param {function=} constraint.target A target difference for `a` and `b`. Default `() => 0`\n * @param {function=} constraint.weightA The amount to adjust `a[key]`. Default `() => 1`\n * @param {function=} constraint.weightB The amount to adjust `b[key]`. Default `() => 1`\n * @param {number=1} iterations The number of iterations\n * @param {boolean=false} strict\n */\nexport const solve = (constraints, iterations = 1, strict = false) => {\n  if (strict) return solveStrict(constraints);\n  return solveLoose(constraints, iterations);\n};\n\n/**\n * Applies the given constraints to the objects in-place.\n * Constraint targets and operators can be static or dynamic.\n * A solution is approximated iteratively\n * @param {array} constraints The constraints. See docs for `solve`\n * @param {number} iterations The number of iterations\n */\nconst solveLoose = (constraints, iterations) => {\n  for (let i = 0; i < iterations; i += 1) {\n    for (const co of constraints) {\n      const delta = (co.delta || subtract)(co.a[co.key], co.b[co.key], co);\n      const distance = (co.distance || distance1d)(\n        co.a[co.key],\n        co.b[co.key],\n        co\n      );\n      const target = co.target(co.a[co.key], co.b[co.key], co, delta, distance);\n\n      if (!(co.operator || equalTo)(distance, target, delta)) {\n        const resolve = (co.strength ? co.strength(co) : 1) * (delta - target);\n\n        let weightA = co.weightA ? co.weightA(co) : 1;\n        let weightB = co.weightB ? co.weightB(co) : 1;\n\n        weightA = weightA / (weightA + weightB);\n        weightB = 1 - weightA;\n\n        co.a[co.key] -= weightA * resolve;\n        co.b[co.key] += weightB * resolve;\n      }\n    }\n  }\n};\n\n/**\n * Applies the given constraints to the objects in-place.\n * Limitations:\n *  - Constraint targets and operators must be static\n *  - `delta` is always subtract\n *  - `distance` is always subtract (i.e. signed)\n * A solution is found exactly if possible, otherwise throws an error\n * @param {array} constraints The constraints. See docs for `solve`\n */\nconst solveStrict = constraints => {\n  const solver = new kiwi.Solver();\n  const variables = {};\n\n  for (const co of constraints) {\n    variables[key(co.a, co.key)] = new kiwi.Variable();\n    variables[key(co.b, co.key)] = new kiwi.Variable();\n  }\n\n  for (const co of constraints) {\n    const expression = variables[key(co.a, co.key)].minus(\n      variables[key(co.b, co.key)]\n    );\n\n    co.constraint = new kiwi.Constraint(\n      expression,\n      toStrictOperator(co.operator || equalTo),\n      co.target(),\n      co.required === true ? kiwi.Strength.required : kiwi.Strength.strong\n    );\n\n    solver.addConstraint(co.constraint);\n  }\n\n  solver.updateVariables();\n\n  for (const co of constraints) {\n    co.a[co.key] = variables[key(co.a, co.key)].value();\n    co.b[co.key] = variables[key(co.b, co.key)].value();\n  }\n};\n","import { halfPI, snap, angle, compare, groupByRow } from './common';\nimport { solve, greaterOrEqual, equalTo } from './solver';\n\n/**\n * Finds positions for the given nodes relative to their edges.\n * Input nodes and edges are updated in-place.\n * Results are stored in the `x, y` properties on nodes.\n * @param {object} params The layout parameters\n * @param {array} params.nodes The input nodes\n * @param {array} params.edges The input edges\n * @param {object=} params.layers The node layers if specified\n * @param {number} params.basisX The basis relating diagram width in X\n * @param {number} params.spaceX The minimum gap between nodes in X\n * @param {number} params.spaceY The minimum gap between nodes in Y\n * @param {number} params.layerSpaceY The additional gap between nodes in Y between layers\n * @param {number} params.iterations The number of solver iterations to perform\n * @returns {void}\n */\nexport const layout = ({\n  nodes,\n  edges,\n  layers,\n  basisX,\n  spaceX,\n  spaceY,\n  layerSpaceY,\n  iterations\n}) => {\n  const layerConstraints = [];\n  const crossingConstraints = [];\n  const parallelConstraints = [];\n  const parallelSingleConstraints = [];\n  const parallelDoubleConstraints = [];\n  const separationConstraints = [];\n  const snapConstraints = [];\n\n  for (const node of nodes) {\n    node.x = 0;\n    node.y = 0;\n  }\n\n  // Constraints in Y formed by the edges of the graph\n  const rowConstraints = edges.map(edge => ({\n    a: edge.targetNode,\n    b: edge.sourceNode,\n    key: 'y',\n    operator: greaterOrEqual,\n    target: () => spaceY,\n    weightA: () => 0,\n    weightB: () => 1,\n    required: true\n  }));\n\n  // Constraints in Y separating nodes into layers if specified\n  if (layers) {\n    const layerNames = Object.values(layers);\n    const layerSpace = (spaceY + layerSpaceY) * 0.5;\n    let layerNodes = nodes.filter(node => node.nearestLayer === layerNames[0]);\n\n    // For each defined layer\n    for (let i = 0; i < layerNames.length - 1; i += 1) {\n      const layer = layerNames[i];\n      const nextLayer = layerNames[i + 1];\n      const nextLayerNodes = nodes.filter(\n        node => node.nearestLayer === nextLayer\n      );\n\n      // Create a temporary intermediary 'node'\n      const layerNode = { id: layer, x: 0, y: 0 };\n\n      // Constraints in Y for each node such that node.y <= layerNode.y - spaceY\n      for (const node of layerNodes) {\n        layerConstraints.push({\n          a: layerNode,\n          b: node,\n          key: 'y',\n          operator: greaterOrEqual,\n          target: () => layerSpace,\n          weightA: () => 0,\n          weightB: () => 1\n        });\n      }\n\n      // Constraints in Y for each node on the next layer such that node.y >= layerNode.y\n      for (const node of nextLayerNodes) {\n        layerConstraints.push({\n          a: node,\n          b: layerNode,\n          key: 'y',\n          operator: greaterOrEqual,\n          target: () => layerSpace,\n          weightA: () => 0,\n          weightB: () => 1\n        });\n      }\n\n      layerNodes = nextLayerNodes;\n    }\n  }\n\n  // Find the positions of each node in Y given the constraints exactly\n  solve([...rowConstraints, ...layerConstraints], 1, true);\n\n  // Find the rows formed by the nodes\n  const rows = groupByRow(nodes);\n\n  // Constraints in X to prevent a pair of edges crossing\n  const crossingConstraint = {\n    basisX,\n    key: 'x',\n    operator: (distance, target, delta) =>\n      target >= 0 ? delta >= target : delta <= target,\n    target: (a, b, co) => {\n      // Find the minimal target position that separates both nodes\n      const sourceDelta = co.edgeA.sourceNode.x - co.edgeB.sourceNode.x;\n      const targetDelta = co.edgeA.targetNode.x - co.edgeB.targetNode.x;\n      return sourceDelta + targetDelta < 0 ? -co.basisX : co.basisX;\n    },\n    strength: co => 1 / co.basisX,\n    weightA: () => 0.5,\n    weightB: () => 0.5\n  };\n\n  // For every pair of edges\n  for (let i = 0; i < edges.length; i += 1) {\n    const edgeA = edges[i];\n\n    for (let j = i + 1; j < edges.length; j += 1) {\n      const edgeB = edges[j];\n\n      // Add crossing constraint between edge source nodes, where different\n      if (edgeA.source !== edgeB.source) {\n        crossingConstraints.push({\n          ...crossingConstraint,\n          a: edgeA.sourceNode,\n          b: edgeB.sourceNode,\n          edgeA,\n          edgeB\n        });\n      }\n\n      // Add crossing constraint between edge target nodes, where different\n      if (edgeA.target !== edgeB.target) {\n        crossingConstraints.push({\n          ...crossingConstraint,\n          a: edgeA.targetNode,\n          b: edgeB.targetNode,\n          edgeA,\n          edgeB\n        });\n      }\n    }\n  }\n\n  // Constraints in X to minimise edge length thereby prioritising straight parallel edges in Y\n  for (const edge of edges) {\n    const parallelConstraint = {\n      a: edge.sourceNode,\n      b: edge.targetNode,\n      key: 'x',\n      operator: equalTo,\n      target: () => 0,\n      // Lower degree nodes can be moved more freely than higher\n      strength: co =>\n        1 / Math.max(1, 0.5 * (co.a.targets.length + co.b.sources.length)),\n      weightA: () => 0.5,\n      weightB: () => 0.5\n    };\n\n    parallelConstraints.push(parallelConstraint);\n\n    const sourceHasOneTarget = edge.sourceNode.targets.length === 1;\n    const targetHasOneSource = edge.targetNode.sources.length === 1;\n\n    // Collect edges connected to single-degree nodes at either end\n    if (sourceHasOneTarget || targetHasOneSource) {\n      parallelSingleConstraints.push(parallelConstraint);\n    }\n\n    // Collect edges connected to single-degree at both ends\n    if (sourceHasOneTarget && targetHasOneSource) {\n      parallelDoubleConstraints.push(parallelConstraint);\n    }\n  }\n\n  // Solving loop for constraints in X\n  const halfIterations = Math.ceil(iterations * 0.5);\n\n  for (let i = 0; i < iterations; i += 1) {\n    // Minimise crossing\n    solve(crossingConstraints, 1);\n\n    // Minimise edge length\n    solve(parallelConstraints, 1);\n\n    // Minimise edge length specifically for low-degree edges more strongly\n    solve(parallelSingleConstraints, halfIterations);\n    solve(parallelDoubleConstraints, halfIterations);\n\n    // Clear separation constraints from previous iteration\n    separationConstraints.length = 0;\n\n    // For each row\n    for (let l = 0; l < rows.length; l += 1) {\n      const rowNodes = rows[l];\n\n      // Sort rows in order of X position. Break ties with ids for stability\n      rowNodes.sort((a, b) => compare(a.x, b.x, a.id, b.id));\n\n      // Constraints in X to maintain minimum node separation\n      for (let j = 0; j < rowNodes.length - 1; j += 1) {\n        separationConstraints.push({\n          a: rowNodes[j],\n          b: rowNodes[j + 1],\n          key: 'x',\n          operator: (distance, target, delta) => delta <= target,\n          target: (ax, bx, co) => -spaceX - co.a.width * 0.5 - co.b.width * 0.5,\n          strength: () => 1,\n          weightA: () => 0.5,\n          weightB: () => 0.5\n        });\n      }\n    }\n\n    // Minimise node separation overlap\n    solve(separationConstraints, halfIterations);\n  }\n\n  // For each row already sorted in X\n  for (let l = 0; l < rows.length; l += 1) {\n    const rowNodes = rows[l];\n\n    // For each node on the row\n    for (let i = 0; i < rowNodes.length - 1; i += 1) {\n      // Find the current node separation\n      const separation = (rowNodes[i + 1].x - rowNodes[i].x) * 0.8;\n\n      // Find the minimal required separation\n      const minSeparation =\n        rowNodes[i].width * 0.5 + spaceX + rowNodes[i + 1].width * 0.5;\n\n      // Snap the separation to a unit amount\n      const targetSeparation = Math.max(\n        snap(separation, spaceX),\n        minSeparation\n      );\n\n      // Constraints in X to maintain target separation\n      snapConstraints.push({\n        a: rowNodes[i + 1],\n        b: rowNodes[i],\n        key: 'x',\n        operator: greaterOrEqual,\n        target: () => targetSeparation,\n        weightA: () => 0,\n        weightB: () => 1,\n        required: true\n      });\n    }\n  }\n\n  // Find final positions of each node in X under given constraints exactly\n  solve([...snapConstraints, ...parallelConstraints], 1, true);\n\n  // Add additional spacing in Y for rows with many crossing edges\n  expandDenseRows(edges, rows, spaceY);\n};\n\n/**\n * Adds additional spacing in Y for rows containing many crossing edges.\n * Node positions are updated in-place\n * @param {array} edges The input edges\n * @param {array} rows The input rows of nodes\n * @param {number} spaceY The minimum spacing between nodes in Y\n */\nconst expandDenseRows = (edges, rows, spaceY) => {\n  const densities = rowDensity(edges);\n  let currentOffsetY = 0;\n\n  // Add spacing based on density, snapped to a grid to improve vertical rhythm\n  for (let i = 0; i < densities.length; i += 1) {\n    const density = densities[i];\n    const offsetY = snap(density * spaceY, Math.round(spaceY * 0.25));\n    currentOffsetY += offsetY;\n\n    for (const node of rows[i + 1]) {\n      node.y += currentOffsetY;\n    }\n  }\n};\n\n/**\n * Estimates an average 'density' for each row based on average edge angle at that row.\n * Rows are decided by each edge's source and target node Y positions.\n * Intermediate rows are assumed always vertical as a simplification.\n * Returns a list of values in `(0, 1)` where `0` means all edges on that row are vertical and `1` means all horizontal\n * @param {array} edges The input edges\n * @returns {array} The density of each row\n */\nconst rowDensity = edges => {\n  const rows = {};\n\n  for (const edge of edges) {\n    // Find the normalized angle of the edge source and target nodes, relative to the X axis\n    const edgeAngle =\n      Math.abs(angle(edge.targetNode, edge.sourceNode) - halfPI) / halfPI;\n\n    const sourceRow = edge.sourceNode.row;\n    const targetRow = edge.targetNode.row - 1;\n\n    // Add angle to the source row total\n    rows[sourceRow] = rows[sourceRow] || [0, 0];\n    rows[sourceRow][0] += edgeAngle;\n    rows[sourceRow][1] += 1;\n\n    if (targetRow !== sourceRow) {\n      // Add angle to the target row total\n      rows[targetRow] = rows[targetRow] || [0, 0];\n      rows[targetRow][0] += edgeAngle;\n      rows[targetRow][1] += 1;\n    }\n  }\n\n  // Find the average angle for each row\n  for (const row in rows) {\n    rows[row] = rows[row][0] / (rows[row][1] || 1);\n  }\n\n  return Object.values(rows);\n};\n","import { offsetNode, offsetEdge } from './common';\nimport { layout } from './layout';\nimport { routing } from './routing';\n\nconst defaultOptions = {\n  layout: {\n    spaceX: 16,\n    spaceY: 110,\n    layerSpaceY: 55,\n    basisX: 1500,\n    padding: 100,\n    iterations: 20\n  },\n  routing: {\n    spaceX: 26,\n    spaceY: 28,\n    minPassageGap: 40,\n    stemUnit: 8,\n    stemMinSource: 5,\n    stemMinTarget: 5,\n    stemMax: 20,\n    stemSpaceSource: 6,\n    stemSpaceTarget: 10\n  }\n};\n\n/**\n * Generates a diagram of the given DAG.\n * Input nodes and edges are updated in-place.\n * Results are stored as `x, y` properties on nodes\n * and `points` properties on edges.\n * @param {array} nodes The input nodes\n * @param {array} edges The input edges\n * @param {object=} layers The node layers if specified\n * @param {object=} options The graph options\n * @returns {object} The generated graph\n */\nexport const graph = (nodes, edges, layers, options = defaultOptions) => {\n  addEdgeLinks(nodes, edges);\n  addNearestLayers(nodes, layers);\n\n  layout({ nodes, edges, layers, ...options.layout });\n  routing({ nodes, edges, layers, ...options.routing });\n\n  const size = bounds(nodes, options.layout.padding);\n  nodes.forEach(node => offsetNode(node, size.min));\n  edges.forEach(edge => offsetEdge(edge, size.min));\n\n  return {\n    nodes,\n    edges,\n    layers,\n    size\n  };\n};\n\n/**\n * Adds lists of source edges and target edges to each node in-place\n * @param {array} nodes The input nodes\n * @param {array} edges The input edges\n */\nexport const addEdgeLinks = (nodes, edges) => {\n  const nodeById = {};\n\n  for (const node of nodes) {\n    nodeById[node.id] = node;\n    node.targets = [];\n    node.sources = [];\n  }\n\n  for (const edge of edges) {\n    edge.sourceNode = nodeById[edge.source];\n    edge.targetNode = nodeById[edge.target];\n    edge.sourceNode.targets.push(edge);\n    edge.targetNode.sources.push(edge);\n  }\n};\n\n/**\n * Adds the nearest layer to each node based on the layers of its connected nodes in-place\n * @param {array} nodes The input nodes\n * @param {?array} layers The input layers\n */\nconst addNearestLayers = (nodes, layers) => {\n  if (layers && layers.length > 0) {\n    // Only accept layers specififed in the layers list.\n    const layersMap = layers.reduce(\n      (res, layer) => ({ ...res, [layer]: true }),\n      {}\n    );\n    const hasValidLayer = node => Boolean(layersMap[node.layer]);\n\n    for (const node of nodes) {\n      const layerNode = findNodeBy(\n        node,\n        targetThenSourceNodes,\n        nodeDistance,\n        hasValidLayer\n      );\n      node.nearestLayer = layerNode && layerNode.layer;\n    }\n  }\n};\n\n/**\n * Returns the list of the node's connected target nodes followed by its connected source nodes\n * @param {object} node The input node\n * @returns {array} The connected nodes\n */\nconst targetThenSourceNodes = node =>\n  targetNodes(node).concat(sourceNodes(node));\n\n/**\n * Returns the list of target nodes directly connected to the given node\n * @param {object} node The input node\n * @returns {array} The target nodes\n */\nconst targetNodes = node => node.targets.map(edge => edge.targetNode);\n\n/**\n * Returns the list of source nodes directly connected to the given node\n * @param {object} node The input node\n * @returns {array} The source nodes\n */\nconst sourceNodes = node => node.sources.map(edge => edge.sourceNode);\n\n/**\n * Returns the distance between the two nodes using their assigned rank\n * @param {object} nodeA The first input node\n * @param {object} nodeB The second input node\n * @returns {number} The distance\n */\nconst nodeDistance = (nodeA, nodeB) => Math.abs(nodeA.rank - nodeB.rank);\n\n/**\n * Starting at the given node and expanding successors, returns the first node accepted relative to the metric\n * @param {object} node The starting node\n * @param {function} successors A function returning the next nodes to expand\n * @param {function} metric A function that measures the difference between two nodes\n * @param {function} accept A function that returns true if the current node fits the criteria\n * @param {object=} visited An object keeping track of nodes already searched\n * @returns {?object} The first node accepted, if found\n */\nconst findNodeBy = (node, successors, metric, accept, visited) => {\n  if (accept(node)) return node;\n\n  visited = visited || {};\n  visited[node.id] = true;\n\n  const next = successors(node).filter(node => !visited[node.id]);\n  const nearest = next.sort(\n    (nodeA, nodeB) => metric(node, nodeA) - metric(node, nodeB)\n  );\n  const accepted = nearest.filter(accept);\n\n  return (\n    accepted[0] ||\n    nearest.map(node =>\n      findNodeBy(node, successors, metric, accept, visited)\n    )[0]\n  );\n};\n\n/**\n * Finds the region bounding the given nodes\n * @param {array} nodes The input nodes\n * @param {number} padding Additional padding around the bounds\n * @returns {object} The bounds\n */\nconst bounds = (nodes, padding) => {\n  const size = {\n    min: { x: Infinity, y: Infinity },\n    max: { x: -Infinity, y: -Infinity }\n  };\n\n  for (const node of nodes) {\n    const x = node.x;\n    const y = node.y;\n\n    if (x < size.min.x) size.min.x = x;\n    if (x > size.max.x) size.max.x = x;\n    if (y < size.min.y) size.min.y = y;\n    if (y > size.max.y) size.max.y = y;\n  }\n\n  size.width = size.max.x - size.min.x + 2 * padding;\n  size.height = size.max.y - size.min.y + 2 * padding;\n  size.min.x -= padding;\n  size.min.y -= padding;\n\n  return size;\n};\n","import {\n  compare,\n  distance1d,\n  angle,\n  nearestOnLine,\n  groupByRow,\n  nodeLeft,\n  nodeRight,\n  nodeTop,\n  nodeBottom\n} from './common';\n\n/**\n * Finds positions for the given edges relative to their nodes.\n * Input nodes and edges are updated in-place.\n * Results are stored in the `points` property on edges.\n * @param {object} params The layout parameters\n * @param {array} params.nodes The input nodes\n * @param {array} params.edges The input edges\n * @param {number} params.spaceX The minimum gap between a node and passing edges in X\n * @param {number} params.spaceY The minimum gap between a node and passing edges in Y\n * @param {number} params.minPassageGap The minimum gap between two nodes in which an edge can pass in X\n * @param {number} params.stemUnit The unit length for edge stems at anchors\n * @param {number} params.stemMax The maximum length of edge stems at anchors\n * @param {number} params.stemMinSource The minimum length for edge stems at source anchors\n * @param {number} params.stemMinTarget The minimum length for edge stems at target anchors\n * @param {number} params.stemSpaceSource The ideal spacing between edge stems at source anchors\n * @param {number} params.stemSpaceTarget The ideal spacing between edge stems at target anchors\n * @returns {void}\n */\nexport const routing = ({\n  nodes,\n  edges,\n  spaceX,\n  spaceY,\n  minPassageGap,\n  stemUnit,\n  stemMinSource,\n  stemMinTarget,\n  stemMax,\n  stemSpaceSource,\n  stemSpaceTarget\n}) => {\n  // Find the rows formed by nodes\n  const rows = groupByRow(nodes);\n\n  // For each node\n  for (const node of nodes) {\n    // Sort the node's target edges by the angle between source and target nodes\n    node.targets.sort((a, b) =>\n      compare(\n        angle(b.sourceNode, b.targetNode),\n        angle(a.sourceNode, a.targetNode)\n      )\n    );\n  }\n\n  // For each edge\n  for (const edge of edges) {\n    const source = edge.sourceNode;\n    const target = edge.targetNode;\n\n    // Initialise result container\n    edge.points = [];\n\n    // Find the ideal gap between edge source anchors\n    const sourceSeparation = Math.min(\n      (source.width - stemSpaceSource) / source.targets.length,\n      stemSpaceSource\n    );\n\n    const sourceEdgeDistance =\n      source.targets.indexOf(edge) - (source.targets.length - 1) * 0.5;\n\n    const sourceOffsetX = sourceSeparation * sourceEdgeDistance;\n\n    // Start at source node offset\n    const startPoint = { x: source.x + sourceOffsetX, y: source.y };\n    let currentPoint = startPoint;\n\n    // For each row between the source and target rows exclusive\n    for (let l = source.row + 1; l < target.row; l += 1) {\n      const firstNode = rows[l][0];\n\n      // Initialise search for next point\n      let nearestPoint = { x: nodeLeft(firstNode) - spaceX, y: firstNode.y };\n      let nearestDistance = Infinity;\n\n      // Extend the row 'to infinity' on each side in X\n      const rowExtended = [\n        { ...firstNode, x: Number.MIN_SAFE_INTEGER },\n        ...rows[l],\n        { ...firstNode, x: Number.MAX_SAFE_INTEGER }\n      ];\n\n      // For each gap between each nodes on the row\n      for (let i = 0; i < rowExtended.length - 1; i += 1) {\n        const node = rowExtended[i];\n        const nextNode = rowExtended[i + 1];\n        const nodeGap = nodeLeft(nextNode) - nodeRight(node);\n\n        // Avoid routing through small gaps, increase bundling\n        if (nodeGap < minPassageGap) continue;\n\n        const offsetX = Math.min(spaceX, nodeGap * 0.5);\n\n        // Find the next potential point. Include offset to reduce overlapping edges\n        const candidatePoint = nearestOnLine(\n          currentPoint.x,\n          currentPoint.y,\n          nodeRight(node) + offsetX,\n          nodeTop(node) - spaceY,\n          nodeLeft(nextNode) - offsetX,\n          nodeTop(nextNode) - spaceY\n        );\n\n        const distance = distance1d(currentPoint.x, candidatePoint.x);\n\n        // Early out if diverging\n        if (distance > nearestDistance) {\n          break;\n        }\n\n        // Keep the nearest point\n        if (distance < nearestDistance) {\n          nearestDistance = distance;\n          nearestPoint = candidatePoint;\n        }\n      }\n\n      // Pass the node at nearest point\n      const offsetY = firstNode.height + spaceY;\n      edge.points.push({\n        x: nearestPoint.x + sourceOffsetX,\n        y: nearestPoint.y\n      });\n      edge.points.push({\n        x: nearestPoint.x + sourceOffsetX,\n        y: nearestPoint.y + offsetY\n      });\n\n      currentPoint = {\n        x: nearestPoint.x,\n        y: nearestPoint.y + offsetY\n      };\n    }\n  }\n\n  // For each node\n  for (const node of nodes) {\n    // Sort the node's outgoing edges by the starting angle of the edge path\n    node.targets.sort((a, b) =>\n      compare(\n        angle(b.sourceNode, b.points[0] || b.targetNode),\n        angle(a.sourceNode, a.points[0] || a.targetNode)\n      )\n    );\n    // Sort the node's incoming edges by the ending angle of the edge path\n    node.sources.sort((a, b) =>\n      compare(\n        angle(a.points[a.points.length - 1] || a.sourceNode, a.targetNode),\n        angle(b.points[b.points.length - 1] || b.sourceNode, b.targetNode)\n      )\n    );\n  }\n\n  // For each edge\n  for (const edge of edges) {\n    const source = edge.sourceNode;\n    const target = edge.targetNode;\n\n    // Find the ideal gap between edge source and target anchors\n    const sourceSeparation = Math.min(\n      (source.width - stemSpaceSource) / source.targets.length,\n      stemSpaceSource\n    );\n\n    const targetSeparation = Math.min(\n      (target.width - stemSpaceTarget) / target.sources.length,\n      stemSpaceTarget\n    );\n\n    const sourceEdgeDistance =\n      source.targets.indexOf(edge) - (source.targets.length - 1) * 0.5;\n    const targetEdgeDistance =\n      target.sources.indexOf(edge) - (target.sources.length - 1) * 0.5;\n\n    const sourceOffsetX = sourceSeparation * sourceEdgeDistance;\n    const targetOffsetX = targetSeparation * targetEdgeDistance;\n\n    // Decrease stem length outwards from the middle stem\n    const sourceOffsetY =\n      stemUnit *\n      source.targets.length *\n      (1 - Math.abs(sourceEdgeDistance) / source.targets.length);\n\n    const targetOffsetY =\n      stemUnit *\n      target.sources.length *\n      (1 - Math.abs(targetEdgeDistance) / target.sources.length);\n\n    // Build the source stem for the edge\n    const sourceStem = [\n      {\n        x: source.x + sourceOffsetX,\n        y: nodeBottom(source)\n      },\n      {\n        x: source.x + sourceOffsetX,\n        y: nodeBottom(source) + stemMinSource\n      },\n      {\n        x: source.x + sourceOffsetX,\n        y: nodeBottom(source) + stemMinSource + Math.min(sourceOffsetY, stemMax)\n      }\n    ];\n\n    // Build the target stem for the edge\n    const targetStem = [\n      {\n        x: target.x + targetOffsetX,\n        y: nodeTop(target) - stemMinTarget - Math.min(targetOffsetY, stemMax)\n      },\n      {\n        x: target.x + targetOffsetX,\n        y: nodeTop(target) - stemMinTarget\n      },\n      {\n        x: target.x + targetOffsetX,\n        y: nodeTop(target)\n      }\n    ];\n\n    // Combine all points\n    const points = [...sourceStem, ...edge.points, ...targetStem];\n\n    // Fix any invalid points caused by invalid layouts\n    let pointYMax = points[0].y;\n\n    for (const point of points) {\n      // Ensure increasing Y values for each point\n      if (point.y < pointYMax) {\n        point.y = pointYMax;\n      } else {\n        pointYMax = point.y;\n      }\n    }\n\n    // Assign finished points to edge\n    edge.points = points;\n  }\n};\n","import dagre from 'dagre';\nimport { graph } from './graph';\n\n/**\n * Calculate chart layout with experimental new graphing algorithm\n * This is an extremely expensive operation so we want it to run as infrequently\n * as possible, and keep it separate from other properties (like node.active)\n * which don't affect layout.\n */\nexport const graphNew = ({ nodes, edges, layers }) => {\n  const result = graph(nodes, edges, layers);\n  return {\n    ...result,\n    size: { ...result.size, marginx: 100, marginy: 100 },\n    oldgraph: false\n  };\n};\n\n/**\n * Calculate chart layout with Dagre.js.\n * This is an extremely expensive operation so we want it to run as infrequently\n * as possible, and keep it separate from other properties (like node.active)\n * which don't affect layout.\n */\nexport const graphDagre = ({ nodes, edges, layers }) => {\n  const hasLayers = Boolean(layers.length);\n  const graph = new dagre.graphlib.Graph().setGraph({\n    ranker: hasLayers ? 'none' : null,\n    ranksep: hasLayers ? 200 : 70,\n    marginx: 40,\n    marginy: 40\n  });\n\n  nodes.forEach(node => {\n    graph.setNode(node.id, node);\n  });\n\n  edges.forEach(edge => {\n    graph.setEdge(edge.source, edge.target, edge);\n  });\n\n  // Run Dagre layout to calculate X/Y positioning\n  dagre.layout(graph);\n\n  return {\n    nodes: graph.nodes().map(id => {\n      const node = graph.node(id);\n      return {\n        ...node,\n        order: node.x + node.y * 9999\n      };\n    }),\n    edges: graph.edges().map(id => graph.edge(id)),\n    size: graph.graph(),\n    oldgraph: true\n  };\n};\n"],"sourceRoot":""}